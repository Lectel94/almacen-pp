var Pi=Object.defineProperty;var Ni=(n,t,e)=>t in n?Pi(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Oe=(n,t,e)=>Ni(n,typeof t!="symbol"?t+"":t,e);var $i=Object.defineProperty,Hi=(n,t,e)=>t in n?$i(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Ie=(n,t,e)=>Hi(n,typeof t!="symbol"?t+"":t,e);document.addEventListener("alpine:init",()=>{window.Alpine.store("editOnClickValidation",{pending:[],set(n,t){this.pending=this.pending.filter(e=>e.value!==n),this.pending.push({value:n,textContent:t})},has(n){return this.pending.some(t=>t.value===n)},get(n){return this.pending.find(t=>t.value===n)},notContains(n){return this.pending.length>0&&!this.has(n)},clear(){this.pending=[]},getTextContent(n){const t=this.pending.find(e=>e.value===n);return t?t.textContent:null}}),window.editOnClickValidation=window.Alpine.store("editOnClickValidation")});document.addEventListener("alpine:init",()=>{window.Alpine.store("pgBulkActions",{selected:[],init(){window.addEventListener("pgBulkActions::addMore",n=>{const t=n.__livewire.params[0];typeof this.selected[t.tableName]>"u"&&(this.selected[t.tableName]=[]),this.selected[t.tableName].push(t.value)}),window.addEventListener("pgBulkActions::clear",n=>{this.clear(n.detail)}),window.addEventListener("pgBulkActions::clearAll",()=>{this.clearAll()})},add(n,t){if(typeof this.selected[t]>"u"&&(this.selected[t]=[]),!this.selected[t].includes(n)){this.selected[t].push(n);return}this.remove(n,t)},remove(n,t){const e=this.selected[t].indexOf(n);e>-1&&this.selected[t].splice(e,1)},get(n){return this.selected[n]??""},count(n){return typeof this.selected[n]>"u"?0:this.selected[n].length},clear(n){this.selected[n]=[]},clearAll(){this.selected=[]}}),window.pgBulkActions=window.Alpine.store("pgBulkActions")});const ji=n=>({field:n.field??null,tableName:n.tableName??null,enabled:n.enabled??!1,id:n.id,trueValue:n.trueValue,falseValue:n.falseValue,toggle:n.toggle,save(){this.toggle=this.toggle===0?1:0,this.$wire.dispatch("pg:toggleable-"+this.tableName,{id:this.id,field:this.field,value:this.toggle})}}),Vi=(n,t,e)=>{const i=n[t];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((s,a)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==e?". Note that variables only represent file names one level deep.":""))))})},Ri=n=>({dataField:n.dataField,tableName:n.tableName,label:n.label??null,locale:n.locale??{locale:"default",dateFormat:"Y-m-d H:i",time_24hr:!1,enableTime:!0},onlyFuture:n.onlyFuture??!1,noWeekEnds:n.noWeekEnds??!1,customConfig:n.customConfig??null,type:n.type,element:null,selectedDates:null,async init(){typeof flatpickr>"u"&&(console.log("%c%s","color: #f59e0c; font-size: 1.2em; font-weight: bold; line-height: 1.5"," PowerGrid"),console.error("%c%s","font-size: 1em; line-height: 1.5",`
Failed to mount filter: Filter::datetime('${this.dataField}') on table ['${this.tableName}']

• Install flatpickr: npm install flatpickr

• Add 'import flatpickr from "flatpickr"' in resources/js/app.js file
  `)),window.addEventListener(`pg:clear_flatpickr::${this.tableName}:${this.dataField}`,()=>{this.$refs.rangeInput&&this.element&&this.element.clear()}),window.addEventListener(`pg:clear_all_flatpickr::${this.tableName}`,()=>{this.$refs.rangeInput&&this.element&&this.element.clear()});try{const e=await Vi(Object.assign({}),`./flatpickr/dist/l10n/${this.locale.locale}.js`,5);flatpickr.localize(e.default||e)}catch{}const t=this.getOptions();this.$refs.rangeInput&&typeof flatpickr<"u"&&(this.element=flatpickr(this.$refs.rangeInput,t),this.selectedDates=this.$wire.get(`filters.${this.type}.${this.dataField}.formatted`),this.element.setDate(this.selectedDates))},getOptions(){const t={mode:"range",defaultHour:0,...this.locale,...this.customConfig};return this.onlyFuture&&(t.minDate="today"),this.noWeekEnds&&(t.disable=[function(e){return e.getDay()===0||e.getDay()===6}]),t.onClose=(e,i,s)=>{e=e.map(a=>this.element.formatDate(a,"Y-m-d")),e.length>0&&this.selectedDates!==i&&Livewire.dispatch("pg:datePicker-"+this.tableName,{selectedDates:e,dateStr:i,timezone:this.customConfig.timezone??new Date().toString().match(/([-\+][0-9]+)\s/)[1],type:this.type,field:this.dataField,label:this.label})},t}}),Bi=n=>({theme:n.theme,id:n.id??null,dataField:n.dataField??null,content:n.content,fallback:n.fallback,inputClass:n.inputClass,saveOnMouseOut:n.saveOnMouseOut,oldContent:null,editable:!1,hash:null,hashError:!0,showEditable:!1,editableInput:"",init(){this.content.length===0&&this.fallback&&(this.content=this.htmlSpecialChars(this.fallback)),this.hash=this.dataField+"-"+this.id,window.addEventListener("toggle-"+this.hash,()=>{this.observe(()=>document.getElementById("clickable-"+this.hash),t=>{t.click(),this.observe(()=>document.getElementById("editable-"+this.hash),e=>{setTimeout(()=>this.setFocusToEnd(e),100)})})}),this.$watch("editable",t=>{if(t){let e=!1;if(this.showEditable=!1,this.content=this.htmlSpecialChars(this.content),this.oldContent=this.content,this.hashError=this.store().notContains(this.hash),this.observe(()=>document.getElementById("editable-"+this.hash),i=>{setTimeout(()=>{this.setFocusToEnd(i),this.store().getTextContent(this.hash)&&(i.textContent=this.store().getTextContent(this.hash))},30)}),this.hashError){const i=this.store().get(this.hash),s=document.getElementById("clickable-"+i);s&&s.click()}e=!0,this.editableInput=`
                <div
                    x-ref="editable"
                    x-text="content"
                    value="${this.content}"
                    placeholder="${this.content}"
                    contenteditable
                    class="pg-single-line ${this.inputClass}"
                    ${this.saveOnMouseOut?'x-on:mousedown.outside="save()"':""}
                    x-on:keydown.enter="save()"
                    id="${"editable-"+this.dataField+"-"+this.id}"
                    x-on:keydown.esc="cancel"
                >
                </div>`,this.$nextTick(()=>setTimeout(()=>{this.showEditable=e,this.focus()},150))}}),this.content=this.htmlSpecialChars(this.content)},store(){return window.editOnClickValidation},save(){this.store().clear(),this.store().set(this.hash,this.$el.textContent),this.observe(()=>document.getElementById("clickable-"+this.hash),t=>{t.textContent=this.$el.textContent}),window.addEventListener("pg:editable-close-"+this.id,()=>{this.store().clear(),this.editable=!1,this.showEditable=!1}),this.store().has(this.hash)||this.store().set(this.hash,this.$el.textContent),this.$wire.dispatch("pg:editable-"+this.$wire.tableName,{id:this.id,value:this.$el.textContent,field:this.dataField}),this.oldContent=this.store().getTextContent(this.hash),this.$nextTick(()=>{this.focus(),this.$el.setAttribute("value","")}),this.content=this.htmlSpecialChars(this.$el.textContent)},focus(){this.setFocusToEnd(this.$el)},cancel(){this.store().clear(),this.$refs.editable.textContent=this.oldContent,this.content=this.oldContent,this.editable=!1,this.showEditable=!1,this.$refs.error&&(this.$refs.error.innerHTML="")},htmlSpecialChars(t){const e=document.createElement("div");return e.innerHTML=t,e.textContent},observe(t,e){new MutationObserver((i,s)=>{for(let a of i)if(a.type==="childList"){const r=t();if(r){e(r),s.disconnect();break}}}).observe(document.body,{childList:!0,subtree:!0})},setFocusToEnd(t){if(!t)return;const e=window.getSelection(),i=document.createRange();i.selectNodeContents(t),i.collapse(!1),e.removeAllRanges(),e.addRange(i),t.focus()}});function Yi(n){n.querySelectorAll("tbody tr td").forEach(t=>{t.classList.remove("hidden")}),n.querySelectorAll("thead tr th").forEach(t=>{t.classList.remove("hidden")})}function qi(n){let t=0;const e=n.querySelectorAll("table thead tr:nth-child(1) th[fixed]"),i=Rt(n);return e.forEach(s=>{t+=Rt(s)}),i-t}function zi(n,t){const e=[].slice.call(n.querySelectorAll("table thead tr:nth-child(1) th")),i=[].slice.call(e).sort(function(d,h){const p=d.getAttribute("sort_order")??999,m=h.getAttribute("sort_order")??999;return p-m});let s=0,a=!0;const r=[];return i.forEach(d=>{const h=Rt(d);d.getAttribute("fixed")===null&&(a&&s<=t&&s+h<=t?s+=h:(r.push(e.indexOf(d)+1),a=!1))}),r}function Ki(n,t){for(const e of t)n.querySelectorAll(`tbody:not(tbody[expand]) tr td:nth-child(${e})`).forEach(i=>{i.classList.add("hidden")}),n.querySelectorAll(`thead tr th:nth-child(${e})`).forEach(i=>{i.classList.add("hidden")})}function Ui(n,t){var e,i;if(n.querySelectorAll("table tbody[expand] tr td div").length){for(const s of n.querySelectorAll("table tbody[expand] tr td div"))s.innerHTML="";if(t.length)for(const s of t){const a=n.querySelectorAll("table tbody:not(tbody[expand])");for(const r of a){const d=(e=r.nextElementSibling)==null?void 0:e.querySelector("tr td div");if(!d)continue;let h=n.querySelector(`table thead tr th:nth-child(${s}) span[data-value]`).textContent;const p=(i=r.querySelector(`tr:last-child td:nth-child(${s})`))==null?void 0:i.innerHTML;h.length&&(h+=":"),d.querySelector(`div[data-expand-item-${s}]`)||(d.innerHTML+=`<div class="responsive-row-expand-item-container" data-expand-item-${s}>
                    <span class="font-bold responsive-row-expand-item-name">${h}</span>
                    <span class="responsive-row-expand-item-value">${p}</span>
                </div>`)}}}}function Rt(n){return parseFloat(n.getBoundingClientRect().width.toFixed(2))}function Wi(n){Yi(n);const t=qi(n),e=zi(n,t);Ui(n,e),Ki(n,e)}const Gi=()=>({running:!1,expanded:null,element:null,hasHiddenElements:!1,size:0,toggleExpanded(n){this.expanded=this.expanded==n?null:n},init(){this.$nextTick(()=>{this.handleResize(),this.observeElement(),window.addEventListener("pg-livewire-request-finished",()=>{setTimeout(()=>this.handleResize(),5)})})},handleResize(){var n;const t=this.$el;Wi(t),this.hasHiddenElements=(n=t.querySelector("table tbody[expand] tr td div"))==null?void 0:n.innerHTML,this.hasHiddenElements||(this.expanded=null)},observeElement(){new ResizeObserver(n=>{n.forEach(t=>{if(t.contentRect.width>0){if(this.size===this.$el.getBoundingClientRect().width)return;this.size=this.$el.getBoundingClientRect().width,this.handleResize()}})}).observe(this.$el)}}),Qi=(n,t,e)=>{Livewire.dispatch(`${n}-${t.tableName}`,{label:t.label,field:t.dataField,values:e})},qn=(n,t)=>{Qi("pg:multiSelect",n,t)};function Ot(n,t){n.split(/\s+/).forEach(e=>{t(e)})}class Ji{constructor(){this._events={}}on(t,e){Ot(t,i=>{const s=this._events[i]||[];s.push(e),this._events[i]=s})}off(t,e){var i=arguments.length;if(i===0){this._events={};return}Ot(t,s=>{if(i===1){delete this._events[s];return}const a=this._events[s];a!==void 0&&(a.splice(a.indexOf(e),1),this._events[s]=a)})}trigger(t,...e){var i=this;Ot(t,s=>{const a=i._events[s];a!==void 0&&a.forEach(r=>{r.apply(i,e)})})}}function Xi(n){return n.plugins={},class extends n{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(t,e){n.plugins[t]={name:t,fn:e}}initializePlugins(t){var e,i;const s=this,a=[];if(Array.isArray(t))t.forEach(r=>{typeof r=="string"?a.push(r):(s.plugins.settings[r.name]=r.options,a.push(r.name))});else if(t)for(e in t)t.hasOwnProperty(e)&&(s.plugins.settings[e]=t[e],a.push(e));for(;i=a.shift();)s.require(i)}loadPlugin(t){var e=this,i=e.plugins,s=n.plugins[t];if(!n.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');i.requested[t]=!0,i.loaded[t]=s.fn.apply(e,[e.plugins.settings[t]||{}]),i.names.push(t)}require(t){var e=this,i=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(i.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return i.loaded[t]}}}const ht=n=>(n=n.filter(Boolean),n.length<2?n[0]||"":es(n)==1?"["+n.join("")+"]":"(?:"+n.join("|")+")"),zn=n=>{if(!Zi(n))return n.join("");let t="",e=0;const i=()=>{e>1&&(t+="{"+e+"}")};return n.forEach((s,a)=>{if(s===n[a-1]){e++;return}i(),t+=s,e=1}),i(),t},Kn=n=>{let t=Array.from(n);return ht(t)},Zi=n=>new Set(n).size!==n.length,$e=n=>(n+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),es=n=>n.reduce((t,e)=>Math.max(t,ts(e)),0),ts=n=>Array.from(n).length,Un=n=>{if(n.length===1)return[[n]];let t=[];const e=n.substring(1);return Un(e).forEach(function(i){let s=i.slice(0);s[0]=n.charAt(0)+s[0],t.push(s),s=i.slice(0),s.unshift(n.charAt(0)),t.push(s)}),t},ns=[[0,65535]],is="[̀-ͯ·ʾʼ]";let rt,Wn;const ss=3,zt={},rn={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let n in rn){let t=rn[n]||"";for(let e=0;e<t.length;e++){let i=t.substring(e,e+1);zt[i]=n}}const rs=new RegExp(Object.keys(zt).join("|")+"|"+is,"gu"),as=n=>{rt===void 0&&(rt=ds(ns))},an=(n,t="NFKD")=>n.normalize(t),at=n=>Array.from(n).reduce((t,e)=>t+os(e),""),os=n=>(n=an(n).toLowerCase().replace(rs,t=>zt[t]||""),an(n,"NFC"));function*ls(n){for(const[t,e]of n)for(let i=t;i<=e;i++){let s=String.fromCharCode(i),a=at(s);a!=s.toLowerCase()&&(a.length>ss||a.length!=0&&(yield{folded:a,composed:s,code_point:i}))}}const cs=n=>{const t={},e=(i,s)=>{const a=t[i]||new Set,r=new RegExp("^"+Kn(a)+"$","iu");s.match(r)||(a.add($e(s)),t[i]=a)};for(let i of ls(n))e(i.folded,i.folded),e(i.folded,i.composed);return t},ds=n=>{const t=cs(n),e={};let i=[];for(let a in t){let r=t[a];r&&(e[a]=Kn(r)),a.length>1&&i.push($e(a))}i.sort((a,r)=>r.length-a.length);const s=ht(i);return Wn=new RegExp("^"+s,"u"),e},us=(n,t=1)=>{let e=0;return n=n.map(i=>(rt[i]&&(e+=i.length),rt[i]||i)),e>=t?zn(n):""},hs=(n,t=1)=>(t=Math.max(t,n.length-1),ht(Un(n).map(e=>us(e,t)))),on=(n,t=!0)=>{let e=n.length>1?1:0;return ht(n.map(i=>{let s=[];const a=t?i.length():i.length()-1;for(let r=0;r<a;r++)s.push(hs(i.substrs[r]||"",e));return zn(s)}))},fs=(n,t)=>{for(const e of t){if(e.start!=n.start||e.end!=n.end||e.substrs.join("")!==n.substrs.join(""))continue;let i=n.parts;const s=a=>{for(const r of i){if(r.start===a.start&&r.substr===a.substr)return!1;if(!(a.length==1||r.length==1)&&(a.start<r.start&&a.end>r.start||r.start<a.start&&r.end>a.start))return!0}return!1};if(!(e.parts.filter(s).length>0))return!0}return!1};class ot{constructor(){Ie(this,"parts"),Ie(this,"substrs"),Ie(this,"start"),Ie(this,"end"),this.parts=[],this.substrs=[],this.start=0,this.end=0}add(t){t&&(this.parts.push(t),this.substrs.push(t.substr),this.start=Math.min(t.start,this.start),this.end=Math.max(t.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(t,e){let i=new ot,s=JSON.parse(JSON.stringify(this.parts)),a=s.pop();for(const h of s)i.add(h);let r=e.substr.substring(0,t-a.start),d=r.length;return i.add({start:a.start,end:a.start+d,length:d,substr:r}),i}}const ps=n=>{as(),n=at(n);let t="",e=[new ot];for(let i=0;i<n.length;i++){let s=n.substring(i).match(Wn);const a=n.substring(i,i+1),r=s?s[0]:null;let d=[],h=new Set;for(const p of e){const m=p.last();if(!m||m.length==1||m.end<=i)if(r){const b=r.length;p.add({start:i,end:i+b,length:b,substr:r}),h.add("1")}else p.add({start:i,end:i+1,length:1,substr:a}),h.add("2");else if(r){let b=p.clone(i,m);const C=r.length;b.add({start:i,end:i+C,length:C,substr:r}),d.push(b)}else h.add("3")}if(d.length>0){d=d.sort((p,m)=>p.length()-m.length());for(let p of d)fs(p,e)||e.push(p);continue}if(i>0&&h.size==1&&!h.has("3")){t+=on(e,!1);let p=new ot;const m=e[0];m&&p.add(m.last()),e=[p]}}return t+=on(e,!0),t},gs=(n,t)=>{if(n)return n[t]},ms=(n,t)=>{if(n){for(var e,i=t.split(".");(e=i.shift())&&(n=n[e]););return n}},St=(n,t,e)=>{var i,s;return!n||(n=n+"",t.regex==null)||(s=n.search(t.regex),s===-1)?0:(i=t.string.length/n.length,s===0&&(i+=.5),i*e)},xt=(n,t)=>{var e=n[t];if(typeof e=="function")return e;e&&!Array.isArray(e)&&(n[t]=[e])},Ke=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},vs=(n,t)=>typeof n=="number"&&typeof t=="number"?n>t?1:n<t?-1:0:(n=at(n+"").toLowerCase(),t=at(t+"").toLowerCase(),n>t?1:t>n?-1:0);class bs{constructor(t,e){Ie(this,"items"),Ie(this,"settings"),this.items=t,this.settings=e||{diacritics:!0}}tokenize(t,e,i){if(!t||!t.length)return[];const s=[],a=t.split(/\s+/);var r;return i&&(r=new RegExp("^("+Object.keys(i).map($e).join("|")+"):(.*)$")),a.forEach(d=>{let h,p=null,m=null;r&&(h=d.match(r))&&(p=h[1],d=h[2]),d.length>0&&(this.settings.diacritics?m=ps(d)||null:m=$e(d),m&&e&&(m="\\b"+m)),s.push({string:d,regex:m?new RegExp(m,"iu"):null,field:p})}),s}getScoreFunction(t,e){var i=this.prepareSearch(t,e);return this._getScoreFunction(i)}_getScoreFunction(t){const e=t.tokens,i=e.length;if(!i)return function(){return 0};const s=t.options.fields,a=t.weights,r=s.length,d=t.getAttrFn;if(!r)return function(){return 1};const h=function(){return r===1?function(p,m){const b=s[0].field;return St(d(m,b),p,a[b]||1)}:function(p,m){var b=0;if(p.field){const C=d(m,p.field);!p.regex&&C?b+=1/r:b+=St(C,p,1)}else Ke(a,(C,T)=>{b+=St(d(m,T),p,C)});return b/r}}();return i===1?function(p){return h(e[0],p)}:t.options.conjunction==="and"?function(p){var m,b=0;for(let C of e){if(m=h(C,p),m<=0)return 0;b+=m}return b/i}:function(p){var m=0;return Ke(e,b=>{m+=h(b,p)}),m/i}}getSortFunction(t,e){var i=this.prepareSearch(t,e);return this._getSortFunction(i)}_getSortFunction(t){var e,i=[];const s=this,a=t.options,r=!t.query&&a.sort_empty?a.sort_empty:a.sort;if(typeof r=="function")return r.bind(this);const d=function(h,p){return h==="$score"?p.score:t.getAttrFn(s.items[p.id],h)};if(r)for(let h of r)(t.query||h.field!=="$score")&&i.push(h);if(t.query){e=!0;for(let h of i)if(h.field==="$score"){e=!1;break}e&&i.unshift({field:"$score",direction:"desc"})}else i=i.filter(h=>h.field!=="$score");return i.length?function(h,p){var m,b;for(let C of i)if(b=C.field,m=(C.direction==="desc"?-1:1)*vs(d(b,h),d(b,p)),m)return m;return 0}:null}prepareSearch(t,e){const i={};var s=Object.assign({},e);if(xt(s,"sort"),xt(s,"sort_empty"),s.fields){xt(s,"fields");const a=[];s.fields.forEach(r=>{typeof r=="string"&&(r={field:r,weight:1}),a.push(r),i[r.field]="weight"in r?r.weight:1}),s.fields=a}return{options:s,query:t.toLowerCase().trim(),tokens:this.tokenize(t,s.respect_word_boundaries,i),total:0,items:[],weights:i,getAttrFn:s.nesting?ms:gs}}search(t,e){var i=this,s,a;a=this.prepareSearch(t,e),e=a.options,t=a.query;const r=e.score||i._getScoreFunction(a);t.length?Ke(i.items,(h,p)=>{s=r(h),(e.filter===!1||s>0)&&a.items.push({score:s,id:p})}):Ke(i.items,(h,p)=>{a.items.push({score:1,id:p})});const d=i._getSortFunction(a);return d&&a.items.sort(d),a.total=a.items.length,typeof e.limit=="number"&&(a.items=a.items.slice(0,e.limit)),a}}const de=n=>typeof n>"u"||n===null?null:nt(n),nt=n=>typeof n=="boolean"?n?"1":"0":n+"",_t=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),ws=(n,t)=>t>0?window.setTimeout(n,t):(n.call(null),null),ys=(n,t)=>{var e;return function(i,s){var a=this;e&&(a.loading=Math.max(a.loading-1,0),clearTimeout(e)),e=setTimeout(function(){e=null,a.loadedSearches[i]=!0,n.call(a,i,s)},t)}},ln=(n,t,e)=>{var i,s=n.trigger,a={};n.trigger=function(){var r=arguments[0];if(t.indexOf(r)!==-1)a[r]=arguments;else return s.apply(n,arguments)},e.apply(n,[]),n.trigger=s;for(i of t)i in a&&s.apply(n,a[i])},Cs=n=>({start:n.selectionStart||0,length:(n.selectionEnd||0)-(n.selectionStart||0)}),U=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},X=(n,t,e,i)=>{n.addEventListener(t,e,i)},Se=(n,t)=>{if(!t||!t[n])return!1;var e=(t.altKey?1:0)+(t.ctrlKey?1:0)+(t.shiftKey?1:0)+(t.metaKey?1:0);return e===1},At=(n,t)=>n.getAttribute("id")||(n.setAttribute("id",t),t),cn=n=>n.replace(/[\\"']/g,"\\$&"),xe=(n,t)=>{t&&n.append(t)},G=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},ge=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Gn(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Gn=n=>typeof n=="string"&&n.indexOf("<")>-1,Os=n=>n.replace(/['"\\]/g,"\\$&"),Dt=(n,t)=>{var e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!1),n.dispatchEvent(e)},Ue=(n,t)=>{Object.assign(n.style,t)},re=(n,...t)=>{var e=Qn(t);n=Jn(n),n.map(i=>{e.map(s=>{i.classList.add(s)})})},we=(n,...t)=>{var e=Qn(t);n=Jn(n),n.map(i=>{e.map(s=>{i.classList.remove(s)})})},Qn=n=>{var t=[];return G(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},Jn=n=>(Array.isArray(n)||(n=[n]),n),Et=(n,t,e)=>{if(!(e&&!e.contains(n)))for(;n&&n.matches;){if(n.matches(t))return n;n=n.parentNode}},dn=(n,t=0)=>t>0?n[n.length-1]:n[0],Ss=n=>Object.keys(n).length===0,un=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e},Y=(n,t)=>{G(t,(e,i)=>{e==null?n.removeAttribute(i):n.setAttribute(i,""+e)})},Bt=(n,t)=>{n.parentNode&&n.parentNode.replaceChild(t,n)},xs=(n,t)=>{if(t===null)return;if(typeof t=="string"){if(!t.length)return;t=new RegExp(t,"i")}const e=a=>{var r=a.data.match(t);if(r&&a.data.length>0){var d=document.createElement("span");d.className="highlight";var h=a.splitText(r.index);h.splitText(r[0].length);var p=h.cloneNode(!0);return d.appendChild(p),Bt(h,d),1}return 0},i=a=>{a.nodeType===1&&a.childNodes&&!/(script|style)/i.test(a.tagName)&&(a.className!=="highlight"||a.tagName!=="SPAN")&&Array.from(a.childNodes).forEach(r=>{s(r)})},s=a=>a.nodeType===3?e(a):(i(a),0);s(n)},_s=n=>{var t=n.querySelectorAll("span.highlight");Array.prototype.forEach.call(t,function(e){var i=e.parentNode;i.replaceChild(e.firstChild,e),i.normalize()})},As=65,Ds=13,Es=27,ks=37,Ls=38,Is=39,Ms=40,hn=8,Ts=46,fn=9,Fs=typeof navigator>"u"?!1:/Mac/.test(navigator.userAgent),We=Fs?"metaKey":"ctrlKey",pn={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(n){return n.length>0},render:{}};function gn(n,t){var e=Object.assign({},pn,t),i=e.dataAttr,s=e.labelField,a=e.valueField,r=e.disabledField,d=e.optgroupField,h=e.optgroupLabelField,p=e.optgroupValueField,m=n.tagName.toLowerCase(),b=n.getAttribute("placeholder")||n.getAttribute("data-placeholder");if(!b&&!e.allowEmptyOption){let _=n.querySelector('option[value=""]');_&&(b=_.textContent)}var C={placeholder:b,options:[],optgroups:[],items:[],maxItems:null},T=()=>{var _,o=C.options,u={},l=1;let g=0;var S=y=>{var A=Object.assign({},y.dataset),x=i&&A[i];return typeof x=="string"&&x.length&&(A=Object.assign(A,JSON.parse(x))),A},E=(y,A)=>{var x=de(y.value);if(x!=null&&!(!x&&!e.allowEmptyOption)){if(u.hasOwnProperty(x)){if(A){var M=u[x][d];M?Array.isArray(M)?M.push(A):u[x][d]=[M,A]:u[x][d]=A}}else{var L=S(y);L[s]=L[s]||y.textContent,L[a]=L[a]||x,L[r]=L[r]||y.disabled,L[d]=L[d]||A,L.$option=y,L.$order=L.$order||++g,u[x]=L,o.push(L)}y.selected&&C.items.push(x)}},D=y=>{var A,x;x=S(y),x[h]=x[h]||y.getAttribute("label")||"",x[p]=x[p]||l++,x[r]=x[r]||y.disabled,x.$order=x.$order||++g,C.optgroups.push(x),A=x[p],G(y.children,M=>{E(M,A)})};C.maxItems=n.hasAttribute("multiple")?null:1,G(n.children,y=>{_=y.tagName.toLowerCase(),_==="optgroup"?D(y):_==="option"&&E(y)})},w=()=>{const _=n.getAttribute(i);if(_)C.options=JSON.parse(_),G(C.options,u=>{C.items.push(u[a])});else{var o=n.value.trim()||"";if(!e.allowEmptyOption&&!o.length)return;const u=o.split(e.delimiter);G(u,l=>{const g={};g[s]=l,g[a]=l,C.options.push(g)}),C.items=u}};return m==="select"?T():w(),Object.assign({},pn,C,t)}var mn=0;class te extends Xi(Ji){constructor(t,e){super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,mn++;var i,s=ge(t);if(s.tomselect)throw new Error("Tom Select already initialized on this element");s.tomselect=this;var a=window.getComputedStyle&&window.getComputedStyle(s,null);i=a.getPropertyValue("direction");const r=gn(s,e);this.settings=r,this.input=s,this.tabIndex=s.tabIndex||0,this.is_select_tag=s.tagName.toLowerCase()==="select",this.rtl=/rtl/i.test(i),this.inputId=At(s,"tomselect-"+mn),this.isRequired=s.required,this.sifter=new bs(this.options,{diacritics:r.diacritics}),r.mode=r.mode||(r.maxItems===1?"single":"multi"),typeof r.hideSelected!="boolean"&&(r.hideSelected=r.mode==="multi"),typeof r.hidePlaceholder!="boolean"&&(r.hidePlaceholder=r.mode!=="multi");var d=r.createFilter;typeof d!="function"&&(typeof d=="string"&&(d=new RegExp(d)),d instanceof RegExp?r.createFilter=o=>d.test(o):r.createFilter=o=>this.settings.duplicates||!this.options[o]),this.initializePlugins(r.plugins),this.setupCallbacks(),this.setupTemplates();const h=ge("<div>"),p=ge("<div>"),m=this._render("dropdown"),b=ge('<div role="listbox" tabindex="-1">'),C=this.input.getAttribute("class")||"",T=r.mode;var w;if(re(h,r.wrapperClass,C,T),re(p,r.controlClass),xe(h,p),re(m,r.dropdownClass,T),r.copyClassesToDropdown&&re(m,C),re(b,r.dropdownContentClass),xe(m,b),ge(r.dropdownParent||h).appendChild(m),Gn(r.controlInput)){w=ge(r.controlInput);var _=["autocorrect","autocapitalize","autocomplete","spellcheck"];G(_,o=>{s.getAttribute(o)&&Y(w,{[o]:s.getAttribute(o)})}),w.tabIndex=-1,p.appendChild(w),this.focus_node=w}else r.controlInput?(w=ge(r.controlInput),this.focus_node=w):(w=ge("<input/>"),this.focus_node=p);this.wrapper=h,this.dropdown=m,this.dropdown_content=b,this.control=p,this.control_input=w,this.setup()}setup(){const t=this,e=t.settings,i=t.control_input,s=t.dropdown,a=t.dropdown_content,r=t.wrapper,d=t.control,h=t.input,p=t.focus_node,m={passive:!0},b=t.inputId+"-ts-dropdown";Y(a,{id:b}),Y(p,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":b});const C=At(p,t.inputId+"-ts-control"),T="label[for='"+Os(t.inputId)+"']",w=document.querySelector(T),_=t.focus.bind(t);if(w){X(w,"click",_),Y(w,{for:C});const l=At(w,t.inputId+"-ts-label");Y(p,{"aria-labelledby":l}),Y(a,{"aria-labelledby":l})}if(r.style.width=h.style.width,t.plugins.names.length){const l="plugin-"+t.plugins.names.join(" plugin-");re([r,s],l)}(e.maxItems===null||e.maxItems>1)&&t.is_select_tag&&Y(h,{multiple:"multiple"}),e.placeholder&&Y(i,{placeholder:e.placeholder}),!e.splitOn&&e.delimiter&&(e.splitOn=new RegExp("\\s*"+$e(e.delimiter)+"+\\s*")),e.load&&e.loadThrottle&&(e.load=ys(e.load,e.loadThrottle)),X(s,"mousemove",()=>{t.ignoreHover=!1}),X(s,"mouseenter",l=>{var g=Et(l.target,"[data-selectable]",s);g&&t.onOptionHover(l,g)},{capture:!0}),X(s,"click",l=>{const g=Et(l.target,"[data-selectable]");g&&(t.onOptionSelect(l,g),U(l,!0))}),X(d,"click",l=>{var g=Et(l.target,"[data-ts-item]",d);if(g&&t.onItemSelect(l,g)){U(l,!0);return}i.value==""&&(t.onClick(),U(l,!0))}),X(p,"keydown",l=>t.onKeyDown(l)),X(i,"keypress",l=>t.onKeyPress(l)),X(i,"input",l=>t.onInput(l)),X(p,"blur",l=>t.onBlur(l)),X(p,"focus",l=>t.onFocus(l)),X(i,"paste",l=>t.onPaste(l));const o=l=>{const g=l.composedPath()[0];if(!r.contains(g)&&!s.contains(g)){t.isFocused&&t.blur(),t.inputState();return}g==i&&t.isOpen?l.stopPropagation():U(l,!0)},u=()=>{t.isOpen&&t.positionDropdown()};X(document,"mousedown",o),X(window,"scroll",u,m),X(window,"resize",u,m),this._destroy=()=>{document.removeEventListener("mousedown",o),window.removeEventListener("scroll",u),window.removeEventListener("resize",u),w&&w.removeEventListener("click",_)},this.revertSettings={innerHTML:h.innerHTML,tabIndex:h.tabIndex},h.tabIndex=-1,h.insertAdjacentElement("afterend",t.wrapper),t.sync(!1),e.items=[],delete e.optgroups,delete e.options,X(h,"invalid",()=>{t.isValid&&(t.isValid=!1,t.isInvalid=!0,t.refreshState())}),t.updateOriginalInput(),t.refreshItems(),t.close(!1),t.inputState(),t.isSetup=!0,h.disabled?t.disable():h.readOnly?t.setReadOnly(!0):t.enable(),t.on("change",this.onChange),re(h,"tomselected","ts-hidden-accessible"),t.trigger("initialize"),e.preload===!0&&t.preload()}setupOptions(t=[],e=[]){this.addOptions(t),G(e,i=>{this.registerOptionGroup(i)})}setupTemplates(){var t=this,e=t.settings.labelField,i=t.settings.optgroupLabelField,s={optgroup:a=>{let r=document.createElement("div");return r.className="optgroup",r.appendChild(a.options),r},optgroup_header:(a,r)=>'<div class="optgroup-header">'+r(a[i])+"</div>",option:(a,r)=>"<div>"+r(a[e])+"</div>",item:(a,r)=>"<div>"+r(a[e])+"</div>",option_create:(a,r)=>'<div class="create">Add <strong>'+r(a.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};t.settings.render=Object.assign({},s,t.settings.render)}setupCallbacks(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in i)e=this.settings[i[t]],e&&this.on(t,e)}sync(t=!0){const e=this,i=t?gn(e.input,{delimiter:e.settings.delimiter}):e.settings;e.setupOptions(i.options,i.optgroups),e.setValue(i.items||[],!0),e.lastQuery=null}onClick(){var t=this;if(t.activeItems.length>0){t.clearActiveItems(),t.focus();return}t.isFocused&&t.isOpen?t.blur():t.focus()}onMouseDown(){}onChange(){Dt(this.input,"input"),Dt(this.input,"change")}onPaste(t){var e=this;if(e.isInputHidden||e.isLocked){U(t);return}e.settings.splitOn&&setTimeout(()=>{var i=e.inputValue();if(i.match(e.settings.splitOn)){var s=i.trim().split(e.settings.splitOn);G(s,a=>{de(a)&&(this.options[a]?e.addItem(a):e.createItem(a))})}},0)}onKeyPress(t){var e=this;if(e.isLocked){U(t);return}var i=String.fromCharCode(t.keyCode||t.which);if(e.settings.create&&e.settings.mode==="multi"&&i===e.settings.delimiter){e.createItem(),U(t);return}}onKeyDown(t){var e=this;if(e.ignoreHover=!0,e.isLocked){t.keyCode!==fn&&U(t);return}switch(t.keyCode){case As:if(Se(We,t)&&e.control_input.value==""){U(t),e.selectAll();return}break;case Es:e.isOpen&&(U(t,!0),e.close()),e.clearActiveItems();return;case Ms:if(!e.isOpen&&e.hasOptions)e.open();else if(e.activeOption){let i=e.getAdjacent(e.activeOption,1);i&&e.setActiveOption(i)}U(t);return;case Ls:if(e.activeOption){let i=e.getAdjacent(e.activeOption,-1);i&&e.setActiveOption(i)}U(t);return;case Ds:e.canSelect(e.activeOption)?(e.onOptionSelect(t,e.activeOption),U(t)):(e.settings.create&&e.createItem()||document.activeElement==e.control_input&&e.isOpen)&&U(t);return;case ks:e.advanceSelection(-1,t);return;case Is:e.advanceSelection(1,t);return;case fn:e.settings.selectOnTab&&(e.canSelect(e.activeOption)&&(e.onOptionSelect(t,e.activeOption),U(t)),e.settings.create&&e.createItem()&&U(t));return;case hn:case Ts:e.deleteSelection(t);return}e.isInputHidden&&!Se(We,t)&&U(t)}onInput(t){if(this.isLocked)return;const e=this.inputValue();if(this.lastValue!==e){if(this.lastValue=e,e==""){this._onInput();return}this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=ws(()=>{this.refreshTimeout=null,this._onInput()},this.settings.refreshThrottle)}}_onInput(){const t=this.lastValue;this.settings.shouldLoad.call(this,t)&&this.load(t),this.refreshOptions(),this.trigger("type",t)}onOptionHover(t,e){this.ignoreHover||this.setActiveOption(e,!1)}onFocus(t){var e=this,i=e.isFocused;if(e.isDisabled||e.isReadOnly){e.blur(),U(t);return}e.ignoreFocus||(e.isFocused=!0,e.settings.preload==="focus"&&e.preload(),i||e.trigger("focus"),e.activeItems.length||(e.inputState(),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())}onBlur(t){if(document.hasFocus()!==!1){var e=this;if(e.isFocused){e.isFocused=!1,e.ignoreFocus=!1;var i=()=>{e.close(),e.setActiveItem(),e.setCaret(e.items.length),e.trigger("blur")};e.settings.create&&e.settings.createOnBlur?e.createItem(null,i):i()}}}onOptionSelect(t,e){var i,s=this;e.parentElement&&e.parentElement.matches("[data-disabled]")||(e.classList.contains("create")?s.createItem(null,()=>{s.settings.closeAfterSelect&&s.close()}):(i=e.dataset.value,typeof i<"u"&&(s.lastQuery=null,s.addItem(i),s.settings.closeAfterSelect&&s.close(),!s.settings.hideSelected&&t.type&&/click/.test(t.type)&&s.setActiveOption(e))))}canSelect(t){return!!(this.isOpen&&t&&this.dropdown_content.contains(t))}onItemSelect(t,e){var i=this;return!i.isLocked&&i.settings.mode==="multi"?(U(t),i.setActiveItem(e,t),!0):!1}canLoad(t){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(t))}load(t){const e=this;if(!e.canLoad(t))return;re(e.wrapper,e.settings.loadingClass),e.loading++;const i=e.loadCallback.bind(e);e.settings.load.call(e,t,i)}loadCallback(t,e){const i=this;i.loading=Math.max(i.loading-1,0),i.lastQuery=null,i.clearActiveOption(),i.setupOptions(t,e),i.refreshOptions(i.isFocused&&!i.isInputHidden),i.loading||we(i.wrapper,i.settings.loadingClass),i.trigger("load",t,e)}preload(){var t=this.wrapper.classList;t.contains("preloaded")||(t.add("preloaded"),this.load(""))}setTextboxValue(t=""){var e=this.control_input,i=e.value!==t;i&&(e.value=t,Dt(e,"update"),this.lastValue=t)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(t,e){var i=e?[]:["change"];ln(this,i,()=>{this.clear(e),this.addItems(t,e)})}setMaxItems(t){t===0&&(t=null),this.settings.maxItems=t,this.refreshState()}setActiveItem(t,e){var i=this,s,a,r,d,h,p;if(i.settings.mode!=="single"){if(!t){i.clearActiveItems(),i.isFocused&&i.inputState();return}if(s=e&&e.type.toLowerCase(),s==="click"&&Se("shiftKey",e)&&i.activeItems.length){for(p=i.getLastActive(),r=Array.prototype.indexOf.call(i.control.children,p),d=Array.prototype.indexOf.call(i.control.children,t),r>d&&(h=r,r=d,d=h),a=r;a<=d;a++)t=i.control.children[a],i.activeItems.indexOf(t)===-1&&i.setActiveItemClass(t);U(e)}else s==="click"&&Se(We,e)||s==="keydown"&&Se("shiftKey",e)?t.classList.contains("active")?i.removeActiveItem(t):i.setActiveItemClass(t):(i.clearActiveItems(),i.setActiveItemClass(t));i.inputState(),i.isFocused||i.focus()}}setActiveItemClass(t){const e=this,i=e.control.querySelector(".last-active");i&&we(i,"last-active"),re(t,"active last-active"),e.trigger("item_select",t),e.activeItems.indexOf(t)==-1&&e.activeItems.push(t)}removeActiveItem(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),we(t,"active")}clearActiveItems(){we(this.activeItems,"active"),this.activeItems=[]}setActiveOption(t,e=!0){t!==this.activeOption&&(this.clearActiveOption(),t&&(this.activeOption=t,Y(this.focus_node,{"aria-activedescendant":t.getAttribute("id")}),Y(t,{"aria-selected":"true"}),re(t,"active"),e&&this.scrollToOption(t)))}scrollToOption(t,e){if(!t)return;const i=this.dropdown_content,s=i.clientHeight,a=i.scrollTop||0,r=t.offsetHeight,d=t.getBoundingClientRect().top-i.getBoundingClientRect().top+a;d+r>s+a?this.scroll(d-s+r,e):d<a&&this.scroll(d,e)}scroll(t,e){const i=this.dropdown_content;e&&(i.style.scrollBehavior=e),i.scrollTop=t,i.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(we(this.activeOption,"active"),Y(this.activeOption,{"aria-selected":null})),this.activeOption=null,Y(this.focus_node,{"aria-activedescendant":null})}selectAll(){const t=this;if(t.settings.mode==="single")return;const e=t.controlChildren();e.length&&(t.inputState(),t.close(),t.activeItems=e,G(e,i=>{t.setActiveItemClass(i)}))}inputState(){var t=this;t.control.contains(t.control_input)&&(Y(t.control_input,{placeholder:t.settings.placeholder}),t.activeItems.length>0||!t.isFocused&&t.settings.hidePlaceholder&&t.items.length>0?(t.setTextboxValue(),t.isInputHidden=!0):(t.settings.hidePlaceholder&&t.items.length>0&&Y(t.control_input,{placeholder:""}),t.isInputHidden=!1),t.wrapper.classList.toggle("input-hidden",t.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var t=this;t.isDisabled||t.isReadOnly||(t.ignoreFocus=!0,t.control_input.offsetWidth?t.control_input.focus():t.focus_node.focus(),setTimeout(()=>{t.ignoreFocus=!1,t.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}getSearchOptions(){var t=this.settings,e=t.sortField;return typeof t.sortField=="string"&&(e=[{field:t.sortField}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}}search(t){var e,i,s=this,a=this.getSearchOptions();if(s.settings.score&&(i=s.settings.score.call(s,t),typeof i!="function"))throw new Error('Tom Select "score" setting must be a function that returns a function');return t!==s.lastQuery?(s.lastQuery=t,e=s.sifter.search(t,Object.assign(a,{score:i})),s.currentResults=e):e=Object.assign({},s.currentResults),s.settings.hideSelected&&(e.items=e.items.filter(r=>{let d=de(r.id);return!(d&&s.items.indexOf(d)!==-1)})),e}refreshOptions(t=!0){var e,i,s,a,r,d,h,p,m,b;const C={},T=[];var w=this,_=w.inputValue();const o=_===w.lastQuery||_==""&&w.lastQuery==null;var u=w.search(_),l=null,g=w.settings.shouldOpen||!1,S=w.dropdown_content;o&&(l=w.activeOption,l&&(m=l.closest("[data-group]"))),a=u.items.length,typeof w.settings.maxOptions=="number"&&(a=Math.min(a,w.settings.maxOptions)),a>0&&(g=!0);const E=(y,A)=>{let x=C[y];if(x!==void 0){let L=T[x];if(L!==void 0)return[x,L.fragment]}let M=document.createDocumentFragment();return x=T.length,T.push({fragment:M,order:A,optgroup:y}),[x,M]};for(e=0;e<a;e++){let y=u.items[e];if(!y)continue;let A=y.id,x=w.options[A];if(x===void 0)continue;let M=nt(A),L=w.getOption(M,!0);for(w.settings.hideSelected||L.classList.toggle("selected",w.items.includes(M)),r=x[w.settings.optgroupField]||"",d=Array.isArray(r)?r:[r],i=0,s=d&&d.length;i<s;i++){r=d[i];let R=x.$order,B=w.optgroups[r];B===void 0?r="":R=B.$order;const[he,fe]=E(r,R);i>0&&(L=L.cloneNode(!0),Y(L,{id:x.$id+"-clone-"+i,"aria-selected":null}),L.classList.add("ts-cloned"),we(L,"active"),w.activeOption&&w.activeOption.dataset.value==A&&m&&m.dataset.group===r.toString()&&(l=L)),fe.appendChild(L),r!=""&&(C[r]=he)}}w.settings.lockOptgroupOrder&&T.sort((y,A)=>y.order-A.order),h=document.createDocumentFragment(),G(T,y=>{let A=y.fragment,x=y.optgroup;if(!A||!A.children.length)return;let M=w.optgroups[x];if(M!==void 0){let L=document.createDocumentFragment(),R=w.render("optgroup_header",M);xe(L,R),xe(L,A);let B=w.render("optgroup",{group:M,options:L});xe(h,B)}else xe(h,A)}),S.innerHTML="",xe(S,h),w.settings.highlight&&(_s(S),u.query.length&&u.tokens.length&&G(u.tokens,y=>{xs(S,y.regex)}));var D=y=>{let A=w.render(y,{input:_});return A&&(g=!0,S.insertBefore(A,S.firstChild)),A};if(w.loading?D("loading"):w.settings.shouldLoad.call(w,_)?u.items.length===0&&D("no_results"):D("not_loading"),p=w.canCreate(_),p&&(b=D("option_create")),w.hasOptions=u.items.length>0||p,g){if(u.items.length>0){if(!l&&w.settings.mode==="single"&&w.items[0]!=null&&(l=w.getOption(w.items[0])),!S.contains(l)){let y=0;b&&!w.settings.addPrecedence&&(y=1),l=w.selectable()[y]}}else b&&(l=b);t&&!w.isOpen&&(w.open(),w.scrollToOption(l,"auto")),w.setActiveOption(l)}else w.clearActiveOption(),t&&w.isOpen&&w.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(t,e=!1){const i=this;if(Array.isArray(t))return i.addOptions(t,e),!1;const s=de(t[i.settings.valueField]);return s===null||i.options.hasOwnProperty(s)?!1:(t.$order=t.$order||++i.order,t.$id=i.inputId+"-opt-"+t.$order,i.options[s]=t,i.lastQuery=null,e&&(i.userOptions[s]=e,i.trigger("option_add",s,t)),s)}addOptions(t,e=!1){G(t,i=>{this.addOption(i,e)})}registerOption(t){return this.addOption(t)}registerOptionGroup(t){var e=de(t[this.settings.optgroupValueField]);return e===null?!1:(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)}addOptionGroup(t,e){var i;e[this.settings.optgroupValueField]=t,(i=this.registerOptionGroup(e))&&this.trigger("optgroup_add",i,e)}removeOptionGroup(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(t,e){const i=this;var s,a;const r=de(t),d=de(e[i.settings.valueField]);if(r===null)return;const h=i.options[r];if(h==null)return;if(typeof d!="string")throw new Error("Value must be set in option data");const p=i.getOption(r),m=i.getItem(r);if(e.$order=e.$order||h.$order,delete i.options[r],i.uncacheValue(d),i.options[d]=e,p){if(i.dropdown_content.contains(p)){const b=i._render("option",e);Bt(p,b),i.activeOption===p&&i.setActiveOption(b)}p.remove()}m&&(a=i.items.indexOf(r),a!==-1&&i.items.splice(a,1,d),s=i._render("item",e),m.classList.contains("active")&&re(s,"active"),Bt(m,s)),i.lastQuery=null}removeOption(t,e){const i=this;t=nt(t),i.uncacheValue(t),delete i.userOptions[t],delete i.options[t],i.lastQuery=null,i.trigger("option_remove",t),i.removeItem(t,e)}clearOptions(t){const e=(t||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();const i={};G(this.options,(s,a)=>{e(s,a)&&(i[a]=s)}),this.options=this.sifter.items=i,this.lastQuery=null,this.trigger("option_clear")}clearFilter(t,e){return this.items.indexOf(e)>=0}getOption(t,e=!1){const i=de(t);if(i===null)return null;const s=this.options[i];if(s!=null){if(s.$div)return s.$div;if(e)return this._render("option",s)}return null}getAdjacent(t,e,i="option"){var s=this,a;if(!t)return null;i=="item"?a=s.controlChildren():a=s.dropdown_content.querySelectorAll("[data-selectable]");for(let r=0;r<a.length;r++)if(a[r]==t)return e>0?a[r+1]:a[r-1];return null}getItem(t){if(typeof t=="object")return t;var e=de(t);return e!==null?this.control.querySelector(`[data-value="${cn(e)}"]`):null}addItems(t,e){var i=this,s=Array.isArray(t)?t:[t];s=s.filter(r=>i.items.indexOf(r)===-1);const a=s[s.length-1];s.forEach(r=>{i.isPending=r!==a,i.addItem(r,e)})}addItem(t,e){var i=e?[]:["change","dropdown_close"];ln(this,i,()=>{var s,a;const r=this,d=r.settings.mode,h=de(t);if(!(h&&r.items.indexOf(h)!==-1&&(d==="single"&&r.close(),d==="single"||!r.settings.duplicates))&&!(h===null||!r.options.hasOwnProperty(h))&&(d==="single"&&r.clear(e),!(d==="multi"&&r.isFull()))){if(s=r._render("item",r.options[h]),r.control.contains(s)&&(s=s.cloneNode(!0)),a=r.isFull(),r.items.splice(r.caretPos,0,h),r.insertAtCaret(s),r.isSetup){if(!r.isPending&&r.settings.hideSelected){let p=r.getOption(h),m=r.getAdjacent(p,1);m&&r.setActiveOption(m)}!r.isPending&&!r.settings.closeAfterSelect&&r.refreshOptions(r.isFocused&&d!=="single"),r.settings.closeAfterSelect!=!1&&r.isFull()?r.close():r.isPending||r.positionDropdown(),r.trigger("item_add",h,s),r.isPending||r.updateOriginalInput({silent:e})}(!r.isPending||!a&&r.isFull())&&(r.inputState(),r.refreshState())}})}removeItem(t=null,e){const i=this;if(t=i.getItem(t),!t)return;var s,a;const r=t.dataset.value;s=un(t),t.remove(),t.classList.contains("active")&&(a=i.activeItems.indexOf(t),i.activeItems.splice(a,1),we(t,"active")),i.items.splice(s,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(r)&&i.removeOption(r,e),s<i.caretPos&&i.setCaret(i.caretPos-1),i.updateOriginalInput({silent:e}),i.refreshState(),i.positionDropdown(),i.trigger("item_remove",r,t)}createItem(t=null,e=()=>{}){arguments.length===3&&(e=arguments[2]),typeof e!="function"&&(e=()=>{});var i=this,s=i.caretPos,a;if(t=t||i.inputValue(),!i.canCreate(t))return e(),!1;i.lock();var r=!1,d=h=>{if(i.unlock(),!h||typeof h!="object")return e();var p=de(h[i.settings.valueField]);if(typeof p!="string")return e();i.setTextboxValue(),i.addOption(h,!0),i.setCaret(s),i.addItem(p),e(h),r=!0};return typeof i.settings.create=="function"?a=i.settings.create.call(this,t,d):a={[i.settings.labelField]:t,[i.settings.valueField]:t},r||d(a),!0}refreshItems(){var t=this;t.lastQuery=null,t.isSetup&&t.addItems(t.items),t.updateOriginalInput(),t.refreshState()}refreshState(){const t=this;t.refreshValidityState();const e=t.isFull(),i=t.isLocked;t.wrapper.classList.toggle("rtl",t.rtl);const s=t.wrapper.classList;s.toggle("focus",t.isFocused),s.toggle("disabled",t.isDisabled),s.toggle("readonly",t.isReadOnly),s.toggle("required",t.isRequired),s.toggle("invalid",!t.isValid),s.toggle("locked",i),s.toggle("full",e),s.toggle("input-active",t.isFocused&&!t.isInputHidden),s.toggle("dropdown-active",t.isOpen),s.toggle("has-options",Ss(t.options)),s.toggle("has-items",t.items.length>0)}refreshValidityState(){var t=this;t.input.validity&&(t.isValid=t.input.validity.valid,t.isInvalid=!t.isValid)}isFull(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems}updateOriginalInput(t={}){const e=this;var i,s;const a=e.input.querySelector('option[value=""]');if(e.is_select_tag){let r=function(p,m,b){return p||(p=ge('<option value="'+_t(m)+'">'+_t(b)+"</option>")),p!=a&&e.input.append(p),d.push(p),(p!=a||h>0)&&(p.selected=!0),p};const d=[],h=e.input.querySelectorAll("option:checked").length;e.input.querySelectorAll("option:checked").forEach(p=>{p.selected=!1}),e.items.length==0&&e.settings.mode=="single"?r(a,"",""):e.items.forEach(p=>{if(i=e.options[p],s=i[e.settings.labelField]||"",d.includes(i.$option)){const m=e.input.querySelector(`option[value="${cn(p)}"]:not(:checked)`);r(m,p,s)}else i.$option=r(i.$option,p,s)})}else e.input.value=e.getValue();e.isSetup&&(t.silent||e.trigger("change",e.getValue()))}open(){var t=this;t.isLocked||t.isOpen||t.settings.mode==="multi"&&t.isFull()||(t.isOpen=!0,Y(t.focus_node,{"aria-expanded":"true"}),t.refreshState(),Ue(t.dropdown,{visibility:"hidden",display:"block"}),t.positionDropdown(),Ue(t.dropdown,{visibility:"visible",display:"block"}),t.focus(),t.trigger("dropdown_open",t.dropdown))}close(t=!0){var e=this,i=e.isOpen;t&&(e.setTextboxValue(),e.settings.mode==="single"&&e.items.length&&e.inputState()),e.isOpen=!1,Y(e.focus_node,{"aria-expanded":"false"}),Ue(e.dropdown,{display:"none"}),e.settings.hideSelected&&e.clearActiveOption(),e.refreshState(),i&&e.trigger("dropdown_close",e.dropdown)}positionDropdown(){if(this.settings.dropdownParent==="body"){var t=this.control,e=t.getBoundingClientRect(),i=t.offsetHeight+e.top+window.scrollY,s=e.left+window.scrollX;Ue(this.dropdown,{width:e.width+"px",top:i+"px",left:s+"px"})}}clear(t){var e=this;if(e.items.length){var i=e.controlChildren();G(i,s=>{e.removeItem(s,!0)}),e.inputState(),t||e.updateOriginalInput(),e.trigger("clear")}}insertAtCaret(t){const e=this,i=e.caretPos,s=e.control;s.insertBefore(t,s.children[i]||null),e.setCaret(i+1)}deleteSelection(t){var e,i,s,a,r=this;e=t&&t.keyCode===hn?-1:1,i=Cs(r.control_input);const d=[];if(r.activeItems.length)a=dn(r.activeItems,e),s=un(a),e>0&&s++,G(r.activeItems,h=>d.push(h));else if((r.isFocused||r.settings.mode==="single")&&r.items.length){const h=r.controlChildren();let p;e<0&&i.start===0&&i.length===0?p=h[r.caretPos-1]:e>0&&i.start===r.inputValue().length&&(p=h[r.caretPos]),p!==void 0&&d.push(p)}if(!r.shouldDelete(d,t))return!1;for(U(t,!0),typeof s<"u"&&r.setCaret(s);d.length;)r.removeItem(d.pop());return r.inputState(),r.positionDropdown(),r.refreshOptions(!1),!0}shouldDelete(t,e){const i=t.map(s=>s.dataset.value);return!(!i.length||typeof this.settings.onDelete=="function"&&this.settings.onDelete(i,e)===!1)}advanceSelection(t,e){var i,s,a=this;a.rtl&&(t*=-1),!a.inputValue().length&&(Se(We,e)||Se("shiftKey",e)?(i=a.getLastActive(t),i?i.classList.contains("active")?s=a.getAdjacent(i,t,"item"):s=i:t>0?s=a.control_input.nextElementSibling:s=a.control_input.previousElementSibling,s&&(s.classList.contains("active")&&a.removeActiveItem(i),a.setActiveItemClass(s))):a.moveCaret(t))}moveCaret(t){}getLastActive(t){let e=this.control.querySelector(".last-active");if(e)return e;var i=this.control.querySelectorAll(".active");if(i)return dn(i,t)}setCaret(t){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(t=this.isReadOnly||this.isDisabled){this.isLocked=t,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(t){this.focus_node.tabIndex=t?-1:this.tabIndex,this.isDisabled=t,this.input.disabled=t,this.control_input.disabled=t,this.setLocked()}setReadOnly(t){this.isReadOnly=t,this.input.readOnly=t,this.control_input.readOnly=t,this.setLocked()}destroy(){var t=this,e=t.revertSettings;t.trigger("destroy"),t.off(),t.wrapper.remove(),t.dropdown.remove(),t.input.innerHTML=e.innerHTML,t.input.tabIndex=e.tabIndex,we(t.input,"tomselected","ts-hidden-accessible"),t._destroy(),delete t.input.tomselect}render(t,e){var i,s;const a=this;if(typeof this.settings.render[t]!="function"||(s=a.settings.render[t].call(this,e,_t),!s))return null;if(s=ge(s),t==="option"||t==="option_create"?e[a.settings.disabledField]?Y(s,{"aria-disabled":"true"}):Y(s,{"data-selectable":""}):t==="optgroup"&&(i=e.group[a.settings.optgroupValueField],Y(s,{"data-group":i}),e.group[a.settings.disabledField]&&Y(s,{"data-disabled":""})),t==="option"||t==="item"){const r=nt(e[a.settings.valueField]);Y(s,{"data-value":r}),t==="item"?(re(s,a.settings.itemClass),Y(s,{"data-ts-item":""})):(re(s,a.settings.optionClass),Y(s,{role:"option",id:e.$id}),e.$div=s,a.options[r]=e)}return s}_render(t,e){const i=this.render(t,e);if(i==null)throw"HTMLElement expected";return i}clearCache(){G(this.options,t=>{t.$div&&(t.$div.remove(),delete t.$div)})}uncacheValue(t){const e=this.getOption(t);e&&e.remove()}canCreate(t){return this.settings.create&&t.length>0&&this.settings.createFilter.call(this,t)}hook(t,e,i){var s=this,a=s[e];s[e]=function(){var r,d;return t==="after"&&(r=a.apply(s,arguments)),d=i.apply(s,arguments),t==="instead"?d:(t==="before"&&(r=a.apply(s,arguments)),r)}}}const Ps=(n,t,e,i)=>{n.addEventListener(t,e,i)};function Ns(){Ps(this.input,"change",()=>{this.sync()})}const $s=n=>typeof n>"u"||n===null?null:Hs(n),Hs=n=>typeof n=="boolean"?n?"1":"0":n+"",vn=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},js=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Vs(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Vs=n=>typeof n=="string"&&n.indexOf("<")>-1;function Rs(n){var t=this,e=t.onOptionSelect;t.settings.hideSelected=!1;const i=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},n);var s=function(r,d){d?(r.checked=!0,i.uncheckedClassNames&&r.classList.remove(...i.uncheckedClassNames),i.checkedClassNames&&r.classList.add(...i.checkedClassNames)):(r.checked=!1,i.checkedClassNames&&r.classList.remove(...i.checkedClassNames),i.uncheckedClassNames&&r.classList.add(...i.uncheckedClassNames))},a=function(r){setTimeout(()=>{var d=r.querySelector("input."+i.className);d instanceof HTMLInputElement&&s(d,r.classList.contains("selected"))},1)};t.hook("after","setupTemplates",()=>{var r=t.settings.render.option;t.settings.render.option=(d,h)=>{var p=js(r.call(t,d,h)),m=document.createElement("input");i.className&&m.classList.add(i.className),m.addEventListener("click",function(C){vn(C)}),m.type="checkbox";const b=$s(d[t.settings.valueField]);return s(m,!!(b&&t.items.indexOf(b)>-1)),p.prepend(m),p}}),t.on("item_remove",r=>{var d=t.getOption(r);d&&(d.classList.remove("selected"),a(d))}),t.on("item_add",r=>{var d=t.getOption(r);d&&a(d)}),t.hook("instead","onOptionSelect",(r,d)=>{if(d.classList.contains("selected")){d.classList.remove("selected"),t.removeItem(d.dataset.value),t.refreshOptions(),vn(r,!0);return}e.call(t,r,d),a(d)})}const Bs=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Ys(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Ys=n=>typeof n=="string"&&n.indexOf("<")>-1;function qs(n){const t=this,e=Object.assign({className:"clear-button",title:"Clear All",html:i=>`<div class="${i.className}" title="${i.title}">&#10799;</div>`},n);t.on("initialize",()=>{var i=Bs(e.html(e));i.addEventListener("click",s=>{t.isLocked||(t.clear(),t.settings.mode==="single"&&t.settings.allowEmptyOption&&t.addItem(""),s.preventDefault(),s.stopPropagation())}),t.control.appendChild(i)})}const zs=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},ke=(n,t,e,i)=>{n.addEventListener(t,e,i)},Ks=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Us=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Ws(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Ws=n=>typeof n=="string"&&n.indexOf("<")>-1,Gs=(n,t)=>{Ks(t,(e,i)=>{e==null?n.removeAttribute(i):n.setAttribute(i,""+e)})},Qs=(n,t)=>{var e;(e=n.parentNode)==null||e.insertBefore(t,n.nextSibling)},Js=(n,t)=>{var e;(e=n.parentNode)==null||e.insertBefore(t,n)},Xs=(n,t)=>{do{var e;if(t=(e=t)==null?void 0:e.previousElementSibling,n==t)return!0}while(t&&t.previousElementSibling);return!1};function Zs(){var n=this;if(n.settings.mode!=="multi")return;var t=n.lock,e=n.unlock;let i=!0,s;n.hook("after","setupTemplates",()=>{var a=n.settings.render.item;n.settings.render.item=(r,d)=>{const h=Us(a.call(n,r,d));Gs(h,{draggable:"true"});const p=_=>{i||zs(_),_.stopPropagation()},m=_=>{s=h,setTimeout(()=>{h.classList.add("ts-dragging")},0)},b=_=>{_.preventDefault(),h.classList.add("ts-drag-over"),T(h,s)},C=()=>{h.classList.remove("ts-drag-over")},T=(_,o)=>{o!==void 0&&(Xs(o,h)?Qs(_,o):Js(_,o))},w=()=>{var _;document.querySelectorAll(".ts-drag-over").forEach(u=>u.classList.remove("ts-drag-over")),(_=s)==null||_.classList.remove("ts-dragging"),s=void 0;var o=[];n.control.querySelectorAll("[data-value]").forEach(u=>{if(u.dataset.value){let l=u.dataset.value;l&&o.push(l)}}),n.setValue(o)};return ke(h,"mousedown",p),ke(h,"dragstart",m),ke(h,"dragenter",b),ke(h,"dragover",b),ke(h,"dragleave",C),ke(h,"dragend",w),h}}),n.hook("instead","lock",()=>(i=!1,t.call(n))),n.hook("instead","unlock",()=>(i=!0,e.call(n)))}const er=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},tr=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(nr(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},nr=n=>typeof n=="string"&&n.indexOf("<")>-1;function ir(n){const t=this,e=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:i=>'<div class="'+i.headerClass+'"><div class="'+i.titleRowClass+'"><span class="'+i.labelClass+'">'+i.title+'</span><a class="'+i.closeClass+'">&times;</a></div></div>'},n);t.on("initialize",()=>{var i=tr(e.html(e)),s=i.querySelector("."+e.closeClass);s&&s.addEventListener("click",a=>{er(a,!0),t.close()}),t.dropdown.insertBefore(i,t.dropdown.firstChild)})}const sr=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},rr=(n,...t)=>{var e=ar(t);n=or(n),n.map(i=>{e.map(s=>{i.classList.remove(s)})})},ar=n=>{var t=[];return sr(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},or=n=>(Array.isArray(n)||(n=[n]),n),lr=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e};function cr(){var n=this;n.hook("instead","setCaret",t=>{n.settings.mode==="single"||!n.control.contains(n.control_input)?t=n.items.length:(t=Math.max(0,Math.min(n.items.length,t)),t!=n.caretPos&&!n.isPending&&n.controlChildren().forEach((e,i)=>{i<t?n.control_input.insertAdjacentElement("beforebegin",e):n.control.appendChild(e)})),n.caretPos=t}),n.hook("instead","moveCaret",t=>{if(!n.isFocused)return;const e=n.getLastActive(t);if(e){const i=lr(e);n.setCaret(t>0?i+1:i),n.setActiveItem(),rr(e,"last-active")}else n.setCaret(n.caretPos+t)})}const dr=27,ur=9,hr=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},fr=(n,t,e,i)=>{n.addEventListener(t,e,i)},pr=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},bn=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(gr(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},gr=n=>typeof n=="string"&&n.indexOf("<")>-1,mr=(n,...t)=>{var e=vr(t);n=br(n),n.map(i=>{e.map(s=>{i.classList.add(s)})})},vr=n=>{var t=[];return pr(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},br=n=>(Array.isArray(n)||(n=[n]),n);function wr(){const n=this;n.settings.shouldOpen=!0,n.hook("before","setup",()=>{n.focus_node=n.control,mr(n.control_input,"dropdown-input");const t=bn('<div class="dropdown-input-wrap">');t.append(n.control_input),n.dropdown.insertBefore(t,n.dropdown.firstChild);const e=bn('<input class="items-placeholder" tabindex="-1" />');e.placeholder=n.settings.placeholder||"",n.control.append(e)}),n.on("initialize",()=>{n.control_input.addEventListener("keydown",e=>{switch(e.keyCode){case dr:n.isOpen&&(hr(e,!0),n.close()),n.clearActiveItems();return;case ur:n.focus_node.tabIndex=-1;break}return n.onKeyDown.call(n,e)}),n.on("blur",()=>{n.focus_node.tabIndex=n.isDisabled?-1:n.tabIndex}),n.on("dropdown_open",()=>{n.control_input.focus()});const t=n.onBlur;n.hook("instead","onBlur",e=>{if(!(e&&e.relatedTarget==n.control_input))return t.call(n)}),fr(n.control_input,"blur",()=>n.onBlur()),n.hook("before","close",()=>{n.isOpen&&n.focus_node.focus({preventScroll:!0})})})}const Ge=(n,t,e,i)=>{n.addEventListener(t,e,i)};function yr(){var n=this;n.on("initialize",()=>{var t=document.createElement("span"),e=n.control_input;t.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",n.wrapper.appendChild(t);var i=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(const a of i)t.style[a]=e.style[a];var s=()=>{t.textContent=e.value,e.style.width=t.clientWidth+"px"};s(),n.on("update item_add item_remove",s),Ge(e,"input",s),Ge(e,"keyup",s),Ge(e,"blur",s),Ge(e,"update",s)})}function Cr(){var n=this,t=n.deleteSelection;this.hook("instead","deleteSelection",e=>n.activeItems.length?t.call(n,e):!1)}function Or(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}const wn=37,Sr=39,xr=(n,t,e)=>{for(;n&&n.matches;){if(n.matches(t))return n;n=n.parentNode}},_r=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e};function Ar(){var n=this,t=n.onKeyDown;n.hook("instead","onKeyDown",e=>{var i,s,a,r;if(!n.isOpen||!(e.keyCode===wn||e.keyCode===Sr))return t.call(n,e);n.ignoreHover=!0,r=xr(n.activeOption,"[data-group]"),i=_r(n.activeOption,"[data-selectable]"),r&&(e.keyCode===wn?r=r.previousSibling:r=r.nextSibling,r&&(a=r.querySelectorAll("[data-selectable]"),s=a[Math.min(a.length-1,i)],s&&n.setActiveOption(s)))})}const Dr=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),yn=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Cn=(n,t,e,i)=>{n.addEventListener(t,e,i)},On=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Er(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Er=n=>typeof n=="string"&&n.indexOf("<")>-1;function kr(n){const t=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},n);var e=this;if(t.append){var i='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+Dr(t.title)+'">'+t.label+"</a>";e.hook("after","setupTemplates",()=>{var s=e.settings.render.item;e.settings.render.item=(a,r)=>{var d=On(s.call(e,a,r)),h=On(i);return d.appendChild(h),Cn(h,"mousedown",p=>{yn(p,!0)}),Cn(h,"click",p=>{e.isLocked||(yn(p,!0),!e.isLocked&&e.shouldDelete([d],p)&&(e.removeItem(d),e.refreshOptions(!1),e.inputState()))}),d}})}}function Lr(n){const t=this,e=Object.assign({text:i=>i[t.settings.labelField]},n);t.on("item_remove",function(i){if(t.isFocused&&t.control_input.value.trim()===""){var s=t.options[i];s&&t.setTextboxValue(e.text.call(t,s))}})}const Ir=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Mr=(n,...t)=>{var e=Tr(t);n=Fr(n),n.map(i=>{e.map(s=>{i.classList.add(s)})})},Tr=n=>{var t=[];return Ir(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},Fr=n=>(Array.isArray(n)||(n=[n]),n);function Pr(){const n=this,t=n.canLoad,e=n.clearActiveOption,i=n.loadCallback;var s={},a,r=!1,d,h=[];if(n.settings.shouldLoadMore||(n.settings.shouldLoadMore=()=>{if(a.clientHeight/(a.scrollHeight-a.scrollTop)>.9)return!0;if(n.activeOption){var b=n.selectable(),C=Array.from(b).indexOf(n.activeOption);if(C>=b.length-2)return!0}return!1}),!n.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";n.settings.sortField=[{field:"$order"},{field:"$score"}];const p=b=>typeof n.settings.maxOptions=="number"&&a.children.length>=n.settings.maxOptions?!1:!!(b in s&&s[b]),m=(b,C)=>n.items.indexOf(C)>=0||h.indexOf(C)>=0;n.setNextUrl=(b,C)=>{s[b]=C},n.getUrl=b=>{if(b in s){const C=s[b];return s[b]=!1,C}return n.clearPagination(),n.settings.firstUrl.call(n,b)},n.clearPagination=()=>{s={}},n.hook("instead","clearActiveOption",()=>{if(!r)return e.call(n)}),n.hook("instead","canLoad",b=>b in s?p(b):t.call(n,b)),n.hook("instead","loadCallback",(b,C)=>{if(!r)n.clearOptions(m);else if(d){const T=b[0];T!==void 0&&(d.dataset.value=T[n.settings.valueField])}i.call(n,b,C),r=!1}),n.hook("after","refreshOptions",()=>{const b=n.lastValue;var C;p(b)?(C=n.render("loading_more",{query:b}),C&&(C.setAttribute("data-selectable",""),d=C)):b in s&&!a.querySelector(".no-results")&&(C=n.render("no_more_results",{query:b})),C&&(Mr(C,n.settings.optionClass),a.append(C))}),n.on("initialize",()=>{h=Object.keys(n.options),a=n.dropdown_content,n.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},n.settings.render),a.addEventListener("scroll",()=>{n.settings.shouldLoadMore.call(n)&&p(n.lastValue)&&(r||(r=!0,n.load.call(n,n.lastValue)))})})}te.define("change_listener",Ns);te.define("checkbox_options",Rs);te.define("clear_button",qs);te.define("drag_drop",Zs);te.define("dropdown_header",ir);te.define("caret_position",cr);te.define("dropdown_input",wr);te.define("input_autogrow",yr);te.define("no_backspace_delete",Cr);te.define("no_active_items",Or);te.define("optgroup_columns",Ar);te.define("remove_button",kr);te.define("restore_on_backspace",Lr);te.define("virtual_scroll",Pr);const Nr=n=>({init(){const t=this.$refs[`select_picker_${n.dataField}_${n.tableName}`],e={items:n.initialValues,...n.framework,onChange:a=>{qn(n,a)},onInitialize:()=>{window.addEventListener(`pg:clear_multi_select::${n.tableName}:${n.dataField}`,()=>{t&&t.tomselect.clear(!0)}),window.addEventListener(`pg:clear_all_multi_select::${n.tableName}`,()=>{t&&t.tomselect.clear(!0)})}},i={valueField:n.optionValue,labelField:n.optionLabel,searchField:n.optionLabel,load:async function(a,r){function d(h,p){var m;const{method:b,url:C}=h,T=new Request(C,{method:b,body:b.toLowerCase()==="post"?JSON.stringify({search:p,...s}):void 0});T.headers.set("Content-Type","application/json"),T.headers.set("Accept","application/json"),T.headers.set("X-Requested-With","XMLHttpRequest");const w=(m=document.head.querySelector('[name="csrf-token"]'))==null?void 0:m.getAttribute("content");return w&&T.headers.set("X-CSRF-TOKEN",w),T}fetch(d(n.asyncData,a)).then(h=>h.json()).then(h=>{r(h)}).catch(()=>{r()})},render:{option:function(a,r){return`<div class="py-2 mb-1"><span>${r(a[n.optionLabel])}</span></div>`},item:function(a,r){return`<div class="py-2 mb-1"><span>${r(a[n.optionLabel])}</span></div>`}}};let s=e;n.hasOwnProperty("asyncData")&&(s=Object.assign(e,i)),new te(t,s)}}),$r=n=>({initialValues:n.initialValues,framework:n.framework,init(){const t=this.$refs["select_picker_"+n.dataField+"_"+n.tableName],e=this.deepCopy(this.framework);new window.SlimSelect({select:t,...e,events:{afterChange:i=>{let s=i.map(a=>a.value);qn(n,s)}}})},deepCopy(t){if(t===null||typeof t!="object")return t;if(Array.isArray(t))return t.map(this.deepCopy);const e={};for(const i in t)t.hasOwnProperty(i)&&(e[i]=this.deepCopy(t[i]));return e}}),Hr=()=>({init(){Livewire.on("pg:scrollTop",n=>{setTimeout(()=>{document.querySelector("body").scrollIntoView({behavior:"auto"})},0)}),new IntersectionObserver(n=>{n[0].isIntersecting&&this.$wire.call("loadMore")},{rootMargin:"300px"}).observe(this.$el)}}),jr=n=>({rowId:(n==null?void 0:n.rowId)??null,parentId:(n==null?void 0:n.parentId)??null,toHtml(){let t=null;const e=this.parentId??this.$wire.id;if(this.rowId){const s=window[`pgActions_${e}`];s&&s[this.rowId]!==void 0&&(t=s[this.rowId])}else t=window[`pgActionsHeader_${e}`];if(typeof t!="object"||t===null)return"";let i="";return t.forEach(s=>{let a=this.shouldHideAction(s),r=this.getReplaceHtml(s);if(!a)if(r)i+=r;else{let d=this.buildAttributesString(s);if(s.icon){let h=this.processIcon(s);if(!h)return;i+=this.buildActionHtmlWithIcon(s,d,h)}else i+=this.buildActionHtml(s,d)}}),i},shouldHideAction(t){if(t.can===!1)return!0;let e=!1;return t.rules&&Object.values(t.rules).length>0&&Object.values(t.rules).forEach(i=>{i.action.includes(t.action)&&i.apply&&i.rule.hide&&(e=!0)}),e},getReplaceHtml(t){let e=null;return t.rules&&Object.values(t.rules).length>0&&Object.values(t.rules).forEach(i=>{i.apply&&i.action.includes(t.action)&&i.replaceHtml&&(e=i.replaceHtml)}),e},buildAttributesString(t){let e=t.attributes??[];return t.rules&&Object.values(t.rules).length>0&&Object.values(t.rules).forEach(i=>{i.apply&&i.action.includes(t.action)&&i.rule.setAttribute&&i.rule.setAttribute.length>0&&Object.values(i.rule.setAttribute).forEach(s=>{e[s.attribute]=s.value})}),Object.entries(e).map(([i,s])=>` ${i}="${s}"`).join("")},processIcon(t){const e=Object.entries(t.iconAttributes??[]).map(([s,a])=>` ${s}="${a}"`).join("");let i=window.pgResourceIcons[t.icon];return typeof i>"u"?(console.warn(`PowerGrid: Unable to load icons in javascript window in row: [${this.rowId}]`),null):this.replaceIconAttributes(i,e)},replaceIconAttributes(t,e){return t.replace(/<([^\s>]+)([^>]*)>/,(i,s,a)=>{let r=a.trim();const d=e.replace(/class="([^"]*)"/,(h,p)=>(r.includes("class=")?r=r.replace(/class="([^"]*)"/,(m,b)=>`class="${b} ${p.trim()}"`):r+=` ${h}`,""));return`<${s} ${r} ${d}>`})},buildActionHtmlWithIcon(t,e,i){return t.slot?`<${t.tag??"button"} ${e}>${i} ${t.slot}</${t.tag??"button"}>`:`<${t.tag??"button"} ${e}>${i}</${t.tag??"button"}>`},buildActionHtml(t,e){return`<${t.tag??"button"} ${e}>${t.slot}</${t.tag??"button"}>`}}),Vr=n=>({templateContent:(n==null?void 0:n.templateContent)??null,rendered:null,parentId:(n==null?void 0:n.parentId)??null,init(){const t=Object.keys(this.templateContent)[0],e=window[`pgRowTemplates_${this.parentId??this.$wire.id}`][t],i=this.templateContent[t];if(i){let s=e;for(const[a,r]of Object.entries(i)){const d=`{{ ${a} }}`,h=String(r).replace(/'/g,"\\'");s=s.replaceAll(d,h)}this.rendered=s}}}),Rr=n=>({rowId:n.rowId,rules:n.rules,defaultClasses:n.defaultClasses,attributes:[],theme:[],init(){this.rules&&Object.values(this.rules).forEach(t=>{(t.applyLoop||t.apply)&&t!=null&&t.attributes&&this.attributes.push(t.attributes)})},getAttributes(){let t={class:this.defaultClasses};return this.attributes.forEach(e=>{Object.keys(e).forEach(i=>{t[i]+=t[i]?` ${e[i]}`:e[i]})}),t}});window.pgToggleable=ji;window.pgFlatpickr=Ri;window.pgEditable=Bi;window.pgResponsive=Gi;window.pgTomSelect=Nr;window.pgSlimSelect=$r;window.pgLoadMore=Hr;window.pgRenderActions=jr;window.pgRowAttributes=Rr;window.pgRenderRowTemplate=Vr;document.addEventListener("DOMContentLoaded",()=>{Livewire.hook("commit",({component:n,succeed:t,fail:e})=>{n.ephemeral.setUp&&n.ephemeral.setUp.hasOwnProperty("responsive")&&(t(()=>{queueMicrotask(()=>{window.dispatchEvent(new CustomEvent("pg-livewire-request-finished"))})}),e(()=>{window.dispatchEvent(new CustomEvent("pg-livewire-request-finished"))}))})});document.addEventListener("DOMContentLoaded",()=>{window.Alpine.directive("multisort-shift-click",(n,{expression:t})=>{n.addEventListener("click",e=>{window.Livewire.find(t).set("multiSort",e.shiftKey)})})});var kt=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Me={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var t=new Date(n.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},He={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var t=n%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},ie=function(n,t){return t===void 0&&(t=2),("000"+n).slice(t*-1)},ce=function(n){return n===!0?1:0};function Sn(n,t){var e;return function(){var i=this,s=arguments;clearTimeout(e),e=setTimeout(function(){return n.apply(i,s)},t)}}var Lt=function(n){return n instanceof Array?n:[n]};function Z(n,t,e){if(e===!0)return n.classList.add(t);n.classList.remove(t)}function j(n,t,e){var i=window.document.createElement(n);return t=t||"",e=e||"",i.className=t,e!==void 0&&(i.textContent=e),i}function Qe(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function Xn(n,t){if(t(n))return n;if(n.parentNode)return Xn(n.parentNode,t)}function Je(n,t){var e=j("div","numInputWrapper"),i=j("input","numInput "+n),s=j("span","arrowUp"),a=j("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?i.type="number":(i.type="text",i.pattern="\\d*"),t!==void 0)for(var r in t)i.setAttribute(r,t[r]);return e.appendChild(i),e.appendChild(s),e.appendChild(a),e}function ae(n){try{if(typeof n.composedPath=="function"){var t=n.composedPath();return t[0]}return n.target}catch{return n.target}}var It=function(){},lt=function(n,t,e){return e.months[t?"shorthand":"longhand"][n]},Br={D:It,F:function(n,t,e){n.setMonth(e.months.longhand.indexOf(t))},G:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},H:function(n,t){n.setHours(parseFloat(t))},J:function(n,t){n.setDate(parseFloat(t))},K:function(n,t,e){n.setHours(n.getHours()%12+12*ce(new RegExp(e.amPM[1],"i").test(t)))},M:function(n,t,e){n.setMonth(e.months.shorthand.indexOf(t))},S:function(n,t){n.setSeconds(parseFloat(t))},U:function(n,t){return new Date(parseFloat(t)*1e3)},W:function(n,t,e){var i=parseInt(t),s=new Date(n.getFullYear(),0,2+(i-1)*7,0,0,0,0);return s.setDate(s.getDate()-s.getDay()+e.firstDayOfWeek),s},Y:function(n,t){n.setFullYear(parseFloat(t))},Z:function(n,t){return new Date(t)},d:function(n,t){n.setDate(parseFloat(t))},h:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},i:function(n,t){n.setMinutes(parseFloat(t))},j:function(n,t){n.setDate(parseFloat(t))},l:It,m:function(n,t){n.setMonth(parseFloat(t)-1)},n:function(n,t){n.setMonth(parseFloat(t)-1)},s:function(n,t){n.setSeconds(parseFloat(t))},u:function(n,t){return new Date(parseFloat(t))},w:It,y:function(n,t){n.setFullYear(2e3+parseFloat(t))}},De={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Ne={Z:function(n){return n.toISOString()},D:function(n,t,e){return t.weekdays.shorthand[Ne.w(n,t,e)]},F:function(n,t,e){return lt(Ne.n(n,t,e)-1,!1,t)},G:function(n,t,e){return ie(Ne.h(n,t,e))},H:function(n){return ie(n.getHours())},J:function(n,t){return t.ordinal!==void 0?n.getDate()+t.ordinal(n.getDate()):n.getDate()},K:function(n,t){return t.amPM[ce(n.getHours()>11)]},M:function(n,t){return lt(n.getMonth(),!0,t)},S:function(n){return ie(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,t,e){return e.getWeek(n)},Y:function(n){return ie(n.getFullYear(),4)},d:function(n){return ie(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return ie(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,t){return t.weekdays.longhand[n.getDay()]},m:function(n){return ie(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}},Zn=function(n){var t=n.config,e=t===void 0?Me:t,i=n.l10n,s=i===void 0?He:i,a=n.isMobile,r=a===void 0?!1:a;return function(d,h,p){var m=p||s;return e.formatDate!==void 0&&!r?e.formatDate(d,h,m):h.split("").map(function(b,C,T){return Ne[b]&&T[C-1]!=="\\"?Ne[b](d,m,e):b!=="\\"?b:""}).join("")}},Yt=function(n){var t=n.config,e=t===void 0?Me:t,i=n.l10n,s=i===void 0?He:i;return function(a,r,d,h){if(!(a!==0&&!a)){var p=h||s,m,b=a;if(a instanceof Date)m=new Date(a.getTime());else if(typeof a!="string"&&a.toFixed!==void 0)m=new Date(a);else if(typeof a=="string"){var C=r||(e||Me).dateFormat,T=String(a).trim();if(T==="today")m=new Date,d=!0;else if(e&&e.parseDate)m=e.parseDate(a,C);else if(/Z$/.test(T)||/GMT$/.test(T))m=new Date(a);else{for(var w=void 0,_=[],o=0,u=0,l="";o<C.length;o++){var g=C[o],S=g==="\\",E=C[o-1]==="\\"||S;if(De[g]&&!E){l+=De[g];var D=new RegExp(l).exec(a);D&&(w=!0)&&_[g!=="Y"?"push":"unshift"]({fn:Br[g],val:D[++u]})}else S||(l+=".")}m=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),_.forEach(function(y){var A=y.fn,x=y.val;return m=A(m,x,p)||m}),m=w?m:void 0}}if(!(m instanceof Date&&!isNaN(m.getTime()))){e.errorHandler(new Error("Invalid date provided: "+b));return}return d===!0&&m.setHours(0,0,0,0),m}}};function le(n,t,e){return e===void 0&&(e=!0),e!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):n.getTime()-t.getTime()}var Yr=function(n,t,e){return n>Math.min(t,e)&&n<Math.max(t,e)},Mt=function(n,t,e){return n*3600+t*60+e},qr=function(n){var t=Math.floor(n/3600),e=(n-t*3600)/60;return[t,e,n-t*3600-e*60]},zr={DAY:864e5};function Tt(n){var t=n.defaultHour,e=n.defaultMinute,i=n.defaultSeconds;if(n.minDate!==void 0){var s=n.minDate.getHours(),a=n.minDate.getMinutes(),r=n.minDate.getSeconds();t<s&&(t=s),t===s&&e<a&&(e=a),t===s&&e===a&&i<r&&(i=n.minDate.getSeconds())}if(n.maxDate!==void 0){var d=n.maxDate.getHours(),h=n.maxDate.getMinutes();t=Math.min(t,d),t===d&&(e=Math.min(h,e)),t===d&&e===h&&(i=n.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:i}}typeof Object.assign!="function"&&(Object.assign=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var i=function(d){d&&Object.keys(d).forEach(function(h){return n[h]=d[h]})},s=0,a=t;s<a.length;s++){var r=a[s];i(r)}return n});var J=function(){return J=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},J.apply(this,arguments)},xn=function(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var i=Array(n),s=0,t=0;t<e;t++)for(var a=arguments[t],r=0,d=a.length;r<d;r++,s++)i[s]=a[r];return i},Kr=300;function Ur(n,t){var e={config:J(J({},Me),W.defaultConfig),l10n:He};e.parseDate=Yt({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=_,e._setHoursFromDate=C,e._positionCalendar=Ye,e.changeMonth=gt,e.changeYear=Ve,e.clear=li,e.close=ci,e.onMouseOver=Be,e._createElement=j,e.createDay=D,e.destroy=di,e.isEnabled=Ce,e.jumpToDate=l,e.updateValue=ve,e.open=fi,e.redraw=Zt,e.set=vi,e.setDate=bi,e.toggle=Oi;function i(){e.utils={getDaysInMonth:function(c,f){return c===void 0&&(c=e.currentMonth),f===void 0&&(f=e.currentYear),c===1&&(f%4===0&&f%100!==0||f%400===0)?29:e.l10n.daysInMonth[c]}}}function s(){e.element=e.input=n,e.isOpen=!1,pi(),Xt(),yi(),wi(),i(),e.isMobile||E(),u(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&C(e.config.noCalendar?e.latestSelectedDateObj:void 0),ve(!1)),d();var c=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&c&&Ye(),z("onReady")}function a(){var c;return((c=e.calendarContainer)===null||c===void 0?void 0:c.getRootNode()).activeElement||document.activeElement}function r(c){return c.bind(e)}function d(){var c=e.config;c.weekNumbers===!1&&c.showMonths===1||c.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var f=(e.days.offsetWidth+1)*c.showMonths;e.daysContainer.style.width=f+"px",e.calendarContainer.style.width=f+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function h(c){if(e.selectedDates.length===0){var f=e.config.minDate===void 0||le(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),v=Tt(e.config);f.setHours(v.hours,v.minutes,v.seconds,f.getMilliseconds()),e.selectedDates=[f],e.latestSelectedDateObj=f}c!==void 0&&c.type!=="blur"&&_i(c);var O=e._input.value;b(),ve(),e._input.value!==O&&e._debouncedChange()}function p(c,f){return c%12+12*ce(f===e.l10n.amPM[1])}function m(c){switch(c%24){case 0:case 12:return 12;default:return c%12}}function b(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var c=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,f=(parseInt(e.minuteElement.value,10)||0)%60,v=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(c=p(c,e.amPM.textContent));var O=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&le(e.latestSelectedDateObj,e.config.minDate,!0)===0,k=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&le(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var I=Mt(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),$=Mt(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),P=Mt(c,f,v);if(P>$&&P<I){var H=qr(I);c=H[0],f=H[1],v=H[2]}}else{if(k){var F=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;c=Math.min(c,F.getHours()),c===F.getHours()&&(f=Math.min(f,F.getMinutes())),f===F.getMinutes()&&(v=Math.min(v,F.getSeconds()))}if(O){var N=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;c=Math.max(c,N.getHours()),c===N.getHours()&&f<N.getMinutes()&&(f=N.getMinutes()),f===N.getMinutes()&&(v=Math.max(v,N.getSeconds()))}}T(c,f,v)}}function C(c){var f=c||e.latestSelectedDateObj;f&&f instanceof Date&&T(f.getHours(),f.getMinutes(),f.getSeconds())}function T(c,f,v){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(c%24,f,v||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=ie(e.config.time_24hr?c:(12+c)%12+12*ce(c%12===0)),e.minuteElement.value=ie(f),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[ce(c>=12)]),e.secondElement!==void 0&&(e.secondElement.value=ie(v)))}function w(c){var f=ae(c),v=parseInt(f.value)+(c.delta||0);(v/1e3>1||c.key==="Enter"&&!/[^\d]/.test(v.toString()))&&Ve(v)}function _(c,f,v,O){if(f instanceof Array)return f.forEach(function(k){return _(c,k,v,O)});if(c instanceof Array)return c.forEach(function(k){return _(k,f,v,O)});c.addEventListener(f,v,O),e._handlers.push({remove:function(){return c.removeEventListener(f,v,O)}})}function o(){z("onChange")}function u(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(v){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+v+"]"),function(O){return _(O,"click",e[v])})}),e.isMobile){Ci();return}var c=Sn(hi,50);if(e._debouncedChange=Sn(o,Kr),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&_(e.daysContainer,"mouseover",function(v){e.config.mode==="range"&&Be(ae(v))}),_(e._input,"keydown",Gt),e.calendarContainer!==void 0&&_(e.calendarContainer,"keydown",Gt),!e.config.inline&&!e.config.static&&_(window,"resize",c),window.ontouchstart!==void 0?_(window.document,"touchstart",mt):_(window.document,"mousedown",mt),_(window.document,"focus",mt,{capture:!0}),e.config.clickOpens===!0&&(_(e._input,"focus",e.open),_(e._input,"click",e.open)),e.daysContainer!==void 0&&(_(e.monthNav,"click",xi),_(e.monthNav,["keyup","increment"],w),_(e.daysContainer,"click",en)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var f=function(v){return ae(v).select()};_(e.timeContainer,["increment"],h),_(e.timeContainer,"blur",h,{capture:!0}),_(e.timeContainer,"click",g),_([e.hourElement,e.minuteElement],["focus","click"],f),e.secondElement!==void 0&&_(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&_(e.amPM,"click",function(v){h(v)})}e.config.allowInput&&_(e._input,"blur",ui)}function l(c,f){var v=c!==void 0?e.parseDate(c):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),O=e.currentYear,k=e.currentMonth;try{v!==void 0&&(e.currentYear=v.getFullYear(),e.currentMonth=v.getMonth())}catch(I){I.message="Invalid date supplied: "+v,e.config.errorHandler(I)}f&&e.currentYear!==O&&(z("onYearChange"),B()),f&&(e.currentYear!==O||e.currentMonth!==k)&&z("onMonthChange"),e.redraw()}function g(c){var f=ae(c);~f.className.indexOf("arrow")&&S(c,f.classList.contains("arrowUp")?1:-1)}function S(c,f,v){var O=c&&ae(c),k=v||O&&O.parentNode&&O.parentNode.firstChild,I=bt("increment");I.delta=f,k&&k.dispatchEvent(I)}function E(){var c=window.document.createDocumentFragment();if(e.calendarContainer=j("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(c.appendChild(be()),e.innerContainer=j("div","flatpickr-innerContainer"),e.config.weekNumbers){var f=oi(),v=f.weekWrapper,O=f.weekNumbers;e.innerContainer.appendChild(v),e.weekNumbers=O,e.weekWrapper=v}e.rContainer=j("div","flatpickr-rContainer"),e.rContainer.appendChild(Ut()),e.daysContainer||(e.daysContainer=j("div","flatpickr-days"),e.daysContainer.tabIndex=-1),R(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),c.appendChild(e.innerContainer)}e.config.enableTime&&c.appendChild(pt()),Z(e.calendarContainer,"rangeMode",e.config.mode==="range"),Z(e.calendarContainer,"animate",e.config.animate===!0),Z(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(c);var k=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!k&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var I=j("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(I,e.element),I.appendChild(e.element),e.altInput&&I.appendChild(e.altInput),I.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function D(c,f,v,O){var k=Ce(f,!0),I=j("span",c,f.getDate().toString());return I.dateObj=f,I.$i=O,I.setAttribute("aria-label",e.formatDate(f,e.config.ariaDateFormat)),c.indexOf("hidden")===-1&&le(f,e.now)===0&&(e.todayDateElem=I,I.classList.add("today"),I.setAttribute("aria-current","date")),k?(I.tabIndex=-1,wt(f)&&(I.classList.add("selected"),e.selectedDateElem=I,e.config.mode==="range"&&(Z(I,"startRange",e.selectedDates[0]&&le(f,e.selectedDates[0],!0)===0),Z(I,"endRange",e.selectedDates[1]&&le(f,e.selectedDates[1],!0)===0),c==="nextMonthDay"&&I.classList.add("inRange")))):I.classList.add("flatpickr-disabled"),e.config.mode==="range"&&Si(f)&&!wt(f)&&I.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&c!=="prevMonthDay"&&O%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(f)+"</span>"),z("onDayCreate",I),I}function y(c){c.focus(),e.config.mode==="range"&&Be(c)}function A(c){for(var f=c>0?0:e.config.showMonths-1,v=c>0?e.config.showMonths:-1,O=f;O!=v;O+=c)for(var k=e.daysContainer.children[O],I=c>0?0:k.children.length-1,$=c>0?k.children.length:-1,P=I;P!=$;P+=c){var H=k.children[P];if(H.className.indexOf("hidden")===-1&&Ce(H.dateObj))return H}}function x(c,f){for(var v=c.className.indexOf("Month")===-1?c.dateObj.getMonth():e.currentMonth,O=f>0?e.config.showMonths:-1,k=f>0?1:-1,I=v-e.currentMonth;I!=O;I+=k)for(var $=e.daysContainer.children[I],P=v-e.currentMonth===I?c.$i+f:f<0?$.children.length-1:0,H=$.children.length,F=P;F>=0&&F<H&&F!=(f>0?H:-1);F+=k){var N=$.children[F];if(N.className.indexOf("hidden")===-1&&Ce(N.dateObj)&&Math.abs(c.$i-F)>=Math.abs(f))return y(N)}e.changeMonth(k),M(A(k),0)}function M(c,f){var v=a(),O=Re(v||document.body),k=c!==void 0?c:O?v:e.selectedDateElem!==void 0&&Re(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&Re(e.todayDateElem)?e.todayDateElem:A(f>0?1:-1);k===void 0?e._input.focus():O?x(k,f):y(k)}function L(c,f){for(var v=(new Date(c,f,1).getDay()-e.l10n.firstDayOfWeek+7)%7,O=e.utils.getDaysInMonth((f-1+12)%12,c),k=e.utils.getDaysInMonth(f,c),I=window.document.createDocumentFragment(),$=e.config.showMonths>1,P=$?"prevMonthDay hidden":"prevMonthDay",H=$?"nextMonthDay hidden":"nextMonthDay",F=O+1-v,N=0;F<=O;F++,N++)I.appendChild(D("flatpickr-day "+P,new Date(c,f-1,F),F,N));for(F=1;F<=k;F++,N++)I.appendChild(D("flatpickr-day",new Date(c,f,F),F,N));for(var V=k+1;V<=42-v&&(e.config.showMonths===1||N%7!==0);V++,N++)I.appendChild(D("flatpickr-day "+H,new Date(c,f+1,V%k),V,N));var pe=j("div","dayContainer");return pe.appendChild(I),pe}function R(){if(e.daysContainer!==void 0){Qe(e.daysContainer),e.weekNumbers&&Qe(e.weekNumbers);for(var c=document.createDocumentFragment(),f=0;f<e.config.showMonths;f++){var v=new Date(e.currentYear,e.currentMonth,1);v.setMonth(e.currentMonth+f),c.appendChild(L(v.getFullYear(),v.getMonth()))}e.daysContainer.appendChild(c),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&Be()}}function B(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var c=function(O){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&O<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&O>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var f=0;f<12;f++)if(c(f)){var v=j("option","flatpickr-monthDropdown-month");v.value=new Date(e.currentYear,f).getMonth().toString(),v.textContent=lt(f,e.config.shorthandCurrentMonth,e.l10n),v.tabIndex=-1,e.currentMonth===f&&(v.selected=!0),e.monthsDropdownContainer.appendChild(v)}}}function he(){var c=j("div","flatpickr-month"),f=window.document.createDocumentFragment(),v;e.config.showMonths>1||e.config.monthSelectorType==="static"?v=j("span","cur-month"):(e.monthsDropdownContainer=j("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),_(e.monthsDropdownContainer,"change",function($){var P=ae($),H=parseInt(P.value,10);e.changeMonth(H-e.currentMonth),z("onMonthChange")}),B(),v=e.monthsDropdownContainer);var O=Je("cur-year",{tabindex:"-1"}),k=O.getElementsByTagName("input")[0];k.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&k.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(k.setAttribute("max",e.config.maxDate.getFullYear().toString()),k.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var I=j("div","flatpickr-current-month");return I.appendChild(v),I.appendChild(O),f.appendChild(I),c.appendChild(f),{container:c,yearElement:k,monthElement:v}}function fe(){Qe(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var c=e.config.showMonths;c--;){var f=he();e.yearElements.push(f.yearElement),e.monthElements.push(f.monthElement),e.monthNav.appendChild(f.container)}e.monthNav.appendChild(e.nextMonthNav)}function be(){return e.monthNav=j("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=j("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=j("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,fe(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(c){e.__hidePrevMonthArrow!==c&&(Z(e.prevMonthNav,"flatpickr-disabled",c),e.__hidePrevMonthArrow=c)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(c){e.__hideNextMonthArrow!==c&&(Z(e.nextMonthNav,"flatpickr-disabled",c),e.__hideNextMonthArrow=c)}}),e.currentYearElement=e.yearElements[0],ze(),e.monthNav}function pt(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var c=Tt(e.config);e.timeContainer=j("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var f=j("span","flatpickr-time-separator",":"),v=Je("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=v.getElementsByTagName("input")[0];var O=Je("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=O.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=ie(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?c.hours:m(c.hours)),e.minuteElement.value=ie(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():c.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(v),e.timeContainer.appendChild(f),e.timeContainer.appendChild(O),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var k=Je("flatpickr-second");e.secondElement=k.getElementsByTagName("input")[0],e.secondElement.value=ie(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():c.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(j("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(k)}return e.config.time_24hr||(e.amPM=j("span","flatpickr-am-pm",e.l10n.amPM[ce((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function Ut(){e.weekdayContainer?Qe(e.weekdayContainer):e.weekdayContainer=j("div","flatpickr-weekdays");for(var c=e.config.showMonths;c--;){var f=j("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(f)}return Wt(),e.weekdayContainer}function Wt(){if(e.weekdayContainer){var c=e.l10n.firstDayOfWeek,f=xn(e.l10n.weekdays.shorthand);c>0&&c<f.length&&(f=xn(f.splice(c,f.length),f.splice(0,c)));for(var v=e.config.showMonths;v--;)e.weekdayContainer.children[v].innerHTML=`
      <span class='flatpickr-weekday'>
        `+f.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function oi(){e.calendarContainer.classList.add("hasWeeks");var c=j("div","flatpickr-weekwrapper");c.appendChild(j("span","flatpickr-weekday",e.l10n.weekAbbreviation));var f=j("div","flatpickr-weeks");return c.appendChild(f),{weekWrapper:c,weekNumbers:f}}function gt(c,f){f===void 0&&(f=!0);var v=f?c:c-e.currentMonth;v<0&&e._hidePrevMonthArrow===!0||v>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=v,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,z("onYearChange"),B()),R(),z("onMonthChange"),ze())}function li(c,f){if(c===void 0&&(c=!0),f===void 0&&(f=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,f===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var v=Tt(e.config),O=v.hours,k=v.minutes,I=v.seconds;T(O,k,I)}e.redraw(),c&&z("onChange")}function ci(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),z("onClose")}function di(){e.config!==void 0&&z("onDestroy");for(var c=e._handlers.length;c--;)e._handlers[c].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var f=e.calendarContainer.parentNode;if(f.lastChild&&f.removeChild(f.lastChild),f.parentNode){for(;f.firstChild;)f.parentNode.insertBefore(f.firstChild,f);f.parentNode.removeChild(f)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(v){try{delete e[v]}catch{}})}function Fe(c){return e.calendarContainer.contains(c)}function mt(c){if(e.isOpen&&!e.config.inline){var f=ae(c),v=Fe(f),O=f===e.input||f===e.altInput||e.element.contains(f)||c.path&&c.path.indexOf&&(~c.path.indexOf(e.input)||~c.path.indexOf(e.altInput)),k=!O&&!v&&!Fe(c.relatedTarget),I=!e.config.ignoredFocusElements.some(function($){return $.contains(f)});k&&I&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&h(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function Ve(c){if(!(!c||e.config.minDate&&c<e.config.minDate.getFullYear()||e.config.maxDate&&c>e.config.maxDate.getFullYear())){var f=c,v=e.currentYear!==f;e.currentYear=f||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),v&&(e.redraw(),z("onYearChange"),B())}}function Ce(c,f){var v;f===void 0&&(f=!0);var O=e.parseDate(c,void 0,f);if(e.config.minDate&&O&&le(O,e.config.minDate,f!==void 0?f:!e.minDateHasTime)<0||e.config.maxDate&&O&&le(O,e.config.maxDate,f!==void 0?f:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(O===void 0)return!1;for(var k=!!e.config.enable,I=(v=e.config.enable)!==null&&v!==void 0?v:e.config.disable,$=0,P=void 0;$<I.length;$++){if(P=I[$],typeof P=="function"&&P(O))return k;if(P instanceof Date&&O!==void 0&&P.getTime()===O.getTime())return k;if(typeof P=="string"){var H=e.parseDate(P,void 0,!0);return H&&H.getTime()===O.getTime()?k:!k}else if(typeof P=="object"&&O!==void 0&&P.from&&P.to&&O.getTime()>=P.from.getTime()&&O.getTime()<=P.to.getTime())return k}return!k}function Re(c){return e.daysContainer!==void 0?c.className.indexOf("hidden")===-1&&c.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(c):!1}function ui(c){var f=c.target===e._input,v=e._input.value.trimEnd()!==yt();f&&v&&!(c.relatedTarget&&Fe(c.relatedTarget))&&e.setDate(e._input.value,!0,c.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function Gt(c){var f=ae(c),v=e.config.wrap?n.contains(f):f===e._input,O=e.config.allowInput,k=e.isOpen&&(!O||!v),I=e.config.inline&&v&&!O;if(c.keyCode===13&&v){if(O)return e.setDate(e._input.value,!0,f===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),f.blur();e.open()}else if(Fe(f)||k||I){var $=!!e.timeContainer&&e.timeContainer.contains(f);switch(c.keyCode){case 13:$?(c.preventDefault(),h(),vt()):en(c);break;case 27:c.preventDefault(),vt();break;case 8:case 46:v&&!e.config.allowInput&&(c.preventDefault(),e.clear());break;case 37:case 39:if(!$&&!v){c.preventDefault();var P=a();if(e.daysContainer!==void 0&&(O===!1||P&&Re(P))){var H=c.keyCode===39?1:-1;c.ctrlKey?(c.stopPropagation(),gt(H),M(A(1),0)):M(void 0,H)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:c.preventDefault();var F=c.keyCode===40?1:-1;e.daysContainer&&f.$i!==void 0||f===e.input||f===e.altInput?c.ctrlKey?(c.stopPropagation(),Ve(e.currentYear-F),M(A(1),0)):$||M(void 0,F*7):f===e.currentYearElement?Ve(e.currentYear-F):e.config.enableTime&&(!$&&e.hourElement&&e.hourElement.focus(),h(c),e._debouncedChange());break;case 9:if($){var N=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(se){return se}),V=N.indexOf(f);if(V!==-1){var pe=N[V+(c.shiftKey?-1:1)];c.preventDefault(),(pe||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(f)&&c.shiftKey&&(c.preventDefault(),e._input.focus());break}}if(e.amPM!==void 0&&f===e.amPM)switch(c.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],b(),ve();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],b(),ve();break}(v||Fe(f))&&z("onKeyDown",c)}function Be(c,f){if(f===void 0&&(f="flatpickr-day"),!(e.selectedDates.length!==1||c&&(!c.classList.contains(f)||c.classList.contains("flatpickr-disabled")))){for(var v=c?c.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),O=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),k=Math.min(v,e.selectedDates[0].getTime()),I=Math.max(v,e.selectedDates[0].getTime()),$=!1,P=0,H=0,F=k;F<I;F+=zr.DAY)Ce(new Date(F),!0)||($=$||F>k&&F<I,F<O&&(!P||F>P)?P=F:F>O&&(!H||F<H)&&(H=F));var N=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+f));N.forEach(function(V){var pe=V.dateObj,se=pe.getTime(),Pe=P>0&&se<P||H>0&&se>H;if(Pe){V.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Ee){V.classList.remove(Ee)});return}else if($&&!Pe)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Ee){V.classList.remove(Ee)}),c!==void 0&&(c.classList.add(v<=e.selectedDates[0].getTime()?"startRange":"endRange"),O<v&&se===O?V.classList.add("startRange"):O>v&&se===O&&V.classList.add("endRange"),se>=P&&(H===0||se<=H)&&Yr(se,O,v)&&V.classList.add("inRange"))})}}function hi(){e.isOpen&&!e.config.static&&!e.config.inline&&Ye()}function fi(c,f){if(f===void 0&&(f=e._positionElement),e.isMobile===!0){if(c){c.preventDefault();var v=ae(c);v&&v.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),z("onOpen");return}else if(e._input.disabled||e.config.inline)return;var O=e.isOpen;e.isOpen=!0,O||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),z("onOpen"),Ye(f)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(c===void 0||!e.timeContainer.contains(c.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function Qt(c){return function(f){var v=e.config["_"+c+"Date"]=e.parseDate(f,e.config.dateFormat),O=e.config["_"+(c==="min"?"max":"min")+"Date"];v!==void 0&&(e[c==="min"?"minDateHasTime":"maxDateHasTime"]=v.getHours()>0||v.getMinutes()>0||v.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(k){return Ce(k)}),!e.selectedDates.length&&c==="min"&&C(v),ve()),e.daysContainer&&(Zt(),v!==void 0?e.currentYearElement[c]=v.getFullYear().toString():e.currentYearElement.removeAttribute(c),e.currentYearElement.disabled=!!O&&v!==void 0&&O.getFullYear()===v.getFullYear())}}function pi(){var c=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],f=J(J({},JSON.parse(JSON.stringify(n.dataset||{}))),t),v={};e.config.parseDate=f.parseDate,e.config.formatDate=f.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(N){e.config._enable=nn(N)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(N){e.config._disable=nn(N)}});var O=f.mode==="time";if(!f.dateFormat&&(f.enableTime||O)){var k=W.defaultConfig.dateFormat||Me.dateFormat;v.dateFormat=f.noCalendar||O?"H:i"+(f.enableSeconds?":S":""):k+" H:i"+(f.enableSeconds?":S":"")}if(f.altInput&&(f.enableTime||O)&&!f.altFormat){var I=W.defaultConfig.altFormat||Me.altFormat;v.altFormat=f.noCalendar||O?"h:i"+(f.enableSeconds?":S K":" K"):I+(" h:i"+(f.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:Qt("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:Qt("max")});var $=function(N){return function(V){e.config[N==="min"?"_minTime":"_maxTime"]=e.parseDate(V,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:$("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:$("max")}),f.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,v,f);for(var P=0;P<c.length;P++)e.config[c[P]]=e.config[c[P]]===!0||e.config[c[P]]==="true";kt.filter(function(N){return e.config[N]!==void 0}).forEach(function(N){e.config[N]=Lt(e.config[N]||[]).map(r)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var P=0;P<e.config.plugins.length;P++){var H=e.config.plugins[P](e)||{};for(var F in H)kt.indexOf(F)>-1?e.config[F]=Lt(H[F]).map(r).concat(e.config[F]):typeof f[F]>"u"&&(e.config[F]=H[F])}f.altInputClass||(e.config.altInputClass=Jt().className+" "+e.config.altInputClass),z("onParseConfig")}function Jt(){return e.config.wrap?n.querySelector("[data-input]"):n}function Xt(){typeof e.config.locale!="object"&&typeof W.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=J(J({},W.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?W.l10ns[e.config.locale]:void 0),De.D="("+e.l10n.weekdays.shorthand.join("|")+")",De.l="("+e.l10n.weekdays.longhand.join("|")+")",De.M="("+e.l10n.months.shorthand.join("|")+")",De.F="("+e.l10n.months.longhand.join("|")+")",De.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var c=J(J({},t),JSON.parse(JSON.stringify(n.dataset||{})));c.time_24hr===void 0&&W.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=Zn(e),e.parseDate=Yt({config:e.config,l10n:e.l10n})}function Ye(c){if(typeof e.config.position=="function")return void e.config.position(e,c);if(e.calendarContainer!==void 0){z("onPreCalendarPosition");var f=c||e._positionElement,v=Array.prototype.reduce.call(e.calendarContainer.children,function(Ti,Fi){return Ti+Fi.offsetHeight},0),O=e.calendarContainer.offsetWidth,k=e.config.position.split(" "),I=k[0],$=k.length>1?k[1]:null,P=f.getBoundingClientRect(),H=window.innerHeight-P.bottom,F=I==="above"||I!=="below"&&H<v&&P.top>v,N=window.pageYOffset+P.top+(F?-v-2:f.offsetHeight+2);if(Z(e.calendarContainer,"arrowTop",!F),Z(e.calendarContainer,"arrowBottom",F),!e.config.inline){var V=window.pageXOffset+P.left,pe=!1,se=!1;$==="center"?(V-=(O-P.width)/2,pe=!0):$==="right"&&(V-=O-P.width,se=!0),Z(e.calendarContainer,"arrowLeft",!pe&&!se),Z(e.calendarContainer,"arrowCenter",pe),Z(e.calendarContainer,"arrowRight",se);var Pe=window.document.body.offsetWidth-(window.pageXOffset+P.right),Ee=V+O>window.document.body.offsetWidth,Ai=Pe+O>window.document.body.offsetWidth;if(Z(e.calendarContainer,"rightMost",Ee),!e.config.static)if(e.calendarContainer.style.top=N+"px",!Ee)e.calendarContainer.style.left=V+"px",e.calendarContainer.style.right="auto";else if(!Ai)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=Pe+"px";else{var Ct=gi();if(Ct===void 0)return;var Di=window.document.body.offsetWidth,Ei=Math.max(0,Di/2-O/2),ki=".flatpickr-calendar.centerMost:before",Li=".flatpickr-calendar.centerMost:after",Ii=Ct.cssRules.length,Mi="{left:"+P.left+"px;right:auto;}";Z(e.calendarContainer,"rightMost",!1),Z(e.calendarContainer,"centerMost",!0),Ct.insertRule(ki+","+Li+Mi,Ii),e.calendarContainer.style.left=Ei+"px",e.calendarContainer.style.right="auto"}}}}function gi(){for(var c=null,f=0;f<document.styleSheets.length;f++){var v=document.styleSheets[f];if(v.cssRules){try{v.cssRules}catch{continue}c=v;break}}return c??mi()}function mi(){var c=document.createElement("style");return document.head.appendChild(c),c.sheet}function Zt(){e.config.noCalendar||e.isMobile||(B(),ze(),R())}function vt(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function en(c){c.preventDefault(),c.stopPropagation();var f=function(N){return N.classList&&N.classList.contains("flatpickr-day")&&!N.classList.contains("flatpickr-disabled")&&!N.classList.contains("notAllowed")},v=Xn(ae(c),f);if(v!==void 0){var O=v,k=e.latestSelectedDateObj=new Date(O.dateObj.getTime()),I=(k.getMonth()<e.currentMonth||k.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=O,e.config.mode==="single")e.selectedDates=[k];else if(e.config.mode==="multiple"){var $=wt(k);$?e.selectedDates.splice(parseInt($),1):e.selectedDates.push(k)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=k,e.selectedDates.push(k),le(k,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(N,V){return N.getTime()-V.getTime()}));if(b(),I){var P=e.currentYear!==k.getFullYear();e.currentYear=k.getFullYear(),e.currentMonth=k.getMonth(),P&&(z("onYearChange"),B()),z("onMonthChange")}if(ze(),R(),ve(),!I&&e.config.mode!=="range"&&e.config.showMonths===1?y(O):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var H=e.config.mode==="single"&&!e.config.enableTime,F=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(H||F)&&vt()}o()}}var qe={locale:[Xt,Wt],showMonths:[fe,d,Ut],minDate:[l],maxDate:[l],positionElement:[sn],clickOpens:[function(){e.config.clickOpens===!0?(_(e._input,"focus",e.open),_(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function vi(c,f){if(c!==null&&typeof c=="object"){Object.assign(e.config,c);for(var v in c)qe[v]!==void 0&&qe[v].forEach(function(O){return O()})}else e.config[c]=f,qe[c]!==void 0?qe[c].forEach(function(O){return O()}):kt.indexOf(c)>-1&&(e.config[c]=Lt(f));e.redraw(),ve(!0)}function tn(c,f){var v=[];if(c instanceof Array)v=c.map(function(O){return e.parseDate(O,f)});else if(c instanceof Date||typeof c=="number")v=[e.parseDate(c,f)];else if(typeof c=="string")switch(e.config.mode){case"single":case"time":v=[e.parseDate(c,f)];break;case"multiple":v=c.split(e.config.conjunction).map(function(O){return e.parseDate(O,f)});break;case"range":v=c.split(e.l10n.rangeSeparator).map(function(O){return e.parseDate(O,f)});break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(c)));e.selectedDates=e.config.allowInvalidPreload?v:v.filter(function(O){return O instanceof Date&&Ce(O,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(O,k){return O.getTime()-k.getTime()})}function bi(c,f,v){if(f===void 0&&(f=!1),v===void 0&&(v=e.config.dateFormat),c!==0&&!c||c instanceof Array&&c.length===0)return e.clear(f);tn(c,v),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),l(void 0,f),C(),e.selectedDates.length===0&&e.clear(!1),ve(f),f&&z("onChange")}function nn(c){return c.slice().map(function(f){return typeof f=="string"||typeof f=="number"||f instanceof Date?e.parseDate(f,void 0,!0):f&&typeof f=="object"&&f.from&&f.to?{from:e.parseDate(f.from,void 0),to:e.parseDate(f.to,void 0)}:f}).filter(function(f){return f})}function wi(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var c=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);c&&tn(c,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function yi(){if(e.input=Jt(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=j(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),sn()}function sn(){e._positionElement=e.config.positionElement||e._input}function Ci(){var c=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=j("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=c,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=c==="datetime-local"?"Y-m-d\\TH:i:S":c==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}_(e.mobileInput,"change",function(f){e.setDate(ae(f).value,!1,e.mobileFormatStr),z("onChange"),z("onClose")})}function Oi(c){if(e.isOpen===!0)return e.close();e.open(c)}function z(c,f){if(e.config!==void 0){var v=e.config[c];if(v!==void 0&&v.length>0)for(var O=0;v[O]&&O<v.length;O++)v[O](e.selectedDates,e.input.value,e,f);c==="onChange"&&(e.input.dispatchEvent(bt("change")),e.input.dispatchEvent(bt("input")))}}function bt(c){var f=document.createEvent("Event");return f.initEvent(c,!0,!0),f}function wt(c){for(var f=0;f<e.selectedDates.length;f++){var v=e.selectedDates[f];if(v instanceof Date&&le(v,c)===0)return""+f}return!1}function Si(c){return e.config.mode!=="range"||e.selectedDates.length<2?!1:le(c,e.selectedDates[0])>=0&&le(c,e.selectedDates[1])<=0}function ze(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(c,f){var v=new Date(e.currentYear,e.currentMonth,1);v.setMonth(e.currentMonth+f),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[f].textContent=lt(v.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=v.getMonth().toString(),c.value=v.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function yt(c){var f=c||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(v){return e.formatDate(v,f)}).filter(function(v,O,k){return e.config.mode!=="range"||e.config.enableTime||k.indexOf(v)===O}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function ve(c){c===void 0&&(c=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=yt(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=yt(e.config.altFormat)),c!==!1&&z("onValueUpdate")}function xi(c){var f=ae(c),v=e.prevMonthNav.contains(f),O=e.nextMonthNav.contains(f);v||O?gt(v?-1:1):e.yearElements.indexOf(f)>=0?f.select():f.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):f.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function _i(c){c.preventDefault();var f=c.type==="keydown",v=ae(c),O=v;e.amPM!==void 0&&v===e.amPM&&(e.amPM.textContent=e.l10n.amPM[ce(e.amPM.textContent===e.l10n.amPM[0])]);var k=parseFloat(O.getAttribute("min")),I=parseFloat(O.getAttribute("max")),$=parseFloat(O.getAttribute("step")),P=parseInt(O.value,10),H=c.delta||(f?c.which===38?1:-1:0),F=P+$*H;if(typeof O.value<"u"&&O.value.length===2){var N=O===e.hourElement,V=O===e.minuteElement;F<k?(F=I+F+ce(!N)+(ce(N)&&ce(!e.amPM)),V&&S(void 0,-1,e.hourElement)):F>I&&(F=O===e.hourElement?F-I-ce(!e.amPM):k,V&&S(void 0,1,e.hourElement)),e.amPM&&N&&($===1?F+P===23:Math.abs(F-P)>$)&&(e.amPM.textContent=e.l10n.amPM[ce(e.amPM.textContent===e.l10n.amPM[0])]),O.value=ie(F)}}return s(),e}function Te(n,t){for(var e=Array.prototype.slice.call(n).filter(function(r){return r instanceof HTMLElement}),i=[],s=0;s<e.length;s++){var a=e[s];try{if(a.getAttribute("data-fp-omit")!==null)continue;a._flatpickr!==void 0&&(a._flatpickr.destroy(),a._flatpickr=void 0),a._flatpickr=Ur(a,t||{}),i.push(a._flatpickr)}catch(r){console.error(r)}}return i.length===1?i[0]:i}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return Te(this,n)},HTMLElement.prototype.flatpickr=function(n){return Te([this],n)});var W=function(n,t){return typeof n=="string"?Te(window.document.querySelectorAll(n),t):n instanceof Node?Te([n],t):Te(n,t)};W.defaultConfig={};W.l10ns={en:J({},He),default:J({},He)};W.localize=function(n){W.l10ns.default=J(J({},W.l10ns.default),n)};W.setDefaults=function(n){W.defaultConfig=J(J({},W.defaultConfig),n)};W.parseDate=Yt({});W.formatDate=Zn({});W.compareDates=le;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return Te(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=W);function Ft(n,t){n.split(/\s+/).forEach(e=>{t(e)})}class Wr{constructor(){this._events={}}on(t,e){Ft(t,i=>{const s=this._events[i]||[];s.push(e),this._events[i]=s})}off(t,e){var i=arguments.length;if(i===0){this._events={};return}Ft(t,s=>{if(i===1){delete this._events[s];return}const a=this._events[s];a!==void 0&&(a.splice(a.indexOf(e),1),this._events[s]=a)})}trigger(t,...e){var i=this;Ft(t,s=>{const a=i._events[s];a!==void 0&&a.forEach(r=>{r.apply(i,e)})})}}function Gr(n){return n.plugins={},class extends n{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(t,e){n.plugins[t]={name:t,fn:e}}initializePlugins(t){var e,i;const s=this,a=[];if(Array.isArray(t))t.forEach(r=>{typeof r=="string"?a.push(r):(s.plugins.settings[r.name]=r.options,a.push(r.name))});else if(t)for(e in t)t.hasOwnProperty(e)&&(s.plugins.settings[e]=t[e],a.push(e));for(;i=a.shift();)s.require(i)}loadPlugin(t){var e=this,i=e.plugins,s=n.plugins[t];if(!n.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');i.requested[t]=!0,i.loaded[t]=s.fn.apply(e,[e.plugins.settings[t]||{}]),i.names.push(t)}require(t){var e=this,i=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(i.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return i.loaded[t]}}}const ft=n=>(n=n.filter(Boolean),n.length<2?n[0]||"":Jr(n)==1?"["+n.join("")+"]":"(?:"+n.join("|")+")"),ei=n=>{if(!Qr(n))return n.join("");let t="",e=0;const i=()=>{e>1&&(t+="{"+e+"}")};return n.forEach((s,a)=>{if(s===n[a-1]){e++;return}i(),t+=s,e=1}),i(),t},ti=n=>{let t=Array.from(n);return ft(t)},Qr=n=>new Set(n).size!==n.length,je=n=>(n+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),Jr=n=>n.reduce((t,e)=>Math.max(t,Xr(e)),0),Xr=n=>Array.from(n).length,ni=n=>{if(n.length===1)return[[n]];let t=[];const e=n.substring(1);return ni(e).forEach(function(s){let a=s.slice(0);a[0]=n.charAt(0)+a[0],t.push(a),a=s.slice(0),a.unshift(n.charAt(0)),t.push(a)}),t},Zr=[[0,65535]],ea="[̀-ͯ·ʾʼ]";let ct,ii;const ta=3,Kt={},_n={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let n in _n){let t=_n[n]||"";for(let e=0;e<t.length;e++){let i=t.substring(e,e+1);Kt[i]=n}}const na=new RegExp(Object.keys(Kt).join("|")+"|"+ea,"gu"),ia=n=>{ct===void 0&&(ct=oa(Zr))},An=(n,t="NFKD")=>n.normalize(t),dt=n=>Array.from(n).reduce((t,e)=>t+sa(e),""),sa=n=>(n=An(n).toLowerCase().replace(na,t=>Kt[t]||""),An(n,"NFC"));function*ra(n){for(const[t,e]of n)for(let i=t;i<=e;i++){let s=String.fromCharCode(i),a=dt(s);a!=s.toLowerCase()&&(a.length>ta||a.length!=0&&(yield{folded:a,composed:s,code_point:i}))}}const aa=n=>{const t={},e=(i,s)=>{const a=t[i]||new Set,r=new RegExp("^"+ti(a)+"$","iu");s.match(r)||(a.add(je(s)),t[i]=a)};for(let i of ra(n))e(i.folded,i.folded),e(i.folded,i.composed);return t},oa=n=>{const t=aa(n),e={};let i=[];for(let a in t){let r=t[a];r&&(e[a]=ti(r)),a.length>1&&i.push(je(a))}i.sort((a,r)=>r.length-a.length);const s=ft(i);return ii=new RegExp("^"+s,"u"),e},la=(n,t=1)=>{let e=0;return n=n.map(i=>(ct[i]&&(e+=i.length),ct[i]||i)),e>=t?ei(n):""},ca=(n,t=1)=>(t=Math.max(t,n.length-1),ft(ni(n).map(e=>la(e,t)))),Dn=(n,t=!0)=>{let e=n.length>1?1:0;return ft(n.map(i=>{let s=[];const a=t?i.length():i.length()-1;for(let r=0;r<a;r++)s.push(ca(i.substrs[r]||"",e));return ei(s)}))},da=(n,t)=>{for(const e of t){if(e.start!=n.start||e.end!=n.end||e.substrs.join("")!==n.substrs.join(""))continue;let i=n.parts;const s=r=>{for(const d of i){if(d.start===r.start&&d.substr===r.substr)return!1;if(!(r.length==1||d.length==1)&&(r.start<d.start&&r.end>d.start||d.start<r.start&&d.end>r.start))return!0}return!1};if(!(e.parts.filter(s).length>0))return!0}return!1};class ut{constructor(){Oe(this,"parts");Oe(this,"substrs");Oe(this,"start");Oe(this,"end");this.parts=[],this.substrs=[],this.start=0,this.end=0}add(t){t&&(this.parts.push(t),this.substrs.push(t.substr),this.start=Math.min(t.start,this.start),this.end=Math.max(t.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(t,e){let i=new ut,s=JSON.parse(JSON.stringify(this.parts)),a=s.pop();for(const h of s)i.add(h);let r=e.substr.substring(0,t-a.start),d=r.length;return i.add({start:a.start,end:a.start+d,length:d,substr:r}),i}}const ua=n=>{ia(),n=dt(n);let t="",e=[new ut];for(let i=0;i<n.length;i++){let a=n.substring(i).match(ii);const r=n.substring(i,i+1),d=a?a[0]:null;let h=[],p=new Set;for(const m of e){const b=m.last();if(!b||b.length==1||b.end<=i)if(d){const C=d.length;m.add({start:i,end:i+C,length:C,substr:d}),p.add("1")}else m.add({start:i,end:i+1,length:1,substr:r}),p.add("2");else if(d){let C=m.clone(i,b);const T=d.length;C.add({start:i,end:i+T,length:T,substr:d}),h.push(C)}else p.add("3")}if(h.length>0){h=h.sort((m,b)=>m.length()-b.length());for(let m of h)da(m,e)||e.push(m);continue}if(i>0&&p.size==1&&!p.has("3")){t+=Dn(e,!1);let m=new ut;const b=e[0];b&&m.add(b.last()),e=[m]}}return t+=Dn(e,!0),t},ha=(n,t)=>{if(n)return n[t]},fa=(n,t)=>{if(n){for(var e,i=t.split(".");(e=i.shift())&&(n=n[e]););return n}},Pt=(n,t,e)=>{var i,s;return!n||(n=n+"",t.regex==null)||(s=n.search(t.regex),s===-1)?0:(i=t.string.length/n.length,s===0&&(i+=.5),i*e)},Nt=(n,t)=>{var e=n[t];if(typeof e=="function")return e;e&&!Array.isArray(e)&&(n[t]=[e])},Xe=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},pa=(n,t)=>typeof n=="number"&&typeof t=="number"?n>t?1:n<t?-1:0:(n=dt(n+"").toLowerCase(),t=dt(t+"").toLowerCase(),n>t?1:t>n?-1:0);class ga{constructor(t,e){Oe(this,"items");Oe(this,"settings");this.items=t,this.settings=e||{diacritics:!0}}tokenize(t,e,i){if(!t||!t.length)return[];const s=[],a=t.split(/\s+/);var r;return i&&(r=new RegExp("^("+Object.keys(i).map(je).join("|")+"):(.*)$")),a.forEach(d=>{let h,p=null,m=null;r&&(h=d.match(r))&&(p=h[1],d=h[2]),d.length>0&&(this.settings.diacritics?m=ua(d)||null:m=je(d),m&&e&&(m="\\b"+m)),s.push({string:d,regex:m?new RegExp(m,"iu"):null,field:p})}),s}getScoreFunction(t,e){var i=this.prepareSearch(t,e);return this._getScoreFunction(i)}_getScoreFunction(t){const e=t.tokens,i=e.length;if(!i)return function(){return 0};const s=t.options.fields,a=t.weights,r=s.length,d=t.getAttrFn;if(!r)return function(){return 1};const h=function(){return r===1?function(p,m){const b=s[0].field;return Pt(d(m,b),p,a[b]||1)}:function(p,m){var b=0;if(p.field){const C=d(m,p.field);!p.regex&&C?b+=1/r:b+=Pt(C,p,1)}else Xe(a,(C,T)=>{b+=Pt(d(m,T),p,C)});return b/r}}();return i===1?function(p){return h(e[0],p)}:t.options.conjunction==="and"?function(p){var m,b=0;for(let C of e){if(m=h(C,p),m<=0)return 0;b+=m}return b/i}:function(p){var m=0;return Xe(e,b=>{m+=h(b,p)}),m/i}}getSortFunction(t,e){var i=this.prepareSearch(t,e);return this._getSortFunction(i)}_getSortFunction(t){var e,i=[];const s=this,a=t.options,r=!t.query&&a.sort_empty?a.sort_empty:a.sort;if(typeof r=="function")return r.bind(this);const d=function(p,m){return p==="$score"?m.score:t.getAttrFn(s.items[m.id],p)};if(r)for(let p of r)(t.query||p.field!=="$score")&&i.push(p);if(t.query){e=!0;for(let p of i)if(p.field==="$score"){e=!1;break}e&&i.unshift({field:"$score",direction:"desc"})}else i=i.filter(p=>p.field!=="$score");return i.length?function(p,m){var b,C;for(let T of i)if(C=T.field,b=(T.direction==="desc"?-1:1)*pa(d(C,p),d(C,m)),b)return b;return 0}:null}prepareSearch(t,e){const i={};var s=Object.assign({},e);if(Nt(s,"sort"),Nt(s,"sort_empty"),s.fields){Nt(s,"fields");const a=[];s.fields.forEach(r=>{typeof r=="string"&&(r={field:r,weight:1}),a.push(r),i[r.field]="weight"in r?r.weight:1}),s.fields=a}return{options:s,query:t.toLowerCase().trim(),tokens:this.tokenize(t,s.respect_word_boundaries,i),total:0,items:[],weights:i,getAttrFn:s.nesting?fa:ha}}search(t,e){var i=this,s,a;a=this.prepareSearch(t,e),e=a.options,t=a.query;const r=e.score||i._getScoreFunction(a);t.length?Xe(i.items,(h,p)=>{s=r(h),(e.filter===!1||s>0)&&a.items.push({score:s,id:p})}):Xe(i.items,(h,p)=>{a.items.push({score:1,id:p})});const d=i._getSortFunction(a);return d&&a.items.sort(d),a.total=a.items.length,typeof e.limit=="number"&&(a.items=a.items.slice(0,e.limit)),a}}const ue=n=>typeof n>"u"||n===null?null:it(n),it=n=>typeof n=="boolean"?n?"1":"0":n+"",$t=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),ma=(n,t)=>t>0?window.setTimeout(n,t):(n.call(null),null),va=(n,t)=>{var e;return function(i,s){var a=this;e&&(a.loading=Math.max(a.loading-1,0),clearTimeout(e)),e=setTimeout(function(){e=null,a.loadedSearches[i]=!0,n.call(a,i,s)},t)}},En=(n,t,e)=>{var i,s=n.trigger,a={};n.trigger=function(){var r=arguments[0];if(t.indexOf(r)!==-1)a[r]=arguments;else return s.apply(n,arguments)},e.apply(n,[]),n.trigger=s;for(i of t)i in a&&s.apply(n,a[i])},ba=n=>({start:n.selectionStart||0,length:(n.selectionEnd||0)-(n.selectionStart||0)}),K=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},ee=(n,t,e,i)=>{n.addEventListener(t,e,i)},_e=(n,t)=>{if(!t||!t[n])return!1;var e=(t.altKey?1:0)+(t.ctrlKey?1:0)+(t.shiftKey?1:0)+(t.metaKey?1:0);return e===1},Ht=(n,t)=>{const e=n.getAttribute("id");return e||(n.setAttribute("id",t),t)},kn=n=>n.replace(/[\\"']/g,"\\$&"),Ae=(n,t)=>{t&&n.append(t)},Q=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},me=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(si(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},si=n=>typeof n=="string"&&n.indexOf("<")>-1,wa=n=>n.replace(/['"\\]/g,"\\$&"),jt=(n,t)=>{var e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!1),n.dispatchEvent(e)},Ze=(n,t)=>{Object.assign(n.style,t)},oe=(n,...t)=>{var e=ri(t);n=ai(n),n.map(i=>{e.map(s=>{i.classList.add(s)})})},ye=(n,...t)=>{var e=ri(t);n=ai(n),n.map(i=>{e.map(s=>{i.classList.remove(s)})})},ri=n=>{var t=[];return Q(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},ai=n=>(Array.isArray(n)||(n=[n]),n),Vt=(n,t,e)=>{if(!(e&&!e.contains(n)))for(;n&&n.matches;){if(n.matches(t))return n;n=n.parentNode}},Ln=(n,t=0)=>t>0?n[n.length-1]:n[0],ya=n=>Object.keys(n).length===0,In=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e},q=(n,t)=>{Q(t,(e,i)=>{e==null?n.removeAttribute(i):n.setAttribute(i,""+e)})},qt=(n,t)=>{n.parentNode&&n.parentNode.replaceChild(t,n)},Ca=(n,t)=>{if(t===null)return;if(typeof t=="string"){if(!t.length)return;t=new RegExp(t,"i")}const e=a=>{var r=a.data.match(t);if(r&&a.data.length>0){var d=document.createElement("span");d.className="highlight";var h=a.splitText(r.index);h.splitText(r[0].length);var p=h.cloneNode(!0);return d.appendChild(p),qt(h,d),1}return 0},i=a=>{a.nodeType===1&&a.childNodes&&!/(script|style)/i.test(a.tagName)&&(a.className!=="highlight"||a.tagName!=="SPAN")&&Array.from(a.childNodes).forEach(r=>{s(r)})},s=a=>a.nodeType===3?e(a):(i(a),0);s(n)},Oa=n=>{var t=n.querySelectorAll("span.highlight");Array.prototype.forEach.call(t,function(e){var i=e.parentNode;i.replaceChild(e.firstChild,e),i.normalize()})},Sa=65,xa=13,_a=27,Aa=37,Da=38,Ea=39,ka=40,Mn=8,La=46,Tn=9,Ia=typeof navigator>"u"?!1:/Mac/.test(navigator.userAgent),et=Ia?"metaKey":"ctrlKey",Fn={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(n){return n.length>0},render:{}};function Pn(n,t){var e=Object.assign({},Fn,t),i=e.dataAttr,s=e.labelField,a=e.valueField,r=e.disabledField,d=e.optgroupField,h=e.optgroupLabelField,p=e.optgroupValueField,m=n.tagName.toLowerCase(),b=n.getAttribute("placeholder")||n.getAttribute("data-placeholder");if(!b&&!e.allowEmptyOption){let _=n.querySelector('option[value=""]');_&&(b=_.textContent)}var C={placeholder:b,options:[],optgroups:[],items:[],maxItems:null},T=()=>{var _,o=C.options,u={},l=1;let g=0;var S=y=>{var A=Object.assign({},y.dataset),x=i&&A[i];return typeof x=="string"&&x.length&&(A=Object.assign(A,JSON.parse(x))),A},E=(y,A)=>{var x=ue(y.value);if(x!=null&&!(!x&&!e.allowEmptyOption)){if(u.hasOwnProperty(x)){if(A){var M=u[x][d];M?Array.isArray(M)?M.push(A):u[x][d]=[M,A]:u[x][d]=A}}else{var L=S(y);L[s]=L[s]||y.textContent,L[a]=L[a]||x,L[r]=L[r]||y.disabled,L[d]=L[d]||A,L.$option=y,L.$order=L.$order||++g,u[x]=L,o.push(L)}y.selected&&C.items.push(x)}},D=y=>{var A,x;x=S(y),x[h]=x[h]||y.getAttribute("label")||"",x[p]=x[p]||l++,x[r]=x[r]||y.disabled,x.$order=x.$order||++g,C.optgroups.push(x),A=x[p],Q(y.children,M=>{E(M,A)})};C.maxItems=n.hasAttribute("multiple")?null:1,Q(n.children,y=>{_=y.tagName.toLowerCase(),_==="optgroup"?D(y):_==="option"&&E(y)})},w=()=>{const _=n.getAttribute(i);if(_)C.options=JSON.parse(_),Q(C.options,u=>{C.items.push(u[a])});else{var o=n.value.trim()||"";if(!e.allowEmptyOption&&!o.length)return;const u=o.split(e.delimiter);Q(u,l=>{const g={};g[s]=l,g[a]=l,C.options.push(g)}),C.items=u}};return m==="select"?T():w(),Object.assign({},Fn,C,t)}var Nn=0;class ne extends Gr(Wr){constructor(t,e){super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,Nn++;var i,s=me(t);if(s.tomselect)throw new Error("Tom Select already initialized on this element");s.tomselect=this;var a=window.getComputedStyle&&window.getComputedStyle(s,null);i=a.getPropertyValue("direction");const r=Pn(s,e);this.settings=r,this.input=s,this.tabIndex=s.tabIndex||0,this.is_select_tag=s.tagName.toLowerCase()==="select",this.rtl=/rtl/i.test(i),this.inputId=Ht(s,"tomselect-"+Nn),this.isRequired=s.required,this.sifter=new ga(this.options,{diacritics:r.diacritics}),r.mode=r.mode||(r.maxItems===1?"single":"multi"),typeof r.hideSelected!="boolean"&&(r.hideSelected=r.mode==="multi"),typeof r.hidePlaceholder!="boolean"&&(r.hidePlaceholder=r.mode!=="multi");var d=r.createFilter;typeof d!="function"&&(typeof d=="string"&&(d=new RegExp(d)),d instanceof RegExp?r.createFilter=o=>d.test(o):r.createFilter=o=>this.settings.duplicates||!this.options[o]),this.initializePlugins(r.plugins),this.setupCallbacks(),this.setupTemplates();const h=me("<div>"),p=me("<div>"),m=this._render("dropdown"),b=me('<div role="listbox" tabindex="-1">'),C=this.input.getAttribute("class")||"",T=r.mode;var w;if(oe(h,r.wrapperClass,C,T),oe(p,r.controlClass),Ae(h,p),oe(m,r.dropdownClass,T),r.copyClassesToDropdown&&oe(m,C),oe(b,r.dropdownContentClass),Ae(m,b),me(r.dropdownParent||h).appendChild(m),si(r.controlInput)){w=me(r.controlInput);var _=["autocorrect","autocapitalize","autocomplete","spellcheck"];Q(_,o=>{s.getAttribute(o)&&q(w,{[o]:s.getAttribute(o)})}),w.tabIndex=-1,p.appendChild(w),this.focus_node=w}else r.controlInput?(w=me(r.controlInput),this.focus_node=w):(w=me("<input/>"),this.focus_node=p);this.wrapper=h,this.dropdown=m,this.dropdown_content=b,this.control=p,this.control_input=w,this.setup()}setup(){const t=this,e=t.settings,i=t.control_input,s=t.dropdown,a=t.dropdown_content,r=t.wrapper,d=t.control,h=t.input,p=t.focus_node,m={passive:!0},b=t.inputId+"-ts-dropdown";q(a,{id:b}),q(p,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":b});const C=Ht(p,t.inputId+"-ts-control"),T="label[for='"+wa(t.inputId)+"']",w=document.querySelector(T),_=t.focus.bind(t);if(w){ee(w,"click",_),q(w,{for:C});const l=Ht(w,t.inputId+"-ts-label");q(p,{"aria-labelledby":l}),q(a,{"aria-labelledby":l})}if(r.style.width=h.style.width,t.plugins.names.length){const l="plugin-"+t.plugins.names.join(" plugin-");oe([r,s],l)}(e.maxItems===null||e.maxItems>1)&&t.is_select_tag&&q(h,{multiple:"multiple"}),e.placeholder&&q(i,{placeholder:e.placeholder}),!e.splitOn&&e.delimiter&&(e.splitOn=new RegExp("\\s*"+je(e.delimiter)+"+\\s*")),e.load&&e.loadThrottle&&(e.load=va(e.load,e.loadThrottle)),ee(s,"mousemove",()=>{t.ignoreHover=!1}),ee(s,"mouseenter",l=>{var g=Vt(l.target,"[data-selectable]",s);g&&t.onOptionHover(l,g)},{capture:!0}),ee(s,"click",l=>{const g=Vt(l.target,"[data-selectable]");g&&(t.onOptionSelect(l,g),K(l,!0))}),ee(d,"click",l=>{var g=Vt(l.target,"[data-ts-item]",d);if(g&&t.onItemSelect(l,g)){K(l,!0);return}i.value==""&&(t.onClick(),K(l,!0))}),ee(p,"keydown",l=>t.onKeyDown(l)),ee(i,"keypress",l=>t.onKeyPress(l)),ee(i,"input",l=>t.onInput(l)),ee(p,"blur",l=>t.onBlur(l)),ee(p,"focus",l=>t.onFocus(l)),ee(i,"paste",l=>t.onPaste(l));const o=l=>{const g=l.composedPath()[0];if(!r.contains(g)&&!s.contains(g)){t.isFocused&&t.blur(),t.inputState();return}g==i&&t.isOpen?l.stopPropagation():K(l,!0)},u=()=>{t.isOpen&&t.positionDropdown()};ee(document,"mousedown",o),ee(window,"scroll",u,m),ee(window,"resize",u,m),this._destroy=()=>{document.removeEventListener("mousedown",o),window.removeEventListener("scroll",u),window.removeEventListener("resize",u),w&&w.removeEventListener("click",_)},this.revertSettings={innerHTML:h.innerHTML,tabIndex:h.tabIndex},h.tabIndex=-1,h.insertAdjacentElement("afterend",t.wrapper),t.sync(!1),e.items=[],delete e.optgroups,delete e.options,ee(h,"invalid",()=>{t.isValid&&(t.isValid=!1,t.isInvalid=!0,t.refreshState())}),t.updateOriginalInput(),t.refreshItems(),t.close(!1),t.inputState(),t.isSetup=!0,h.disabled?t.disable():h.readOnly?t.setReadOnly(!0):t.enable(),t.on("change",this.onChange),oe(h,"tomselected","ts-hidden-accessible"),t.trigger("initialize"),e.preload===!0&&t.preload()}setupOptions(t=[],e=[]){this.addOptions(t),Q(e,i=>{this.registerOptionGroup(i)})}setupTemplates(){var t=this,e=t.settings.labelField,i=t.settings.optgroupLabelField,s={optgroup:a=>{let r=document.createElement("div");return r.className="optgroup",r.appendChild(a.options),r},optgroup_header:(a,r)=>'<div class="optgroup-header">'+r(a[i])+"</div>",option:(a,r)=>"<div>"+r(a[e])+"</div>",item:(a,r)=>"<div>"+r(a[e])+"</div>",option_create:(a,r)=>'<div class="create">Add <strong>'+r(a.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};t.settings.render=Object.assign({},s,t.settings.render)}setupCallbacks(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in i)e=this.settings[i[t]],e&&this.on(t,e)}sync(t=!0){const e=this,i=t?Pn(e.input,{delimiter:e.settings.delimiter}):e.settings;e.setupOptions(i.options,i.optgroups),e.setValue(i.items||[],!0),e.lastQuery=null}onClick(){var t=this;if(t.activeItems.length>0){t.clearActiveItems(),t.focus();return}t.isFocused&&t.isOpen?t.blur():t.focus()}onMouseDown(){}onChange(){jt(this.input,"input"),jt(this.input,"change")}onPaste(t){var e=this;if(e.isInputHidden||e.isLocked){K(t);return}e.settings.splitOn&&setTimeout(()=>{var i=e.inputValue();if(i.match(e.settings.splitOn)){var s=i.trim().split(e.settings.splitOn);Q(s,a=>{ue(a)&&(this.options[a]?e.addItem(a):e.createItem(a))})}},0)}onKeyPress(t){var e=this;if(e.isLocked){K(t);return}var i=String.fromCharCode(t.keyCode||t.which);if(e.settings.create&&e.settings.mode==="multi"&&i===e.settings.delimiter){e.createItem(),K(t);return}}onKeyDown(t){var e=this;if(e.ignoreHover=!0,e.isLocked){t.keyCode!==Tn&&K(t);return}switch(t.keyCode){case Sa:if(_e(et,t)&&e.control_input.value==""){K(t),e.selectAll();return}break;case _a:e.isOpen&&(K(t,!0),e.close()),e.clearActiveItems();return;case ka:if(!e.isOpen&&e.hasOptions)e.open();else if(e.activeOption){let i=e.getAdjacent(e.activeOption,1);i&&e.setActiveOption(i)}K(t);return;case Da:if(e.activeOption){let i=e.getAdjacent(e.activeOption,-1);i&&e.setActiveOption(i)}K(t);return;case xa:e.canSelect(e.activeOption)?(e.onOptionSelect(t,e.activeOption),K(t)):(e.settings.create&&e.createItem()||document.activeElement==e.control_input&&e.isOpen)&&K(t);return;case Aa:e.advanceSelection(-1,t);return;case Ea:e.advanceSelection(1,t);return;case Tn:e.settings.selectOnTab&&(e.canSelect(e.activeOption)&&(e.onOptionSelect(t,e.activeOption),K(t)),e.settings.create&&e.createItem()&&K(t));return;case Mn:case La:e.deleteSelection(t);return}e.isInputHidden&&!_e(et,t)&&K(t)}onInput(t){if(this.isLocked)return;const e=this.inputValue();if(this.lastValue!==e){if(this.lastValue=e,e==""){this._onInput();return}this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=ma(()=>{this.refreshTimeout=null,this._onInput()},this.settings.refreshThrottle)}}_onInput(){const t=this.lastValue;this.settings.shouldLoad.call(this,t)&&this.load(t),this.refreshOptions(),this.trigger("type",t)}onOptionHover(t,e){this.ignoreHover||this.setActiveOption(e,!1)}onFocus(t){var e=this,i=e.isFocused;if(e.isDisabled||e.isReadOnly){e.blur(),K(t);return}e.ignoreFocus||(e.isFocused=!0,e.settings.preload==="focus"&&e.preload(),i||e.trigger("focus"),e.activeItems.length||(e.inputState(),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())}onBlur(t){if(document.hasFocus()!==!1){var e=this;if(e.isFocused){e.isFocused=!1,e.ignoreFocus=!1;var i=()=>{e.close(),e.setActiveItem(),e.setCaret(e.items.length),e.trigger("blur")};e.settings.create&&e.settings.createOnBlur?e.createItem(null,i):i()}}}onOptionSelect(t,e){var i,s=this;e.parentElement&&e.parentElement.matches("[data-disabled]")||(e.classList.contains("create")?s.createItem(null,()=>{s.settings.closeAfterSelect&&s.close()}):(i=e.dataset.value,typeof i<"u"&&(s.lastQuery=null,s.addItem(i),s.settings.closeAfterSelect&&s.close(),!s.settings.hideSelected&&t.type&&/click/.test(t.type)&&s.setActiveOption(e))))}canSelect(t){return!!(this.isOpen&&t&&this.dropdown_content.contains(t))}onItemSelect(t,e){var i=this;return!i.isLocked&&i.settings.mode==="multi"?(K(t),i.setActiveItem(e,t),!0):!1}canLoad(t){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(t))}load(t){const e=this;if(!e.canLoad(t))return;oe(e.wrapper,e.settings.loadingClass),e.loading++;const i=e.loadCallback.bind(e);e.settings.load.call(e,t,i)}loadCallback(t,e){const i=this;i.loading=Math.max(i.loading-1,0),i.lastQuery=null,i.clearActiveOption(),i.setupOptions(t,e),i.refreshOptions(i.isFocused&&!i.isInputHidden),i.loading||ye(i.wrapper,i.settings.loadingClass),i.trigger("load",t,e)}preload(){var t=this.wrapper.classList;t.contains("preloaded")||(t.add("preloaded"),this.load(""))}setTextboxValue(t=""){var e=this.control_input,i=e.value!==t;i&&(e.value=t,jt(e,"update"),this.lastValue=t)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(t,e){var i=e?[]:["change"];En(this,i,()=>{this.clear(e),this.addItems(t,e)})}setMaxItems(t){t===0&&(t=null),this.settings.maxItems=t,this.refreshState()}setActiveItem(t,e){var i=this,s,a,r,d,h,p;if(i.settings.mode!=="single"){if(!t){i.clearActiveItems(),i.isFocused&&i.inputState();return}if(s=e&&e.type.toLowerCase(),s==="click"&&_e("shiftKey",e)&&i.activeItems.length){for(p=i.getLastActive(),r=Array.prototype.indexOf.call(i.control.children,p),d=Array.prototype.indexOf.call(i.control.children,t),r>d&&(h=r,r=d,d=h),a=r;a<=d;a++)t=i.control.children[a],i.activeItems.indexOf(t)===-1&&i.setActiveItemClass(t);K(e)}else s==="click"&&_e(et,e)||s==="keydown"&&_e("shiftKey",e)?t.classList.contains("active")?i.removeActiveItem(t):i.setActiveItemClass(t):(i.clearActiveItems(),i.setActiveItemClass(t));i.inputState(),i.isFocused||i.focus()}}setActiveItemClass(t){const e=this,i=e.control.querySelector(".last-active");i&&ye(i,"last-active"),oe(t,"active last-active"),e.trigger("item_select",t),e.activeItems.indexOf(t)==-1&&e.activeItems.push(t)}removeActiveItem(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),ye(t,"active")}clearActiveItems(){ye(this.activeItems,"active"),this.activeItems=[]}setActiveOption(t,e=!0){t!==this.activeOption&&(this.clearActiveOption(),t&&(this.activeOption=t,q(this.focus_node,{"aria-activedescendant":t.getAttribute("id")}),q(t,{"aria-selected":"true"}),oe(t,"active"),e&&this.scrollToOption(t)))}scrollToOption(t,e){if(!t)return;const i=this.dropdown_content,s=i.clientHeight,a=i.scrollTop||0,r=t.offsetHeight,d=t.getBoundingClientRect().top-i.getBoundingClientRect().top+a;d+r>s+a?this.scroll(d-s+r,e):d<a&&this.scroll(d,e)}scroll(t,e){const i=this.dropdown_content;e&&(i.style.scrollBehavior=e),i.scrollTop=t,i.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(ye(this.activeOption,"active"),q(this.activeOption,{"aria-selected":null})),this.activeOption=null,q(this.focus_node,{"aria-activedescendant":null})}selectAll(){const t=this;if(t.settings.mode==="single")return;const e=t.controlChildren();e.length&&(t.inputState(),t.close(),t.activeItems=e,Q(e,i=>{t.setActiveItemClass(i)}))}inputState(){var t=this;t.control.contains(t.control_input)&&(q(t.control_input,{placeholder:t.settings.placeholder}),t.activeItems.length>0||!t.isFocused&&t.settings.hidePlaceholder&&t.items.length>0?(t.setTextboxValue(),t.isInputHidden=!0):(t.settings.hidePlaceholder&&t.items.length>0&&q(t.control_input,{placeholder:""}),t.isInputHidden=!1),t.wrapper.classList.toggle("input-hidden",t.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var t=this;t.isDisabled||t.isReadOnly||(t.ignoreFocus=!0,t.control_input.offsetWidth?t.control_input.focus():t.focus_node.focus(),setTimeout(()=>{t.ignoreFocus=!1,t.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}getSearchOptions(){var t=this.settings,e=t.sortField;return typeof t.sortField=="string"&&(e=[{field:t.sortField}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}}search(t){var e,i,s=this,a=this.getSearchOptions();if(s.settings.score&&(i=s.settings.score.call(s,t),typeof i!="function"))throw new Error('Tom Select "score" setting must be a function that returns a function');return t!==s.lastQuery?(s.lastQuery=t,e=s.sifter.search(t,Object.assign(a,{score:i})),s.currentResults=e):e=Object.assign({},s.currentResults),s.settings.hideSelected&&(e.items=e.items.filter(r=>{let d=ue(r.id);return!(d&&s.items.indexOf(d)!==-1)})),e}refreshOptions(t=!0){var e,i,s,a,r,d,h,p,m,b;const C={},T=[];var w=this,_=w.inputValue();const o=_===w.lastQuery||_==""&&w.lastQuery==null;var u=w.search(_),l=null,g=w.settings.shouldOpen||!1,S=w.dropdown_content;o&&(l=w.activeOption,l&&(m=l.closest("[data-group]"))),a=u.items.length,typeof w.settings.maxOptions=="number"&&(a=Math.min(a,w.settings.maxOptions)),a>0&&(g=!0);const E=(y,A)=>{let x=C[y];if(x!==void 0){let L=T[x];if(L!==void 0)return[x,L.fragment]}let M=document.createDocumentFragment();return x=T.length,T.push({fragment:M,order:A,optgroup:y}),[x,M]};for(e=0;e<a;e++){let y=u.items[e];if(!y)continue;let A=y.id,x=w.options[A];if(x===void 0)continue;let M=it(A),L=w.getOption(M,!0);for(w.settings.hideSelected||L.classList.toggle("selected",w.items.includes(M)),r=x[w.settings.optgroupField]||"",d=Array.isArray(r)?r:[r],i=0,s=d&&d.length;i<s;i++){r=d[i];let R=x.$order,B=w.optgroups[r];B===void 0?r="":R=B.$order;const[he,fe]=E(r,R);i>0&&(L=L.cloneNode(!0),q(L,{id:x.$id+"-clone-"+i,"aria-selected":null}),L.classList.add("ts-cloned"),ye(L,"active"),w.activeOption&&w.activeOption.dataset.value==A&&m&&m.dataset.group===r.toString()&&(l=L)),fe.appendChild(L),r!=""&&(C[r]=he)}}w.settings.lockOptgroupOrder&&T.sort((y,A)=>y.order-A.order),h=document.createDocumentFragment(),Q(T,y=>{let A=y.fragment,x=y.optgroup;if(!A||!A.children.length)return;let M=w.optgroups[x];if(M!==void 0){let L=document.createDocumentFragment(),R=w.render("optgroup_header",M);Ae(L,R),Ae(L,A);let B=w.render("optgroup",{group:M,options:L});Ae(h,B)}else Ae(h,A)}),S.innerHTML="",Ae(S,h),w.settings.highlight&&(Oa(S),u.query.length&&u.tokens.length&&Q(u.tokens,y=>{Ca(S,y.regex)}));var D=y=>{let A=w.render(y,{input:_});return A&&(g=!0,S.insertBefore(A,S.firstChild)),A};if(w.loading?D("loading"):w.settings.shouldLoad.call(w,_)?u.items.length===0&&D("no_results"):D("not_loading"),p=w.canCreate(_),p&&(b=D("option_create")),w.hasOptions=u.items.length>0||p,g){if(u.items.length>0){if(!l&&w.settings.mode==="single"&&w.items[0]!=null&&(l=w.getOption(w.items[0])),!S.contains(l)){let y=0;b&&!w.settings.addPrecedence&&(y=1),l=w.selectable()[y]}}else b&&(l=b);t&&!w.isOpen&&(w.open(),w.scrollToOption(l,"auto")),w.setActiveOption(l)}else w.clearActiveOption(),t&&w.isOpen&&w.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(t,e=!1){const i=this;if(Array.isArray(t))return i.addOptions(t,e),!1;const s=ue(t[i.settings.valueField]);return s===null||i.options.hasOwnProperty(s)?!1:(t.$order=t.$order||++i.order,t.$id=i.inputId+"-opt-"+t.$order,i.options[s]=t,i.lastQuery=null,e&&(i.userOptions[s]=e,i.trigger("option_add",s,t)),s)}addOptions(t,e=!1){Q(t,i=>{this.addOption(i,e)})}registerOption(t){return this.addOption(t)}registerOptionGroup(t){var e=ue(t[this.settings.optgroupValueField]);return e===null?!1:(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)}addOptionGroup(t,e){var i;e[this.settings.optgroupValueField]=t,(i=this.registerOptionGroup(e))&&this.trigger("optgroup_add",i,e)}removeOptionGroup(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(t,e){const i=this;var s,a;const r=ue(t),d=ue(e[i.settings.valueField]);if(r===null)return;const h=i.options[r];if(h==null)return;if(typeof d!="string")throw new Error("Value must be set in option data");const p=i.getOption(r),m=i.getItem(r);if(e.$order=e.$order||h.$order,delete i.options[r],i.uncacheValue(d),i.options[d]=e,p){if(i.dropdown_content.contains(p)){const b=i._render("option",e);qt(p,b),i.activeOption===p&&i.setActiveOption(b)}p.remove()}m&&(a=i.items.indexOf(r),a!==-1&&i.items.splice(a,1,d),s=i._render("item",e),m.classList.contains("active")&&oe(s,"active"),qt(m,s)),i.lastQuery=null}removeOption(t,e){const i=this;t=it(t),i.uncacheValue(t),delete i.userOptions[t],delete i.options[t],i.lastQuery=null,i.trigger("option_remove",t),i.removeItem(t,e)}clearOptions(t){const e=(t||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();const i={};Q(this.options,(s,a)=>{e(s,a)&&(i[a]=s)}),this.options=this.sifter.items=i,this.lastQuery=null,this.trigger("option_clear")}clearFilter(t,e){return this.items.indexOf(e)>=0}getOption(t,e=!1){const i=ue(t);if(i===null)return null;const s=this.options[i];if(s!=null){if(s.$div)return s.$div;if(e)return this._render("option",s)}return null}getAdjacent(t,e,i="option"){var s=this,a;if(!t)return null;i=="item"?a=s.controlChildren():a=s.dropdown_content.querySelectorAll("[data-selectable]");for(let r=0;r<a.length;r++)if(a[r]==t)return e>0?a[r+1]:a[r-1];return null}getItem(t){if(typeof t=="object")return t;var e=ue(t);return e!==null?this.control.querySelector(`[data-value="${kn(e)}"]`):null}addItems(t,e){var i=this,s=Array.isArray(t)?t:[t];s=s.filter(r=>i.items.indexOf(r)===-1);const a=s[s.length-1];s.forEach(r=>{i.isPending=r!==a,i.addItem(r,e)})}addItem(t,e){var i=e?[]:["change","dropdown_close"];En(this,i,()=>{var s,a;const r=this,d=r.settings.mode,h=ue(t);if(!(h&&r.items.indexOf(h)!==-1&&(d==="single"&&r.close(),d==="single"||!r.settings.duplicates))&&!(h===null||!r.options.hasOwnProperty(h))&&(d==="single"&&r.clear(e),!(d==="multi"&&r.isFull()))){if(s=r._render("item",r.options[h]),r.control.contains(s)&&(s=s.cloneNode(!0)),a=r.isFull(),r.items.splice(r.caretPos,0,h),r.insertAtCaret(s),r.isSetup){if(!r.isPending&&r.settings.hideSelected){let p=r.getOption(h),m=r.getAdjacent(p,1);m&&r.setActiveOption(m)}!r.isPending&&!r.settings.closeAfterSelect&&r.refreshOptions(r.isFocused&&d!=="single"),r.settings.closeAfterSelect!=!1&&r.isFull()?r.close():r.isPending||r.positionDropdown(),r.trigger("item_add",h,s),r.isPending||r.updateOriginalInput({silent:e})}(!r.isPending||!a&&r.isFull())&&(r.inputState(),r.refreshState())}})}removeItem(t=null,e){const i=this;if(t=i.getItem(t),!t)return;var s,a;const r=t.dataset.value;s=In(t),t.remove(),t.classList.contains("active")&&(a=i.activeItems.indexOf(t),i.activeItems.splice(a,1),ye(t,"active")),i.items.splice(s,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(r)&&i.removeOption(r,e),s<i.caretPos&&i.setCaret(i.caretPos-1),i.updateOriginalInput({silent:e}),i.refreshState(),i.positionDropdown(),i.trigger("item_remove",r,t)}createItem(t=null,e=()=>{}){arguments.length===3&&(e=arguments[2]),typeof e!="function"&&(e=()=>{});var i=this,s=i.caretPos,a;if(t=t||i.inputValue(),!i.canCreate(t))return e(),!1;i.lock();var r=!1,d=h=>{if(i.unlock(),!h||typeof h!="object")return e();var p=ue(h[i.settings.valueField]);if(typeof p!="string")return e();i.setTextboxValue(),i.addOption(h,!0),i.setCaret(s),i.addItem(p),e(h),r=!0};return typeof i.settings.create=="function"?a=i.settings.create.call(this,t,d):a={[i.settings.labelField]:t,[i.settings.valueField]:t},r||d(a),!0}refreshItems(){var t=this;t.lastQuery=null,t.isSetup&&t.addItems(t.items),t.updateOriginalInput(),t.refreshState()}refreshState(){const t=this;t.refreshValidityState();const e=t.isFull(),i=t.isLocked;t.wrapper.classList.toggle("rtl",t.rtl);const s=t.wrapper.classList;s.toggle("focus",t.isFocused),s.toggle("disabled",t.isDisabled),s.toggle("readonly",t.isReadOnly),s.toggle("required",t.isRequired),s.toggle("invalid",!t.isValid),s.toggle("locked",i),s.toggle("full",e),s.toggle("input-active",t.isFocused&&!t.isInputHidden),s.toggle("dropdown-active",t.isOpen),s.toggle("has-options",ya(t.options)),s.toggle("has-items",t.items.length>0)}refreshValidityState(){var t=this;t.input.validity&&(t.isValid=t.input.validity.valid,t.isInvalid=!t.isValid)}isFull(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems}updateOriginalInput(t={}){const e=this;var i,s;const a=e.input.querySelector('option[value=""]');if(e.is_select_tag){let p=function(m,b,C){return m||(m=me('<option value="'+$t(b)+'">'+$t(C)+"</option>")),m!=a&&e.input.append(m),d.push(m),(m!=a||h>0)&&(m.selected=!0),m};var r=p;const d=[],h=e.input.querySelectorAll("option:checked").length;e.input.querySelectorAll("option:checked").forEach(m=>{m.selected=!1}),e.items.length==0&&e.settings.mode=="single"?p(a,"",""):e.items.forEach(m=>{if(i=e.options[m],s=i[e.settings.labelField]||"",d.includes(i.$option)){const b=e.input.querySelector(`option[value="${kn(m)}"]:not(:checked)`);p(b,m,s)}else i.$option=p(i.$option,m,s)})}else e.input.value=e.getValue();e.isSetup&&(t.silent||e.trigger("change",e.getValue()))}open(){var t=this;t.isLocked||t.isOpen||t.settings.mode==="multi"&&t.isFull()||(t.isOpen=!0,q(t.focus_node,{"aria-expanded":"true"}),t.refreshState(),Ze(t.dropdown,{visibility:"hidden",display:"block"}),t.positionDropdown(),Ze(t.dropdown,{visibility:"visible",display:"block"}),t.focus(),t.trigger("dropdown_open",t.dropdown))}close(t=!0){var e=this,i=e.isOpen;t&&(e.setTextboxValue(),e.settings.mode==="single"&&e.items.length&&e.inputState()),e.isOpen=!1,q(e.focus_node,{"aria-expanded":"false"}),Ze(e.dropdown,{display:"none"}),e.settings.hideSelected&&e.clearActiveOption(),e.refreshState(),i&&e.trigger("dropdown_close",e.dropdown)}positionDropdown(){if(this.settings.dropdownParent==="body"){var t=this.control,e=t.getBoundingClientRect(),i=t.offsetHeight+e.top+window.scrollY,s=e.left+window.scrollX;Ze(this.dropdown,{width:e.width+"px",top:i+"px",left:s+"px"})}}clear(t){var e=this;if(e.items.length){var i=e.controlChildren();Q(i,s=>{e.removeItem(s,!0)}),e.inputState(),t||e.updateOriginalInput(),e.trigger("clear")}}insertAtCaret(t){const e=this,i=e.caretPos,s=e.control;s.insertBefore(t,s.children[i]||null),e.setCaret(i+1)}deleteSelection(t){var e,i,s,a,r=this;e=t&&t.keyCode===Mn?-1:1,i=ba(r.control_input);const d=[];if(r.activeItems.length)a=Ln(r.activeItems,e),s=In(a),e>0&&s++,Q(r.activeItems,h=>d.push(h));else if((r.isFocused||r.settings.mode==="single")&&r.items.length){const h=r.controlChildren();let p;e<0&&i.start===0&&i.length===0?p=h[r.caretPos-1]:e>0&&i.start===r.inputValue().length&&(p=h[r.caretPos]),p!==void 0&&d.push(p)}if(!r.shouldDelete(d,t))return!1;for(K(t,!0),typeof s<"u"&&r.setCaret(s);d.length;)r.removeItem(d.pop());return r.inputState(),r.positionDropdown(),r.refreshOptions(!1),!0}shouldDelete(t,e){const i=t.map(s=>s.dataset.value);return!(!i.length||typeof this.settings.onDelete=="function"&&this.settings.onDelete(i,e)===!1)}advanceSelection(t,e){var i,s,a=this;a.rtl&&(t*=-1),!a.inputValue().length&&(_e(et,e)||_e("shiftKey",e)?(i=a.getLastActive(t),i?i.classList.contains("active")?s=a.getAdjacent(i,t,"item"):s=i:t>0?s=a.control_input.nextElementSibling:s=a.control_input.previousElementSibling,s&&(s.classList.contains("active")&&a.removeActiveItem(i),a.setActiveItemClass(s))):a.moveCaret(t))}moveCaret(t){}getLastActive(t){let e=this.control.querySelector(".last-active");if(e)return e;var i=this.control.querySelectorAll(".active");if(i)return Ln(i,t)}setCaret(t){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(t=this.isReadOnly||this.isDisabled){this.isLocked=t,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(t){this.focus_node.tabIndex=t?-1:this.tabIndex,this.isDisabled=t,this.input.disabled=t,this.control_input.disabled=t,this.setLocked()}setReadOnly(t){this.isReadOnly=t,this.input.readOnly=t,this.control_input.readOnly=t,this.setLocked()}destroy(){var t=this,e=t.revertSettings;t.trigger("destroy"),t.off(),t.wrapper.remove(),t.dropdown.remove(),t.input.innerHTML=e.innerHTML,t.input.tabIndex=e.tabIndex,ye(t.input,"tomselected","ts-hidden-accessible"),t._destroy(),delete t.input.tomselect}render(t,e){var i,s;const a=this;if(typeof this.settings.render[t]!="function"||(s=a.settings.render[t].call(this,e,$t),!s))return null;if(s=me(s),t==="option"||t==="option_create"?e[a.settings.disabledField]?q(s,{"aria-disabled":"true"}):q(s,{"data-selectable":""}):t==="optgroup"&&(i=e.group[a.settings.optgroupValueField],q(s,{"data-group":i}),e.group[a.settings.disabledField]&&q(s,{"data-disabled":""})),t==="option"||t==="item"){const r=it(e[a.settings.valueField]);q(s,{"data-value":r}),t==="item"?(oe(s,a.settings.itemClass),q(s,{"data-ts-item":""})):(oe(s,a.settings.optionClass),q(s,{role:"option",id:e.$id}),e.$div=s,a.options[r]=e)}return s}_render(t,e){const i=this.render(t,e);if(i==null)throw"HTMLElement expected";return i}clearCache(){Q(this.options,t=>{t.$div&&(t.$div.remove(),delete t.$div)})}uncacheValue(t){const e=this.getOption(t);e&&e.remove()}canCreate(t){return this.settings.create&&t.length>0&&this.settings.createFilter.call(this,t)}hook(t,e,i){var s=this,a=s[e];s[e]=function(){var r,d;return t==="after"&&(r=a.apply(s,arguments)),d=i.apply(s,arguments),t==="instead"?d:(t==="before"&&(r=a.apply(s,arguments)),r)}}}const Ma=(n,t,e,i)=>{n.addEventListener(t,e,i)};function Ta(){Ma(this.input,"change",()=>{this.sync()})}const Fa=n=>typeof n>"u"||n===null?null:Pa(n),Pa=n=>typeof n=="boolean"?n?"1":"0":n+"",$n=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Na=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if($a(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},$a=n=>typeof n=="string"&&n.indexOf("<")>-1;function Ha(n){var t=this,e=t.onOptionSelect;t.settings.hideSelected=!1;const i=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},n);var s=function(d,h){h?(d.checked=!0,i.uncheckedClassNames&&d.classList.remove(...i.uncheckedClassNames),i.checkedClassNames&&d.classList.add(...i.checkedClassNames)):(d.checked=!1,i.checkedClassNames&&d.classList.remove(...i.checkedClassNames),i.uncheckedClassNames&&d.classList.add(...i.uncheckedClassNames))},a=function(d){setTimeout(()=>{var h=d.querySelector("input."+i.className);h instanceof HTMLInputElement&&s(h,d.classList.contains("selected"))},1)};t.hook("after","setupTemplates",()=>{var r=t.settings.render.option;t.settings.render.option=(d,h)=>{var p=Na(r.call(t,d,h)),m=document.createElement("input");i.className&&m.classList.add(i.className),m.addEventListener("click",function(C){$n(C)}),m.type="checkbox";const b=Fa(d[t.settings.valueField]);return s(m,!!(b&&t.items.indexOf(b)>-1)),p.prepend(m),p}}),t.on("item_remove",r=>{var d=t.getOption(r);d&&(d.classList.remove("selected"),a(d))}),t.on("item_add",r=>{var d=t.getOption(r);d&&a(d)}),t.hook("instead","onOptionSelect",(r,d)=>{if(d.classList.contains("selected")){d.classList.remove("selected"),t.removeItem(d.dataset.value),t.refreshOptions(),$n(r,!0);return}e.call(t,r,d),a(d)})}const ja=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Va(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Va=n=>typeof n=="string"&&n.indexOf("<")>-1;function Ra(n){const t=this,e=Object.assign({className:"clear-button",title:"Clear All",html:i=>`<div class="${i.className}" title="${i.title}">&#10799;</div>`},n);t.on("initialize",()=>{var i=ja(e.html(e));i.addEventListener("click",s=>{t.isLocked||(t.clear(),t.settings.mode==="single"&&t.settings.allowEmptyOption&&t.addItem(""),s.preventDefault(),s.stopPropagation())}),t.control.appendChild(i)})}const Ba=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Le=(n,t,e,i)=>{n.addEventListener(t,e,i)},Ya=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},qa=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(za(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},za=n=>typeof n=="string"&&n.indexOf("<")>-1,Ka=(n,t)=>{Ya(t,(e,i)=>{e==null?n.removeAttribute(i):n.setAttribute(i,""+e)})},Ua=(n,t)=>{var e;(e=n.parentNode)==null||e.insertBefore(t,n.nextSibling)},Wa=(n,t)=>{var e;(e=n.parentNode)==null||e.insertBefore(t,n)},Ga=(n,t)=>{do{var e;if(t=(e=t)==null?void 0:e.previousElementSibling,n==t)return!0}while(t&&t.previousElementSibling);return!1};function Qa(){var n=this;if(n.settings.mode!=="multi")return;var t=n.lock,e=n.unlock;let i=!0,s;n.hook("after","setupTemplates",()=>{var a=n.settings.render.item;n.settings.render.item=(r,d)=>{const h=qa(a.call(n,r,d));Ka(h,{draggable:"true"});const p=_=>{i||Ba(_),_.stopPropagation()},m=_=>{s=h,setTimeout(()=>{h.classList.add("ts-dragging")},0)},b=_=>{_.preventDefault(),h.classList.add("ts-drag-over"),T(h,s)},C=()=>{h.classList.remove("ts-drag-over")},T=(_,o)=>{o!==void 0&&(Ga(o,h)?Ua(_,o):Wa(_,o))},w=()=>{var _;document.querySelectorAll(".ts-drag-over").forEach(u=>u.classList.remove("ts-drag-over")),(_=s)==null||_.classList.remove("ts-dragging"),s=void 0;var o=[];n.control.querySelectorAll("[data-value]").forEach(u=>{if(u.dataset.value){let l=u.dataset.value;l&&o.push(l)}}),n.setValue(o)};return Le(h,"mousedown",p),Le(h,"dragstart",m),Le(h,"dragenter",b),Le(h,"dragover",b),Le(h,"dragleave",C),Le(h,"dragend",w),h}}),n.hook("instead","lock",()=>(i=!1,t.call(n))),n.hook("instead","unlock",()=>(i=!0,e.call(n)))}const Ja=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Xa=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Za(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Za=n=>typeof n=="string"&&n.indexOf("<")>-1;function eo(n){const t=this,e=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:i=>'<div class="'+i.headerClass+'"><div class="'+i.titleRowClass+'"><span class="'+i.labelClass+'">'+i.title+'</span><a class="'+i.closeClass+'">&times;</a></div></div>'},n);t.on("initialize",()=>{var i=Xa(e.html(e)),s=i.querySelector("."+e.closeClass);s&&s.addEventListener("click",a=>{Ja(a,!0),t.close()}),t.dropdown.insertBefore(i,t.dropdown.firstChild)})}const to=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},no=(n,...t)=>{var e=io(t);n=so(n),n.map(i=>{e.map(s=>{i.classList.remove(s)})})},io=n=>{var t=[];return to(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},so=n=>(Array.isArray(n)||(n=[n]),n),ro=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e};function ao(){var n=this;n.hook("instead","setCaret",t=>{n.settings.mode==="single"||!n.control.contains(n.control_input)?t=n.items.length:(t=Math.max(0,Math.min(n.items.length,t)),t!=n.caretPos&&!n.isPending&&n.controlChildren().forEach((e,i)=>{i<t?n.control_input.insertAdjacentElement("beforebegin",e):n.control.appendChild(e)})),n.caretPos=t}),n.hook("instead","moveCaret",t=>{if(!n.isFocused)return;const e=n.getLastActive(t);if(e){const i=ro(e);n.setCaret(t>0?i+1:i),n.setActiveItem(),no(e,"last-active")}else n.setCaret(n.caretPos+t)})}const oo=27,lo=9,co=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},uo=(n,t,e,i)=>{n.addEventListener(t,e,i)},ho=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Hn=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(fo(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},fo=n=>typeof n=="string"&&n.indexOf("<")>-1,po=(n,...t)=>{var e=go(t);n=mo(n),n.map(i=>{e.map(s=>{i.classList.add(s)})})},go=n=>{var t=[];return ho(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},mo=n=>(Array.isArray(n)||(n=[n]),n);function vo(){const n=this;n.settings.shouldOpen=!0,n.hook("before","setup",()=>{n.focus_node=n.control,po(n.control_input,"dropdown-input");const t=Hn('<div class="dropdown-input-wrap">');t.append(n.control_input),n.dropdown.insertBefore(t,n.dropdown.firstChild);const e=Hn('<input class="items-placeholder" tabindex="-1" />');e.placeholder=n.settings.placeholder||"",n.control.append(e)}),n.on("initialize",()=>{n.control_input.addEventListener("keydown",e=>{switch(e.keyCode){case oo:n.isOpen&&(co(e,!0),n.close()),n.clearActiveItems();return;case lo:n.focus_node.tabIndex=-1;break}return n.onKeyDown.call(n,e)}),n.on("blur",()=>{n.focus_node.tabIndex=n.isDisabled?-1:n.tabIndex}),n.on("dropdown_open",()=>{n.control_input.focus()});const t=n.onBlur;n.hook("instead","onBlur",e=>{if(!(e&&e.relatedTarget==n.control_input))return t.call(n)}),uo(n.control_input,"blur",()=>n.onBlur()),n.hook("before","close",()=>{n.isOpen&&n.focus_node.focus({preventScroll:!0})})})}const tt=(n,t,e,i)=>{n.addEventListener(t,e,i)};function bo(){var n=this;n.on("initialize",()=>{var t=document.createElement("span"),e=n.control_input;t.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",n.wrapper.appendChild(t);var i=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(const a of i)t.style[a]=e.style[a];var s=()=>{t.textContent=e.value,e.style.width=t.clientWidth+"px"};s(),n.on("update item_add item_remove",s),tt(e,"input",s),tt(e,"keyup",s),tt(e,"blur",s),tt(e,"update",s)})}function wo(){var n=this,t=n.deleteSelection;this.hook("instead","deleteSelection",e=>n.activeItems.length?t.call(n,e):!1)}function yo(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}const jn=37,Co=39,Oo=(n,t,e)=>{for(;n&&n.matches;){if(n.matches(t))return n;n=n.parentNode}},So=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e};function xo(){var n=this,t=n.onKeyDown;n.hook("instead","onKeyDown",e=>{var i,s,a,r;if(!n.isOpen||!(e.keyCode===jn||e.keyCode===Co))return t.call(n,e);n.ignoreHover=!0,r=Oo(n.activeOption,"[data-group]"),i=So(n.activeOption,"[data-selectable]"),r&&(e.keyCode===jn?r=r.previousSibling:r=r.nextSibling,r&&(a=r.querySelectorAll("[data-selectable]"),s=a[Math.min(a.length-1,i)],s&&n.setActiveOption(s)))})}const _o=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Vn=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Rn=(n,t,e,i)=>{n.addEventListener(t,e,i)},Bn=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Ao(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Ao=n=>typeof n=="string"&&n.indexOf("<")>-1;function Do(n){const t=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},n);var e=this;if(t.append){var i='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+_o(t.title)+'">'+t.label+"</a>";e.hook("after","setupTemplates",()=>{var s=e.settings.render.item;e.settings.render.item=(a,r)=>{var d=Bn(s.call(e,a,r)),h=Bn(i);return d.appendChild(h),Rn(h,"mousedown",p=>{Vn(p,!0)}),Rn(h,"click",p=>{e.isLocked||(Vn(p,!0),!e.isLocked&&e.shouldDelete([d],p)&&(e.removeItem(d),e.refreshOptions(!1),e.inputState()))}),d}})}}function Eo(n){const t=this,e=Object.assign({text:i=>i[t.settings.labelField]},n);t.on("item_remove",function(i){if(t.isFocused&&t.control_input.value.trim()===""){var s=t.options[i];s&&t.setTextboxValue(e.text.call(t,s))}})}const ko=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Lo=(n,...t)=>{var e=Io(t);n=Mo(n),n.map(i=>{e.map(s=>{i.classList.add(s)})})},Io=n=>{var t=[];return ko(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},Mo=n=>(Array.isArray(n)||(n=[n]),n);function To(){const n=this,t=n.canLoad,e=n.clearActiveOption,i=n.loadCallback;var s={},a,r=!1,d,h=[];if(n.settings.shouldLoadMore||(n.settings.shouldLoadMore=()=>{if(a.clientHeight/(a.scrollHeight-a.scrollTop)>.9)return!0;if(n.activeOption){var C=n.selectable(),T=Array.from(C).indexOf(n.activeOption);if(T>=C.length-2)return!0}return!1}),!n.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";n.settings.sortField=[{field:"$order"},{field:"$score"}];const p=b=>typeof n.settings.maxOptions=="number"&&a.children.length>=n.settings.maxOptions?!1:!!(b in s&&s[b]),m=(b,C)=>n.items.indexOf(C)>=0||h.indexOf(C)>=0;n.setNextUrl=(b,C)=>{s[b]=C},n.getUrl=b=>{if(b in s){const C=s[b];return s[b]=!1,C}return n.clearPagination(),n.settings.firstUrl.call(n,b)},n.clearPagination=()=>{s={}},n.hook("instead","clearActiveOption",()=>{if(!r)return e.call(n)}),n.hook("instead","canLoad",b=>b in s?p(b):t.call(n,b)),n.hook("instead","loadCallback",(b,C)=>{if(!r)n.clearOptions(m);else if(d){const T=b[0];T!==void 0&&(d.dataset.value=T[n.settings.valueField])}i.call(n,b,C),r=!1}),n.hook("after","refreshOptions",()=>{const b=n.lastValue;var C;p(b)?(C=n.render("loading_more",{query:b}),C&&(C.setAttribute("data-selectable",""),d=C)):b in s&&!a.querySelector(".no-results")&&(C=n.render("no_more_results",{query:b})),C&&(Lo(C,n.settings.optionClass),a.append(C))}),n.on("initialize",()=>{h=Object.keys(n.options),a=n.dropdown_content,n.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},n.settings.render),a.addEventListener("scroll",()=>{n.settings.shouldLoadMore.call(n)&&p(n.lastValue)&&(r||(r=!0,n.load.call(n,n.lastValue)))})})}ne.define("change_listener",Ta);ne.define("checkbox_options",Ha);ne.define("clear_button",Ra);ne.define("drag_drop",Qa);ne.define("dropdown_header",eo);ne.define("caret_position",ao);ne.define("dropdown_input",vo);ne.define("input_autogrow",bo);ne.define("no_backspace_delete",wo);ne.define("no_active_items",yo);ne.define("optgroup_columns",xo);ne.define("remove_button",Do);ne.define("restore_on_backspace",Eo);ne.define("virtual_scroll",To);function Fo(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var st={exports:{}},Po=st.exports,Yn;function No(){return Yn||(Yn=1,function(n,t){(function(e,i){n.exports=i()})(Po,function(){class e{constructor(o){o||(o={}),this.main=o.main||"ss-main",this.placeholder=o.placeholder||"ss-placeholder",this.values=o.values||"ss-values",this.single=o.single||"ss-single",this.max=o.max||"ss-max",this.value=o.value||"ss-value",this.valueText=o.valueText||"ss-value-text",this.valueDelete=o.valueDelete||"ss-value-delete",this.valueOut=o.valueOut||"ss-value-out",this.deselect=o.deselect||"ss-deselect",this.deselectPath=o.deselectPath||"M10,10 L90,90 M10,90 L90,10",this.arrow=o.arrow||"ss-arrow",this.arrowClose=o.arrowClose||"M10,30 L50,70 L90,30",this.arrowOpen=o.arrowOpen||"M10,70 L50,30 L90,70",this.content=o.content||"ss-content",this.openAbove=o.openAbove||"ss-open-above",this.openBelow=o.openBelow||"ss-open-below",this.search=o.search||"ss-search",this.searchHighlighter=o.searchHighlighter||"ss-search-highlight",this.searching=o.searching||"ss-searching",this.addable=o.addable||"ss-addable",this.addablePath=o.addablePath||"M50,10 L50,90 M10,50 L90,50",this.list=o.list||"ss-list",this.optgroup=o.optgroup||"ss-optgroup",this.optgroupLabel=o.optgroupLabel||"ss-optgroup-label",this.optgroupLabelText=o.optgroupLabelText||"ss-optgroup-label-text",this.optgroupActions=o.optgroupActions||"ss-optgroup-actions",this.optgroupSelectAll=o.optgroupSelectAll||"ss-selectall",this.optgroupSelectAllBox=o.optgroupSelectAllBox||"M60,10 L10,10 L10,90 L90,90 L90,50",this.optgroupSelectAllCheck=o.optgroupSelectAllCheck||"M30,45 L50,70 L90,10",this.optgroupClosable=o.optgroupClosable||"ss-closable",this.option=o.option||"ss-option",this.optionDelete=o.optionDelete||"M10,10 L90,90 M10,90 L90,10",this.highlighted=o.highlighted||"ss-highlighted",this.open=o.open||"ss-open",this.close=o.close||"ss-close",this.selected=o.selected||"ss-selected",this.error=o.error||"ss-error",this.disabled=o.disabled||"ss-disabled",this.hide=o.hide||"ss-hide"}}function i(){return Math.random().toString(36).substring(2,10)}function s(_,o){function u(g,S){return S&&g&&g.classList&&g.classList.contains(S)||S&&g&&g.dataset&&g.dataset.id&&g.dataset.id===o?g:null}function l(g,S){return!g||g===document?null:u(g,S)?g:l(g.parentNode,S)}return u(_,o)||l(_,o)}function a(_,o=50,u=!1){let l;return function(...g){const S=self,E=()=>{l=null,u||_.apply(S,g)},D=u&&!l;clearTimeout(l),l=setTimeout(E,o),D&&_.apply(S,g)}}function r(_,o){return JSON.stringify(_)===JSON.stringify(o)}function d(_){const o=_.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,u=>"-"+u.toLowerCase());return _[0]===_[0].toUpperCase()?o.substring(1):o}class h{constructor(o){if(this.id=!o.id||o.id===""?i():o.id,this.label=o.label||"",this.selectAll=o.selectAll===void 0?!1:o.selectAll,this.selectAllText=o.selectAllText||"Select All",this.closable=o.closable||"off",this.options=[],o.options)for(const u of o.options)this.options.push(new p(u))}}class p{constructor(o){this.id=!o.id||o.id===""?i():o.id,this.value=o.value===void 0?o.text:o.value,this.text=o.text||"",this.html=o.html||"",this.selected=o.selected!==void 0?o.selected:!1,this.display=o.display!==void 0?o.display:!0,this.disabled=o.disabled!==void 0?o.disabled:!1,this.mandatory=o.mandatory!==void 0?o.mandatory:!1,this.placeholder=o.placeholder!==void 0?o.placeholder:!1,this.class=o.class||"",this.style=o.style||"",this.data=o.data||{}}}class m{constructor(o,u){this.selectType="single",this.data=[],this.selectedOrder=[],this.selectType=o,this.setData(u)}validateDataArray(o){if(!Array.isArray(o))return new Error("Data must be an array");for(let u of o)if(u instanceof h||"label"in u){if(!("label"in u))return new Error("Optgroup must have a label");if("options"in u&&u.options)for(let l of u.options){const g=this.validateOption(l);if(g)return g}}else if(u instanceof p||"text"in u){const l=this.validateOption(u);if(l)return l}else return new Error("Data object must be a valid optgroup or option");return null}validateOption(o){return"text"in o?null:new Error("Option must have a text")}partialToFullData(o){let u=[];return o.forEach(l=>{if(l instanceof h||"label"in l){let g=[];"options"in l&&l.options&&l.options.forEach(S=>{g.push(new p(S))}),g.length>0&&u.push(new h(l))}(l instanceof p||"text"in l)&&u.push(new p(l))}),u}setData(o){this.data=this.partialToFullData(o),this.selectType==="single"&&this.setSelectedBy("id",this.getSelected())}getData(){return this.filter(null,!0)}getDataOptions(){return this.filter(null,!1)}addOption(o,u=!1){if(u){let l=[new p(o)];this.setData(l.concat(this.getData()))}else this.setData(this.getData().concat(new p(o)))}setSelectedBy(o,u){let l=null,g=!1;const S=[];for(let D of this.data){if(D instanceof h)for(let y of D.options)l||(l=y),y.selected=g?!1:u.includes(y[o]),y.selected&&(S.push(y),this.selectType==="single"&&(g=!0));D instanceof p&&(l||(l=D),D.selected=g?!1:u.includes(D[o]),D.selected&&(S.push(D),this.selectType==="single"&&(g=!0)))}this.selectType==="single"&&l&&!g&&(l.selected=!0,S.push(l));const E=u.map(D=>{var y;return((y=S.find(A=>A[o]===D))===null||y===void 0?void 0:y.id)||""});this.selectedOrder=E}getSelected(){return this.getSelectedOptions().map(o=>o.id)}getSelectedValues(){return this.getSelectedOptions().map(o=>o.value)}getSelectedOptions(){return this.filter(o=>o.selected,!1)}getOptgroupByID(o){for(let u of this.data)if(u instanceof h&&u.id===o)return u;return null}getOptionByID(o){let u=this.filter(l=>l.id===o,!1);return u.length?u[0]:null}getSelectType(){return this.selectType}getFirstOption(){let o=null;for(let u of this.data)if(u instanceof h?o=u.options[0]:u instanceof p&&(o=u),o)break;return o}search(o,u){return o=o.trim(),o===""?this.getData():this.filter(l=>u(l,o),!0)}filter(o,u){const l=[];return this.data.forEach(g=>{if(g instanceof h){let S=[];if(g.options.forEach(E=>{(!o||o(E))&&(u?S.push(new p(E)):l.push(new p(E)))}),S.length>0){let E=new h(g);E.options=S,l.push(E)}}g instanceof p&&(!o||o(g))&&l.push(new p(g))}),l}selectedOrderOptions(o){const u=[];return this.selectedOrder.forEach(l=>{const g=o.find(S=>S.id===l);g&&u.push(g)}),o.forEach(l=>{let g=!1;u.forEach(S=>{if(l.id===S.id){g=!0;return}}),g||u.push(l)}),u}}class b{constructor(o,u,l,g){this.store=l,this.settings=o,this.classes=u,this.callbacks=g,this.main=this.mainDiv(),this.content=this.contentDiv(),this.updateClassStyles(),this.updateAriaAttributes(),this.settings.contentLocation&&this.settings.contentLocation.appendChild(this.content.main)}enable(){this.main.main.classList.remove(this.classes.disabled),this.content.search.input.disabled=!1}disable(){this.main.main.classList.add(this.classes.disabled),this.content.search.input.disabled=!0}open(){this.main.arrow.path.setAttribute("d",this.classes.arrowOpen),this.main.main.classList.add(this.settings.openPosition==="up"?this.classes.openAbove:this.classes.openBelow),this.main.main.setAttribute("aria-expanded","true"),this.moveContent();const o=this.store.getSelectedOptions();if(o.length){const u=o[o.length-1].id,l=this.content.list.querySelector('[data-id="'+u+'"]');l&&this.ensureElementInView(this.content.list,l)}}close(){this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.remove(this.classes.openBelow),this.main.main.setAttribute("aria-expanded","false"),this.content.main.classList.remove(this.classes.openAbove),this.content.main.classList.remove(this.classes.openBelow),this.main.arrow.path.setAttribute("d",this.classes.arrowClose)}updateClassStyles(){if(this.main.main.className="",this.main.main.removeAttribute("style"),this.content.main.className="",this.content.main.removeAttribute("style"),this.main.main.classList.add(this.classes.main),this.content.main.classList.add(this.classes.content),this.settings.style!==""&&(this.main.main.style.cssText=this.settings.style,this.content.main.style.cssText=this.settings.style),this.settings.class.length)for(const o of this.settings.class)o.trim()!==""&&(this.main.main.classList.add(o.trim()),this.content.main.classList.add(o.trim()));(this.settings.contentPosition==="relative"||this.settings.contentPosition==="fixed")&&this.content.main.classList.add("ss-"+this.settings.contentPosition)}updateAriaAttributes(){this.main.main.role="combobox",this.main.main.setAttribute("aria-haspopup","listbox"),this.main.main.setAttribute("aria-controls",this.content.main.id),this.main.main.setAttribute("aria-expanded","false"),this.content.main.setAttribute("role","listbox")}mainDiv(){var o;const u=document.createElement("div");u.dataset.id=this.settings.id,u.setAttribute("aria-label",this.settings.ariaLabel),u.tabIndex=0,u.onkeydown=x=>{switch(x.key){case"ArrowUp":case"ArrowDown":return this.callbacks.open(),x.key==="ArrowDown"?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Enter":case" ":this.callbacks.open();const M=this.content.list.querySelector("."+this.classes.highlighted);return M&&M.click(),!1;case"Escape":return this.callbacks.close(),!1}return x.key.length===1&&this.callbacks.open(),!0},u.onclick=x=>{this.settings.disabled||(this.settings.isOpen?this.callbacks.close():this.callbacks.open())};const l=document.createElement("div");l.classList.add(this.classes.values),u.appendChild(l);const g=document.createElement("div");g.classList.add(this.classes.deselect);const S=(o=this.store)===null||o===void 0?void 0:o.getSelectedOptions();!this.settings.allowDeselect||this.settings.isMultiple&&S&&S.length<=0?g.classList.add(this.classes.hide):g.classList.remove(this.classes.hide),g.onclick=x=>{if(x.stopPropagation(),this.settings.disabled)return;let M=!0;const L=this.store.getSelectedOptions(),R=[];if(this.callbacks.beforeChange&&(M=this.callbacks.beforeChange(R,L)===!0),M){if(this.settings.isMultiple)this.callbacks.setSelected([],!1),this.updateDeselectAll();else{const B=this.store.getFirstOption(),he=B?B.id:"";this.callbacks.setSelected(he,!1)}this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(this.store.getSelectedOptions())}};const E=document.createElementNS("http://www.w3.org/2000/svg","svg");E.setAttribute("viewBox","0 0 100 100");const D=document.createElementNS("http://www.w3.org/2000/svg","path");D.setAttribute("d",this.classes.deselectPath),E.appendChild(D),g.appendChild(E),u.appendChild(g);const y=document.createElementNS("http://www.w3.org/2000/svg","svg");y.classList.add(this.classes.arrow),y.setAttribute("viewBox","0 0 100 100");const A=document.createElementNS("http://www.w3.org/2000/svg","path");return A.setAttribute("d",this.classes.arrowClose),this.settings.alwaysOpen&&y.classList.add(this.classes.hide),y.appendChild(A),u.appendChild(y),{main:u,values:l,deselect:{main:g,svg:E,path:D},arrow:{main:y,path:A}}}mainFocus(o){o!=="click"&&this.main.main.focus({preventScroll:!0})}placeholder(){const o=this.store.filter(g=>g.placeholder,!1);let u=this.settings.placeholderText;o.length&&(o[0].html!==""?u=o[0].html:o[0].text!==""&&(u=o[0].text));const l=document.createElement("div");return l.classList.add(this.classes.placeholder),l.innerHTML=u,l}renderValues(){if(!this.settings.isMultiple){this.renderSingleValue();return}this.renderMultipleValues(),this.updateDeselectAll()}renderSingleValue(){const o=this.store.filter(l=>l.selected&&!l.placeholder,!1),u=o.length>0?o[0]:null;if(!u)this.main.values.innerHTML=this.placeholder().outerHTML;else{const l=document.createElement("div");l.classList.add(this.classes.single),u.html?l.innerHTML=u.html:l.innerText=u.text,this.main.values.innerHTML=l.outerHTML}!this.settings.allowDeselect||!o.length?this.main.deselect.main.classList.add(this.classes.hide):this.main.deselect.main.classList.remove(this.classes.hide)}renderMultipleValues(){let o=this.main.values.childNodes,u=this.store.filter(g=>g.selected&&g.display,!1);if(u.length===0){this.main.values.innerHTML=this.placeholder().outerHTML;return}else{const g=this.main.values.querySelector("."+this.classes.placeholder);g&&g.remove()}if(u.length>this.settings.maxValuesShown){const g=document.createElement("div");g.classList.add(this.classes.max),g.textContent=this.settings.maxValuesMessage.replace("{number}",u.length.toString()),this.main.values.innerHTML=g.outerHTML;return}else{const g=this.main.values.querySelector("."+this.classes.max);g&&g.remove()}this.settings.keepOrder&&(u=this.store.selectedOrderOptions(u));let l=[];for(let g=0;g<o.length;g++){const S=o[g],E=S.getAttribute("data-id");E&&(u.filter(y=>y.id===E,!1).length||l.push(S))}for(const g of l)g.classList.add(this.classes.valueOut),setTimeout(()=>{this.main.values.hasChildNodes()&&this.main.values.contains(g)&&this.main.values.removeChild(g)},100);o=this.main.values.childNodes;for(let g=0;g<u.length;g++){let S=!0;for(let E=0;E<o.length;E++)u[g].id===String(o[E].dataset.id)&&(S=!1);S&&(this.settings.keepOrder?this.main.values.appendChild(this.multipleValue(u[g])):o.length===0?this.main.values.appendChild(this.multipleValue(u[g])):g===0?this.main.values.insertBefore(this.multipleValue(u[g]),o[g]):o[g-1].insertAdjacentElement("afterend",this.multipleValue(u[g])))}}multipleValue(o){const u=document.createElement("div");u.classList.add(this.classes.value),u.dataset.id=o.id;const l=document.createElement("div");if(l.classList.add(this.classes.valueText),l.textContent=o.text,u.appendChild(l),!o.mandatory){const g=document.createElement("div");g.classList.add(this.classes.valueDelete),g.onclick=D=>{if(D.preventDefault(),D.stopPropagation(),this.settings.disabled)return;let y=!0;const A=this.store.getSelectedOptions(),x=A.filter(M=>M.selected&&M.id!==o.id,!0);if(!(this.settings.minSelected&&x.length<this.settings.minSelected)&&(this.callbacks.beforeChange&&(y=this.callbacks.beforeChange(x,A)===!0),y)){let M=[];for(const L of x){if(L instanceof h)for(const R of L.options)M.push(R.id);L instanceof p&&M.push(L.id)}this.callbacks.setSelected(M,!1),this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(x),this.updateDeselectAll()}};const S=document.createElementNS("http://www.w3.org/2000/svg","svg");S.setAttribute("viewBox","0 0 100 100");const E=document.createElementNS("http://www.w3.org/2000/svg","path");E.setAttribute("d",this.classes.optionDelete),S.appendChild(E),g.appendChild(S),u.appendChild(g)}return u}contentDiv(){const o=document.createElement("div");o.dataset.id=this.settings.id;const u=this.searchDiv();o.appendChild(u.main);const l=this.listDiv();return o.appendChild(l),{main:o,search:u,list:l}}moveContent(){if(this.settings.contentPosition==="relative"){this.moveContentBelow();return}if(this.settings.openPosition==="down"){this.moveContentBelow();return}else if(this.settings.openPosition==="up"){this.moveContentAbove();return}this.putContent()==="up"?this.moveContentAbove():this.moveContentBelow()}searchDiv(){const o=document.createElement("div"),u=document.createElement("input"),l=document.createElement("div");o.classList.add(this.classes.search);const g={main:o,input:u};if(this.settings.showSearch||(o.classList.add(this.classes.hide),u.readOnly=!0),u.type="search",u.placeholder=this.settings.searchPlaceholder,u.tabIndex=-1,u.setAttribute("aria-label",this.settings.searchPlaceholder),u.setAttribute("autocapitalize","off"),u.setAttribute("autocomplete","off"),u.setAttribute("autocorrect","off"),u.oninput=a(S=>{this.callbacks.search(S.target.value)},100),u.onkeydown=S=>{switch(S.key){case"ArrowUp":case"ArrowDown":return S.key==="ArrowDown"?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Escape":return this.callbacks.close(),!1;case" ":const E=this.content.list.querySelector("."+this.classes.highlighted);return E?(E.click(),!1):!0;case"Enter":if(this.callbacks.addable)return l.click(),!1;{const D=this.content.list.querySelector("."+this.classes.highlighted);if(D)return D.click(),!1}return!0}return!0},o.appendChild(u),this.callbacks.addable){l.classList.add(this.classes.addable);const S=document.createElementNS("http://www.w3.org/2000/svg","svg");S.setAttribute("viewBox","0 0 100 100");const E=document.createElementNS("http://www.w3.org/2000/svg","path");E.setAttribute("d",this.classes.addablePath),S.appendChild(E),l.appendChild(S),l.onclick=D=>{if(D.preventDefault(),D.stopPropagation(),!this.callbacks.addable)return;const y=this.content.search.input.value.trim();if(y===""){this.content.search.input.focus();return}const A=M=>{let L=new p(M);if(this.callbacks.addOption(L),this.settings.isMultiple){let R=this.store.getSelected();R.push(L.id),this.callbacks.setSelected(R,!0)}else this.callbacks.setSelected([L.id],!0);this.callbacks.search(""),this.settings.closeOnSelect&&setTimeout(()=>{this.callbacks.close()},100)},x=this.callbacks.addable(y);x===!1||x===void 0||x===null||(x instanceof Promise?x.then(M=>{typeof M=="string"?A({text:M,value:M}):x instanceof Error?this.renderError(x.message):A(M)}):typeof x=="string"?A({text:x,value:x}):x instanceof Error?this.renderError(x.message):A(x))},o.appendChild(l),g.addable={main:l,svg:S,path:E}}return g}searchFocus(){this.content.search.input.focus()}getOptions(o=!1,u=!1,l=!1){let g="."+this.classes.option;return o&&(g+=":not(."+this.classes.placeholder+")"),u&&(g+=":not(."+this.classes.disabled+")"),l&&(g+=":not(."+this.classes.hide+")"),Array.from(this.content.list.querySelectorAll(g))}highlight(o){const u=this.getOptions(!0,!0,!0);if(u.length===0)return;if(u.length===1&&!u[0].classList.contains(this.classes.highlighted)){u[0].classList.add(this.classes.highlighted);return}let l=!1;for(const g of u)g.classList.contains(this.classes.highlighted)&&(l=!0);if(!l){for(const g of u)if(g.classList.contains(this.classes.selected)){g.classList.add(this.classes.highlighted);break}}for(let g=0;g<u.length;g++)if(u[g].classList.contains(this.classes.highlighted)){const S=u[g];S.classList.remove(this.classes.highlighted);const E=S.parentElement;if(E&&E.classList.contains(this.classes.open)){const A=E.querySelector("."+this.classes.optgroupLabel);A&&A.click()}let D=u[o==="down"?g+1<u.length?g+1:0:g-1>=0?g-1:u.length-1];D.classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,D);const y=D.parentElement;if(y&&y.classList.contains(this.classes.close)){const A=y.querySelector("."+this.classes.optgroupLabel);A&&A.click()}return}u[o==="down"?0:u.length-1].classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,u[o==="down"?0:u.length-1])}listDiv(){const o=document.createElement("div");return o.classList.add(this.classes.list),o}renderError(o){this.content.list.innerHTML="";const u=document.createElement("div");u.classList.add(this.classes.error),u.textContent=o,this.content.list.appendChild(u)}renderSearching(){this.content.list.innerHTML="";const o=document.createElement("div");o.classList.add(this.classes.searching),o.textContent=this.settings.searchingText,this.content.list.appendChild(o)}renderOptions(o){if(this.content.list.innerHTML="",o.length===0){const l=document.createElement("div");l.classList.add(this.classes.search),this.callbacks.addable?l.innerHTML=this.settings.addableText.replace("{value}",this.content.search.input.value):l.innerHTML=this.settings.searchText,this.content.list.appendChild(l);return}this.settings.allowDeselect&&!this.settings.isMultiple&&(this.store.filter(g=>g.placeholder,!1).length||this.store.addOption(new p({text:"",value:"",selected:!1,placeholder:!0}),!0));const u=document.createDocumentFragment();for(const l of o){if(l instanceof h){const g=document.createElement("div");g.classList.add(this.classes.optgroup);const S=document.createElement("div");S.classList.add(this.classes.optgroupLabel),g.appendChild(S);const E=document.createElement("div");E.classList.add(this.classes.optgroupLabelText),E.textContent=l.label,S.appendChild(E);const D=document.createElement("div");if(D.classList.add(this.classes.optgroupActions),S.appendChild(D),this.settings.isMultiple&&l.selectAll){const y=document.createElement("div");y.classList.add(this.classes.optgroupSelectAll);let A=!0;for(const B of l.options)if(!B.selected){A=!1;break}A&&y.classList.add(this.classes.selected);const x=document.createElement("span");x.textContent=l.selectAllText,y.appendChild(x);const M=document.createElementNS("http://www.w3.org/2000/svg","svg");M.setAttribute("viewBox","0 0 100 100"),y.appendChild(M);const L=document.createElementNS("http://www.w3.org/2000/svg","path");L.setAttribute("d",this.classes.optgroupSelectAllBox),M.appendChild(L);const R=document.createElementNS("http://www.w3.org/2000/svg","path");R.setAttribute("d",this.classes.optgroupSelectAllCheck),M.appendChild(R),y.addEventListener("click",B=>{B.preventDefault(),B.stopPropagation();const he=this.store.getSelected();if(A){const fe=he.filter(be=>{for(const pt of l.options)if(be===pt.id)return!1;return!0});this.callbacks.setSelected(fe,!0);return}else{const fe=he.concat(l.options.map(be=>be.id));for(const be of l.options)this.store.getOptionByID(be.id)||this.callbacks.addOption(be);this.callbacks.setSelected(fe,!0);return}}),D.appendChild(y)}if(l.closable!=="off"){const y=document.createElement("div");y.classList.add(this.classes.optgroupClosable);const A=document.createElementNS("http://www.w3.org/2000/svg","svg");A.setAttribute("viewBox","0 0 100 100"),A.classList.add(this.classes.arrow),y.appendChild(A);const x=document.createElementNS("http://www.w3.org/2000/svg","path");A.appendChild(x),l.options.some(M=>M.selected)||this.content.search.input.value.trim()!==""?(y.classList.add(this.classes.open),x.setAttribute("d",this.classes.arrowOpen)):l.closable==="open"?(g.classList.add(this.classes.open),x.setAttribute("d",this.classes.arrowOpen)):l.closable==="close"&&(g.classList.add(this.classes.close),x.setAttribute("d",this.classes.arrowClose)),S.addEventListener("click",M=>{M.preventDefault(),M.stopPropagation(),g.classList.contains(this.classes.close)?(g.classList.remove(this.classes.close),g.classList.add(this.classes.open),x.setAttribute("d",this.classes.arrowOpen)):(g.classList.remove(this.classes.open),g.classList.add(this.classes.close),x.setAttribute("d",this.classes.arrowClose))}),D.appendChild(y)}g.appendChild(S);for(const y of l.options)g.appendChild(this.option(y)),u.appendChild(g)}l instanceof p&&u.appendChild(this.option(l))}this.content.list.appendChild(u)}option(o){if(o.placeholder){const l=document.createElement("div");return l.classList.add(this.classes.option),l.classList.add(this.classes.hide),l}const u=document.createElement("div");return u.dataset.id=o.id,u.classList.add(this.classes.option),u.setAttribute("role","option"),o.class&&o.class.split(" ").forEach(l=>{u.classList.add(l)}),o.style&&(u.style.cssText=o.style),this.settings.searchHighlight&&this.content.search.input.value.trim()!==""?u.innerHTML=this.highlightText(o.html!==""?o.html:o.text,this.content.search.input.value,this.classes.searchHighlighter):o.html!==""?u.innerHTML=o.html:u.textContent=o.text,this.settings.showOptionTooltips&&u.textContent&&u.setAttribute("title",u.textContent),o.display||u.classList.add(this.classes.hide),o.disabled&&u.classList.add(this.classes.disabled),o.selected&&this.settings.hideSelected&&u.classList.add(this.classes.hide),o.selected?(u.classList.add(this.classes.selected),u.setAttribute("aria-selected","true"),this.main.main.setAttribute("aria-activedescendant",u.id)):(u.classList.remove(this.classes.selected),u.setAttribute("aria-selected","false")),u.addEventListener("click",l=>{l.preventDefault(),l.stopPropagation();const g=this.store.getSelected(),S=l.currentTarget,E=String(S.dataset.id);if(o.disabled||o.selected&&!this.settings.allowDeselect||this.settings.isMultiple&&this.settings.maxSelected<=g.length&&!o.selected||this.settings.isMultiple&&this.settings.minSelected>=g.length&&o.selected)return;let D=!1;const y=this.store.getSelectedOptions();let A=[];this.settings.isMultiple&&(o.selected?A=y.filter(x=>x.id!==E):A=y.concat(o)),this.settings.isMultiple||(o.selected?A=[]:A=[o]),this.callbacks.beforeChange||(D=!0),this.callbacks.beforeChange&&(this.callbacks.beforeChange(A,y)===!1?D=!1:D=!0),D&&(this.store.getOptionByID(E)||this.callbacks.addOption(o),this.callbacks.setSelected(A.map(x=>x.id),!1),this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(A))}),u}destroy(){this.main.main.remove(),this.content.main.remove()}highlightText(o,u,l){let g=o;const S=new RegExp("(?![^<]*>)("+u.trim()+")(?![^<]*>[^<>]*</)","i");if(!o.match(S))return o;const E=o.match(S).index,D=E+o.match(S)[0].toString().length,y=o.substring(E,D);return g=g.replace(S,`<mark class="${l}">${y}</mark>`),g}moveContentAbove(){const o=this.main.main.offsetHeight,u=this.content.main.offsetHeight;this.main.main.classList.remove(this.classes.openBelow),this.main.main.classList.add(this.classes.openAbove),this.content.main.classList.remove(this.classes.openBelow),this.content.main.classList.add(this.classes.openAbove);const l=this.main.main.getBoundingClientRect();this.content.main.style.margin="-"+(o+u-1)+"px 0px 0px 0px",this.content.main.style.top=l.top+l.height+(this.settings.contentPosition==="fixed"?0:window.scrollY)+"px",this.content.main.style.left=l.left+(this.settings.contentPosition==="fixed"?0:window.scrollX)+"px",this.content.main.style.width=l.width+"px"}moveContentBelow(){this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.add(this.classes.openBelow),this.content.main.classList.remove(this.classes.openAbove),this.content.main.classList.add(this.classes.openBelow);const o=this.main.main.getBoundingClientRect();this.content.main.style.margin="-1px 0px 0px 0px",this.settings.contentPosition!=="relative"&&(this.content.main.style.top=o.top+o.height+(this.settings.contentPosition==="fixed"?0:window.scrollY)+"px",this.content.main.style.left=o.left+(this.settings.contentPosition==="fixed"?0:window.scrollX)+"px",this.content.main.style.width=o.width+"px")}ensureElementInView(o,u){const l=o.scrollTop+o.offsetTop,g=l+o.clientHeight,S=u.offsetTop,E=S+u.clientHeight;S<l?o.scrollTop-=l-S:E>g&&(o.scrollTop+=E-g)}putContent(){const o=this.main.main.offsetHeight,u=this.main.main.getBoundingClientRect(),l=this.content.main.offsetHeight;return window.innerHeight-(u.top+o)<=l&&u.top>l?"up":"down"}updateDeselectAll(){if(!this.store||!this.settings)return;const o=this.store.getSelectedOptions(),u=o&&o.length>0,l=this.settings.isMultiple,g=this.settings.allowDeselect,S=this.main.deselect.main,E=this.classes.hide;g&&!(l&&!u)?S.classList.remove(E):S.classList.add(E)}}class C{constructor(o){this.listen=!1,this.observer=null,this.select=o,this.valueChange=this.valueChange.bind(this),this.select.addEventListener("change",this.valueChange,{passive:!0}),this.observer=new MutationObserver(this.observeCall.bind(this)),this.changeListen(!0)}enable(){this.select.disabled=!1}disable(){this.select.disabled=!0}hideUI(){this.select.tabIndex=-1,this.select.style.display="none",this.select.setAttribute("aria-hidden","true")}showUI(){this.select.removeAttribute("tabindex"),this.select.style.display="",this.select.removeAttribute("aria-hidden")}changeListen(o){this.listen=o,o&&this.observer&&this.observer.observe(this.select,{subtree:!0,childList:!0,attributes:!0}),o||this.observer&&this.observer.disconnect()}valueChange(o){return this.listen&&this.onValueChange&&this.onValueChange(this.getSelectedOptions()),!0}observeCall(o){if(!this.listen)return;let u=!1,l=!1,g=!1;for(const S of o){if(S.target===this.select&&(S.attributeName==="disabled"&&(l=!0),S.attributeName==="class"&&(u=!0),S.type==="childList")){for(const E of S.addedNodes)if(E.nodeName==="OPTION"&&E.value===this.select.value){this.select.dispatchEvent(new Event("change"));break}g=!0}(S.target.nodeName==="OPTGROUP"||S.target.nodeName==="OPTION")&&(g=!0)}u&&this.onClassChange&&this.onClassChange(this.select.className.split(" ")),l&&this.onDisabledChange&&(this.changeListen(!1),this.onDisabledChange(this.select.disabled),this.changeListen(!0)),g&&this.onOptionsChange&&(this.changeListen(!1),this.onOptionsChange(this.getData()),this.changeListen(!0))}getData(){let o=[];const u=this.select.childNodes;for(const l of u)l.nodeName==="OPTGROUP"&&o.push(this.getDataFromOptgroup(l)),l.nodeName==="OPTION"&&o.push(this.getDataFromOption(l));return o}getDataFromOptgroup(o){let u={id:o.id,label:o.label,selectAll:o.dataset?o.dataset.selectall==="true":!1,selectAllText:o.dataset?o.dataset.selectalltext:"Select all",closable:o.dataset?o.dataset.closable:"off",options:[]};const l=o.childNodes;for(const g of l)g.nodeName==="OPTION"&&u.options.push(this.getDataFromOption(g));return u}getDataFromOption(o){return{id:o.id,value:o.value,text:o.text,html:o.dataset&&o.dataset.html?o.dataset.html:"",selected:o.selected,display:o.style.display!=="none",disabled:o.disabled,mandatory:o.dataset?o.dataset.mandatory==="true":!1,placeholder:o.dataset.placeholder==="true",class:o.className,style:o.style.cssText,data:o.dataset}}getSelectedOptions(){let o=[];const u=this.select.childNodes;for(const l of u){if(l.nodeName==="OPTGROUP"){const g=l.childNodes;for(const S of g)if(S.nodeName==="OPTION"){const E=S;E.selected&&o.push(this.getDataFromOption(E))}}if(l.nodeName==="OPTION"){const g=l;g.selected&&o.push(this.getDataFromOption(g))}}return o}getSelectedValues(){return this.getSelectedOptions().map(o=>o.value)}setSelected(o){this.changeListen(!1);const u=this.select.childNodes;for(const l of u){if(l.nodeName==="OPTGROUP"){const S=l.childNodes;for(const E of S)if(E.nodeName==="OPTION"){const D=E;D.selected=o.includes(D.id)}}if(l.nodeName==="OPTION"){const g=l;g.selected=o.includes(g.id)}}this.changeListen(!0)}setSelectedByValue(o){this.changeListen(!1);const u=this.select.childNodes;for(const l of u){if(l.nodeName==="OPTGROUP"){const S=l.childNodes;for(const E of S)if(E.nodeName==="OPTION"){const D=E;D.selected=o.includes(D.value)}}if(l.nodeName==="OPTION"){const g=l;g.selected=o.includes(g.value)}}this.changeListen(!0)}updateSelect(o,u,l){this.changeListen(!1),o&&(this.select.dataset.id=o),u&&(this.select.style.cssText=u),l&&(this.select.className="",l.forEach(g=>{g.trim()!==""&&this.select.classList.add(g.trim())})),this.changeListen(!0)}updateOptions(o){this.changeListen(!1),this.select.innerHTML="";for(const u of o)u instanceof h&&this.select.appendChild(this.createOptgroup(u)),u instanceof p&&this.select.appendChild(this.createOption(u));this.select.dispatchEvent(new Event("change",{bubbles:!0})),this.changeListen(!0)}createOptgroup(o){const u=document.createElement("optgroup");if(u.id=o.id,u.label=o.label,o.selectAll&&(u.dataset.selectAll="true"),o.closable!=="off"&&(u.dataset.closable=o.closable),o.options)for(const l of o.options)u.appendChild(this.createOption(l));return u}createOption(o){const u=document.createElement("option");return u.id=o.id,u.value=o.value,u.textContent=o.text,o.html!==""&&u.setAttribute("data-html",o.html),o.selected&&(u.selected=o.selected),o.disabled&&(u.disabled=!0),o.display||(u.style.display="none"),o.placeholder&&u.setAttribute("data-placeholder","true"),o.mandatory&&u.setAttribute("data-mandatory","true"),o.class&&o.class.split(" ").forEach(l=>{u.classList.add(l)}),o.data&&typeof o.data=="object"&&Object.keys(o.data).forEach(l=>{u.setAttribute("data-"+d(l),o.data[l])}),u}destroy(){this.changeListen(!1),this.select.removeEventListener("change",this.valueChange),this.observer&&(this.observer.disconnect(),this.observer=null),delete this.select.dataset.id,this.showUI()}}class T{constructor(o){this.id="",this.style="",this.class=[],this.isMultiple=!1,this.isOpen=!1,this.isFullOpen=!1,this.intervalMove=null,o||(o={}),this.id="ss-"+i(),this.style=o.style||"",this.class=o.class||[],this.disabled=o.disabled!==void 0?o.disabled:!1,this.alwaysOpen=o.alwaysOpen!==void 0?o.alwaysOpen:!1,this.showSearch=o.showSearch!==void 0?o.showSearch:!0,this.focusSearch=o.focusSearch!==void 0?o.focusSearch:!0,this.ariaLabel=o.ariaLabel||"Combobox",this.searchPlaceholder=o.searchPlaceholder||"Search",this.searchText=o.searchText||"No Results",this.searchingText=o.searchingText||"Searching...",this.searchHighlight=o.searchHighlight!==void 0?o.searchHighlight:!1,this.closeOnSelect=o.closeOnSelect!==void 0?o.closeOnSelect:!0,this.contentLocation=o.contentLocation||document.body,this.contentPosition=o.contentPosition||"absolute",this.openPosition=o.openPosition||"auto",this.placeholderText=o.placeholderText!==void 0?o.placeholderText:"Select Value",this.allowDeselect=o.allowDeselect!==void 0?o.allowDeselect:!1,this.hideSelected=o.hideSelected!==void 0?o.hideSelected:!1,this.keepOrder=o.keepOrder!==void 0?o.keepOrder:!1,this.showOptionTooltips=o.showOptionTooltips!==void 0?o.showOptionTooltips:!1,this.minSelected=o.minSelected||0,this.maxSelected=o.maxSelected||1e3,this.timeoutDelay=o.timeoutDelay||200,this.maxValuesShown=o.maxValuesShown||20,this.maxValuesMessage=o.maxValuesMessage||"{number} selected",this.addableText=o.addableText||'Press "Enter" to add {value}'}}class w{constructor(o){var u;if(this.events={search:void 0,searchFilter:(D,y)=>D.text.toLowerCase().indexOf(y.toLowerCase())!==-1,addable:void 0,beforeChange:void 0,afterChange:void 0,beforeOpen:void 0,afterOpen:void 0,beforeClose:void 0,afterClose:void 0},this.windowResize=a(()=>{!this.settings.isOpen&&!this.settings.isFullOpen||this.render.moveContent()}),this.windowScroll=a(()=>{!this.settings.isOpen&&!this.settings.isFullOpen||this.render.moveContent()}),this.documentClick=D=>{this.settings.isOpen&&D.target&&!s(D.target,this.settings.id)&&this.close(D.type)},this.windowVisibilityChange=()=>{document.hidden&&this.close()},this.selectEl=typeof o.select=="string"?document.querySelector(o.select):o.select,!this.selectEl){o.events&&o.events.error&&o.events.error(new Error("Could not find select element"));return}if(this.selectEl.tagName!=="SELECT"){o.events&&o.events.error&&o.events.error(new Error("Element isnt of type select"));return}this.selectEl.dataset.ssid&&this.destroy(),this.settings=new T(o.settings),this.cssClasses=new e(o.cssClasses);const l=["afterChange","beforeOpen","afterOpen","beforeClose","afterClose"];for(const D in o.events)o.events.hasOwnProperty(D)&&(l.indexOf(D)!==-1?this.events[D]=a(o.events[D],100):this.events[D]=o.events[D]);this.settings.disabled=!((u=o.settings)===null||u===void 0)&&u.disabled?o.settings.disabled:this.selectEl.disabled,this.settings.isMultiple=this.selectEl.multiple,this.settings.style=this.selectEl.style.cssText,this.settings.class=this.selectEl.className.split(" "),this.select=new C(this.selectEl),this.select.updateSelect(this.settings.id,this.settings.style,this.settings.class),this.select.hideUI(),this.select.onValueChange=D=>{this.setSelected(D.map(y=>y.id))},this.select.onClassChange=D=>{this.settings.class=D,this.render.updateClassStyles()},this.select.onDisabledChange=D=>{D?this.disable():this.enable()},this.select.onOptionsChange=D=>{this.setData(D)},this.store=new m(this.settings.isMultiple?"multiple":"single",o.data?o.data:this.select.getData()),o.data&&this.select.updateOptions(this.store.getData());const g={open:this.open.bind(this),close:this.close.bind(this),addable:this.events.addable?this.events.addable:void 0,setSelected:this.setSelected.bind(this),addOption:this.addOption.bind(this),search:this.search.bind(this),beforeChange:this.events.beforeChange,afterChange:this.events.afterChange};this.render=new b(this.settings,this.cssClasses,this.store,g),this.render.renderValues(),this.render.renderOptions(this.store.getData());const S=this.selectEl.getAttribute("aria-label"),E=this.selectEl.getAttribute("aria-labelledby");S?this.render.main.main.setAttribute("aria-label",S):E&&this.render.main.main.setAttribute("aria-labelledby",E),this.selectEl.parentNode&&this.selectEl.parentNode.insertBefore(this.render.main.main,this.selectEl.nextSibling),window.addEventListener("resize",this.windowResize,!1),this.settings.openPosition==="auto"&&window.addEventListener("scroll",this.windowScroll,!1),document.addEventListener("visibilitychange",this.windowVisibilityChange),this.settings.disabled&&this.disable(),this.settings.alwaysOpen&&this.open(),this.selectEl.slim=this}enable(){this.settings.disabled=!1,this.select.enable(),this.render.enable()}disable(){this.settings.disabled=!0,this.select.disable(),this.render.disable()}getData(){return this.store.getData()}setData(o){const u=this.store.getSelected(),l=this.store.validateDataArray(o);if(l){this.events.error&&this.events.error(l);return}this.store.setData(o);const g=this.store.getData();this.select.updateOptions(g),this.render.renderValues(),this.render.renderOptions(g),this.events.afterChange&&!r(u,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}getSelected(){let o=this.store.getSelectedOptions();return this.settings.keepOrder&&(o=this.store.selectedOrderOptions(o)),o.map(u=>u.value)}setSelected(o,u=!0){const l=this.store.getSelected(),g=this.store.getDataOptions();o=Array.isArray(o)?o:[o];const S=[];for(const D of o){if(g.find(y=>y.id==D)){S.push(D);continue}for(const y of g.filter(A=>A.value==D))S.push(y.id)}this.store.setSelectedBy("id",S);const E=this.store.getData();this.select.updateOptions(E),this.render.renderValues(),this.render.content.search.input.value!==""?this.search(this.render.content.search.input.value):this.render.renderOptions(E),u&&this.events.afterChange&&!r(l,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}addOption(o){const u=this.store.getSelected();this.store.getDataOptions().some(g=>{var S;return g.value===((S=o.value)!==null&&S!==void 0?S:o.text)})||this.store.addOption(o);const l=this.store.getData();this.select.updateOptions(l),this.render.renderValues(),this.render.renderOptions(l),this.events.afterChange&&!r(u,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}open(){this.settings.disabled||this.settings.isOpen||(this.events.beforeOpen&&this.events.beforeOpen(),this.render.open(),this.settings.showSearch&&this.settings.focusSearch&&this.render.searchFocus(),this.settings.isOpen=!0,setTimeout(()=>{this.events.afterOpen&&this.events.afterOpen(),this.settings.isOpen&&(this.settings.isFullOpen=!0),document.addEventListener("click",this.documentClick)},this.settings.timeoutDelay),this.settings.contentPosition==="absolute"&&(this.settings.intervalMove&&clearInterval(this.settings.intervalMove),this.settings.intervalMove=setInterval(this.render.moveContent.bind(this.render),500)))}close(o=null){!this.settings.isOpen||this.settings.alwaysOpen||(this.events.beforeClose&&this.events.beforeClose(),this.render.close(),this.render.content.search.input.value!==""&&this.search(""),this.render.mainFocus(o),this.settings.isOpen=!1,this.settings.isFullOpen=!1,setTimeout(()=>{this.events.afterClose&&this.events.afterClose(),document.removeEventListener("click",this.documentClick)},this.settings.timeoutDelay),this.settings.intervalMove&&clearInterval(this.settings.intervalMove))}search(o){if(this.render.content.search.input.value!==o&&(this.render.content.search.input.value=o),!this.events.search){this.render.renderOptions(o===""?this.store.getData():this.store.search(o,this.events.searchFilter));return}this.render.renderSearching();const u=this.events.search(o,this.store.getSelectedOptions());if(u instanceof Promise){u.then(l=>{this.render.renderOptions(this.store.partialToFullData(l))}).catch(l=>{this.render.renderError(typeof l=="string"?l:l.message)});return}else Array.isArray(u)?this.render.renderOptions(this.store.partialToFullData(u)):this.render.renderError("Search event must return a promise or an array of data")}destroy(){document.removeEventListener("click",this.documentClick),window.removeEventListener("resize",this.windowResize,!1),this.settings.openPosition==="auto"&&window.removeEventListener("scroll",this.windowScroll,!1),document.removeEventListener("visibilitychange",this.windowVisibilityChange),this.store.setData([]),this.render.destroy(),this.select.destroy()}}return w})}(st)),st.exports}var $o=No();const Ho=Fo($o);window.TomSelect=ne;window.SlimSelect=Ho;
